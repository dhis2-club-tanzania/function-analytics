!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("function-analytics",[],t):"object"==typeof exports?exports["function-analytics"]=t():e["function-analytics"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=29)}([function(e,t,r){"use strict";var n=r(6),s=r(12),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:s,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,s=arguments.length;n<s;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,function(t,s){e[s]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return f});var n=r(3),s=r.n(n),o=r(10),i=r.n(o),a=r(2),u=r.n(a);let c;class f{static initiateRunner(e){f.instance||(this.config=e,this.cache={},c=this)}get instance(){return c}set config(e){this.config=e}get config(){return this.config}_fetch(e,t,r){if(!c){throw Error('Configration not set please configre function analytics eg {baseUrl:"dhis_base_url", username:"username", password:"password"}')}let n=e.hash();if(c.cache[n])c.cache[n].finished?t(e.performPostProcess(JSON.parse(JSON.stringify(c.cache[n].data)))):c.cache[n].resolutions.push(t);else{c.cache[n]={finished:!1,resolutions:[]};const s={url:c.config.baseUrl+e.url,method:"get",adapter:u.a};c.config.username&&c.config.password&&(s.auth={username:c.config.username,password:c.config.password}),i.a.request(s).then(r=>{c.cache[n].data=r.data,t(e.performPostProcess(JSON.parse(JSON.stringify(c.cache[n].data)))),c.cache[n].resolutions.forEach(function(t){t(e.performPostProcess(JSON.parse(JSON.stringify(c.cache[n].data))))}),c.cache[n].finished=!0},e=>{r(e)})}}getResults(e){return e._fetchers?this.getAllResults(e):new s.a((t,r,n)=>{e.hasDependencies()?e.getDependecyFetchResults().then(()=>{e.performPreProcess(),this._fetch(e,t,r)}).catch(e=>{console.log("Errrrrrrrrrr:",e),r()}):this._fetch(e,t,r)})}getAllResults(e){return new s.a((t,r,n)=>{const o=e.fetchers.map(e=>(new f).getResults(e));return s.a.all(o).then(r=>{t(e.performPostProcess(r))}).catch(e=>{r(e)})})}}}).call(this,r(5))},function(e,t,r){"use strict";var n=r(0),s=r(15),o=r(17),i=r(18),a=r(19),u=r(7),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(20);e.exports=function(e){return new Promise(function(t,f){var h=e.data,l=e.headers;n.isFormData(h)&&delete l["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||a(e.url)||(p=new window.XDomainRequest,d="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";l.Authorization="Basic "+c(g+":"+y)}if(p.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[d]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:r,config:e,request:p};s(t,f,n),p=null}},p.onerror=function(){f(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){f(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var w=r(21),v=(e.withCredentials||a(e.url))&&e.xsrfCookieName?w.read(e.xsrfCookieName):void 0;v&&(l[e.xsrfHeaderName]=v)}if("setRequestHeader"in p&&n.forEach(l,function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete l[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===h&&(h=null),p.send(h)})}},function(e,t,r){"use strict";const n=Symbol?Symbol():"__listeners";class s extends Promise{constructor(e){super((t,r)=>e(t,r,e=>{try{return this[n].forEach(t=>t(e))}catch(e){r(e)}})),this[n]=[]}progress(e){if("function"!=typeof e)throw new Error("PROGRESS_REQUIRES_FUNCTION");return this[n].push(e),this}static all(e){const t=new Array(e.length),r=e.length;let n=0;return new s((s,o,i)=>{e.forEach((e,a)=>{e.then(e=>{t[a]=e,t.proportion=++n/r,i(t),n===r&&s(t)}).catch(o)})})}static sequence(e,t){const r=[],n=e.length;let o=0;return new s((s,i,a)=>{!function u(){t.call(null,e[r.length]).then(e=>{r.push(e),r.proportion=++o/n,a(r),r.length===n?s(r):u()}).catch(i)}()})}}e.exports=s},function(e,t,r){"use strict";(function(t){var n=r(0),s=r(14),o={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=r(2):void 0!==t&&(a=r(2)),a),transformRequest:[function(e,t){return s(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){u.headers[e]={}}),n.forEach(["post","put","patch"],function(e){u.headers[e]=n.merge(o)}),e.exports=u}).call(this,r(5))},function(e,t){var r,n,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u,c=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!f){var e=a(l);f=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||f||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(16);e.exports=function(e,t,r,s,o){var i=new Error(e);return n(i,t,r,s,o)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){e.exports=r(11)},function(e,t,r){"use strict";var n=r(0),s=r(6),o=r(13),i=r(4);function a(e){var t=new o(e),r=s(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var u=a(i);u.Axios=o,u.create=function(e){return a(n.merge(i,e))},u.Cancel=r(9),u.CancelToken=r(27),u.isCancel=r(8),u.all=function(e){return Promise.all(e)},u.spread=r(28),e.exports=u,e.exports.default=u},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(4),s=r(0),o=r(22),i=r(23);function a(e){this.defaults=e,this.interceptors={request:new o,response:new o}}a.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),(e=s.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},s.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,r){return this.request(s.merge(r||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,r,n){return this.request(s.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=a},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,s){return e.config=t,r&&(e.code=r),e.request=n,e.response=s,e}},function(e,t,r){"use strict";var n=r(0);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var i=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(s(t)+"="+s(e))}))}),o=i.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,r){"use strict";var n=r(0),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,i={};return e?(n.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(i[t]&&s.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function s(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=s(window.location.href),function(t){var r=n.isString(t)?s(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function s(){this.message="String contains an invalid character"}s.prototype=new Error,s.prototype.code=5,s.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,o=String(e),i="",a=0,u=n;o.charAt(0|a)||(u="=",a%1);i+=u.charAt(63&t>>8-a%1*8)){if((r=o.charCodeAt(a+=.75))>255)throw new s;t=t<<8|r}return i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,s,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(s)&&a.push("path="+s),n.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(0);function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=s},function(e,t,r){"use strict";var n=r(0),s=r(24),o=r(8),i=r(4),a=r(25),u=r(26);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return c(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(9);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s(function(t){e=t}),cancel:e}},e.exports=s},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var n=r(1);class s{constructor(){this.postProcessors=[],this.dependencies=[]}hasDependencies(){return this.dependencies.length>0}preProcess(e){return this.dependencies.push(e),this}addPreProcess(e){return this.dependencies.push(e),this}postProcess(e){return this.postProcessors.push(e),this}addPostProcess(e){return this.postProcessors.push(e),this}performPreProcess(){return this.dependencies.forEach(e=>{e.processCallback(e.process._results,this)}),this}performPostProcess(e){this._results=e;let t=e;return this.postProcessors.forEach(e=>{t=e(t)}),t}}var o=r(3),i=r.n(o);class a extends s{constructor(){super(),this.parameters={}}get _urlParameters(){let e="";return Object.keys(this.parameters).forEach(t=>{""!==e&&(e+="&"),"string"==typeof this.parameters[t]?e+=t+"="+this.parameters[t]:Object.keys(this.parameters[t]).forEach(r=>{""!==e&&(e+="&"),""===this.parameters[t][r]?e+=t+"="+r:e+=t+"="+r+":"+this.parameters[t][r]})}),e}get url(){throw new Error("Should implement url generation")}get(){return(new n.a).getResults(this)}setParameters(e){return Object.keys(e).forEach(t=>{this.parameters[t]=e[t]}),this}getDependecyFetchResults(){const e=this.dependencies.map(e=>(new n.a).getResults(e.process));return i.a.all(e)}_encode64(e){return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))}hash(){return this.url}}class u{constructor(e,t,r){this.row=e,this.headers=t,this.metaData=r}dimension(e){var t=-1,r="";return this.headers.forEach((r,n)=>{r.name===e&&(t=n)}),this.metaData.names?r=this.metaData.names[this.row[t]]:this.metaData.items&&(r=this.metaData.items[this.row[t]]?this.metaData.items[this.row[t]].name:void 0),{id:this.row[t],name:r,path:this.metaData.ouHierarchy&&void 0!==this.metaData.ouHierarchy[this.row[t]]?this.metaData.ouHierarchy[this.row[t]]:void 0}}get dx(){return this.dimension("dx")}get pe(){return this.dimension("pe")}get ou(){return this.dimension("ou")}get value(){return this.dimension("value").id}}class c extends Array{constructor(e){super(...e),Object.setPrototypeOf(this,Object.create(c.prototype))}get dx(){return this.getHeader("dx")}get pe(){return this.getHeader("pe")}get ou(){return this.getHeader("ou")}get value(){return this.getHeader("value")}getHeader(e){let t;return this.forEach((r,n)=>{r.name===e&&((t=r).index=n)}),t}}class f{constructor(e){this._data=e}get headers(){return new c(this._data.headers)}get metaData(){return this._data.metaData}get rows(){let e=[];return this._data.rows.forEach(t=>{e.push(new u(t,this.headers,this.metaData))}),e}getDimensionDetailsByName(e){var t=[];return this.metaData.dimensions&&this.metaData.dimensions[e].forEach(e=>{t.push(this.getDimensionDetails(e))}),t}get rows(){let e=[];return this._data.rows.forEach(t=>{e.push(new u(t,this.headers,this.metaData))}),e}getDimensionDetails(e){var t="";return this.metaData.names?t=this.metaData.names[e]:this.metaData.items&&(t=this.metaData.items[e]?this.metaData.items[e].name:void 0),{id:e,name:t,path:this.metaData.ouHierarchy&&void 0!==this.metaData.ouHierarchy[e]?this.metaData.ouHierarchy[e]:void 0}}get height(){return this._data.height}get width(){return this._data.width}}class h extends a{constructor(e=25){super(),"boolean"==typeof e&&(e=e?25:26),this.parameters.dimension={},this.postProcess(t=>this.standardizeAnalytics(t,e))}setData(e){return this.setDimension("dx",e),this}setPeriod(e){return this.setDimension("pe",e),this}setOrgUnit(e){return this.setDimension("ou",e),this}setSelections(e){return this.setPeriod(e.pe),this.setOrgUnit(e.ou),void 0!==e.rule.json.data&&this.setData(e.rule.json.data),void 0!==e.dimensions&&Array.isArray(e.dimensions)&&e.dimensions.forEach(function(e){if(Array.isArray(e.items)){let t="";e.items.forEach(function(e){t.length>0?t+=";"+e:t+=e}),this.setDimension(e.id,t)}}),this}setDimension(e,t){return this.parameters.dimension[e]=t||"",this}standardizeAnalytics(e,t=25){if("boolean"==typeof t&&(t=t?25:26),e.count)return e;let r={headers:[],metaData:{dimensions:{},names:{},dx:[],pe:[],ou:[],co:[]},rows:[]};if(e){if(e.headers&&e.headers.forEach(e=>{try{let t=e;r.headers.push(t)}catch(e){console.warn("Invalid header object")}}),e.metaData)try{let n=this.getSanitizedAnalyticsMetadata(e.metaData,t);r.metaData=n}catch(e){console.warn("Invalid metadata object")}e.rows&&(r.rows=e.rows)}return r.height=e.height,r.width=e.width,new f(r)}getSanitizedAnalyticsMetadata(e,t){let r={};return e&&(e.ouHierarchy&&(r.ouHierarchy=e.ouHierarchy),t<26?(r.names={},e.names?r.names=e.names:e.items&&Object.keys(e.items).forEach(t=>{r.names[t]=e.items[t].name}),e.dimensions&&Object.keys(e.dimensions).forEach(t=>{r[t]=e.dimensions[t]})):(r.items={},e.items?r.items=e.items:e.names&&Object.keys(e.items).forEach(t=>{e.items[t]={name:e.names[t]}}),e.dimensions?r.dimensions=e.dimensions:(r.dimensions={},Object.keys(e).forEach(t=>{-1===["names","items","dimensions"].indexOf(t)&&(r.dimensions[t]=e[t])})))),r}get url(){return"analytics?"+this._urlParameters}}const l=Symbol?Symbol():"__listeners";class p extends Promise{constructor(e){super((t,r)=>e(t,r,e=>{try{return this[l].forEach(t=>t(e))}catch(e){r(e)}})),this[l]=[]}progress(e){if("function"!=typeof e)throw new Error("PROGRESS_REQUIRES_FUNCTION");return this[l].push(e),this}static all(e){const t=new Array(e.length),r=e.length;let n=0;return new p((s,o,i)=>{e.forEach((e,a)=>{e.then(e=>{t[a]=e,t.proportion=++n/r,i(t),n===r&&s(t)}).catch(o)})})}static sequence(e,t){const r=[],n=e.length;let s=0;return new p((o,i,a)=>{!function u(){t.call(null,e[r.length]).then(e=>{r.push(e),r.proportion=++s/n,a(r),r.length===n?o(r):u()}).catch(i)}()})}}class d extends a{constructor(e){super(),this._fetchers=e}get fetchers(){return this._fetchers}get(){return(new n.a).getAllResults(this)}}r.d(t,"Fn",function(){return m});let m={Promise:p,Analytics:h,EventAnalytics:class extends h{setProgram(e){return this.program=e,this}get url(){return"analytics/events/query/"+this.program+"?"+this._urlParameters}},AnalyticsResult:f,IdentifiableObject:class extends a{constructor(e){super(),this._filters=[],this.objectName=e}get name(){return this.objectName}where(e,t,r){return this._filters.push({right:e,operator:t,left:r}),this}get url(){var e=this._urlParameters;return this._filters.forEach(t=>{""!==e&&(e+="&"),e+="filter="+t.right,"=="===t.operator?e+=":eq:"+t.left:"<"===t.operator?e+=":lt:"+t.left:"<="===t.operator?e+=":le:"+t.left:">"===t.operator?e+=":gt:"+t.left:">="===t.operator?e+=":ge:"+t.left:"<>"===t.operator?e+=":!eq:"+t.left:"in"===t.operator||"!in"===t.operator?e+=":"+t.operator+":["+t.left+"]":t.left?e+=":"+t.operator+":"+t.left:e+=":"+t.operator}),this.name+".json?"+e}},SQLViewData:class extends a{constructor(e){super(),this._id=e,this.parameters.var={}}setVariable(e,t){return this.parameters.var[e]=t||"",this}get url(){return"sqlViews/"+this._id+"/data.json?"+this._urlParameters}},Runner:n.a,Dependency:class{constructor(e,t){this.process=e,this.processCallback=t}},MultiFetcher:d,all:e=>new d(e),init:e=>{n.a.initiateRunner(e)}};"undefined"!=typeof window&&(window.Fn=m)}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3Mvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvcnVubmVyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9wcm9ncmVzcy1wcm9taXNlL2luZGV4LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9pcy1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idG9hLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvdXRpbGl0aWVzL3Byb2Nlc3MuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL3V0aWxpdGllcy9mZXRjaGVyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9yZXN1bHQvcm93LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9yZXN1bHQvYW5hbHl0aWNzLXJlc3VsdC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvbW9kZWwvYW5hbHl0aWNzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvcHJvZ3Jlc3MtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvdXRpbGl0aWVzL211bHRpLWZldGNoZXIuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9tb2RlbC9ldmVudC1hbmFseXRpY3MuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL21vZGVsL2lkZW50aWZpYWJsZS1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL21vZGVsL3NxbC12aWV3LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvZGVwZW5kZW5jeS5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJpc0J1ZmZlciIsInRvU3RyaW5nIiwiaXNBcnJheSIsInZhbCIsImlzT2JqZWN0IiwiaXNGdW5jdGlvbiIsImZvckVhY2giLCJvYmoiLCJmbiIsImxlbmd0aCIsImlzQXJyYXlCdWZmZXIiLCJpc0Zvcm1EYXRhIiwiRm9ybURhdGEiLCJpc0FycmF5QnVmZmVyVmlldyIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiYnVmZmVyIiwiaXNTdHJpbmciLCJpc051bWJlciIsImlzVW5kZWZpbmVkIiwiaXNEYXRlIiwiaXNGaWxlIiwiaXNCbG9iIiwiaXNTdHJlYW0iLCJwaXBlIiwiaXNVUkxTZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJpc1N0YW5kYXJkQnJvd3NlckVudiIsIm5hdmlnYXRvciIsInByb2R1Y3QiLCJ3aW5kb3ciLCJkb2N1bWVudCIsIm1lcmdlIiwicmVzdWx0IiwiYXNzaWduVmFsdWUiLCJhcmd1bWVudHMiLCJleHRlbmQiLCJhIiwiYiIsInRoaXNBcmciLCJ0cmltIiwic3RyIiwicmVwbGFjZSIsInByb2Nlc3MiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiUnVubmVyIiwicHJvZ3Jlc3NfcHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwicHJvZ3Jlc3NfcHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQiLCJheGlvc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiYXhpb3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0IiwiYXhpb3NfbGliX2FkYXB0ZXJzX2h0dHBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsImF4aW9zX2xpYl9hZGFwdGVyc19odHRwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCIsIl9pbnN0YW5jZSIsIltvYmplY3QgT2JqZWN0XSIsImNvbmZpZ3VyYXRpb25zIiwiaW5zdGFuY2UiLCJjb25maWciLCJjYWNoZSIsIl9mZXRjaCIsImZldGNoZXIiLCJyZXNvbHZlIiwicmVqZWN0IiwiRXJyb3IiLCJoYXNoZWQiLCJoYXNoIiwiZmluaXNoZWQiLCJwZXJmb3JtUG9zdFByb2Nlc3MiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJkYXRhIiwicmVzb2x1dGlvbnMiLCJwdXNoIiwidXJsIiwiYmFzZVVybCIsIm1ldGhvZCIsImFkYXB0ZXIiLCJodHRwYWRhcHRlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJhdXRoIiwiYXhpb3MiLCJyZXF1ZXN0IiwidGhlbiIsInJlc3VsdHMiLCJyZXNvbHV0aW9uIiwiZXJyIiwiZ2V0UmVzdWx0cyIsIl9mZXRjaGVycyIsImdldEFsbFJlc3VsdHMiLCJQcm9ncmVzc1Byb21pc2UiLCJwcm9ncmVzcyIsImhhc0RlcGVuZGVuY2llcyIsImdldERlcGVuZGVjeUZldGNoUmVzdWx0cyIsInBlcmZvcm1QcmVQcm9jZXNzIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwibXVsdGlmZXRjaGVyIiwicHJvbWlzZXMiLCJmZXRjaGVycyIsIm1hcCIsImFsbCIsInV0aWxzIiwic2V0dGxlIiwiYnVpbGRVUkwiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJjcmVhdGVFcnJvciIsImJ0b2EiLCJQcm9taXNlIiwicmVxdWVzdERhdGEiLCJyZXF1ZXN0SGVhZGVycyIsImhlYWRlcnMiLCJYTUxIdHRwUmVxdWVzdCIsImxvYWRFdmVudCIsInhEb21haW4iLCJYRG9tYWluUmVxdWVzdCIsIm9ucHJvZ3Jlc3MiLCJvbnRpbWVvdXQiLCJBdXRob3JpemF0aW9uIiwib3BlbiIsInRvVXBwZXJDYXNlIiwicGFyYW1zIiwicGFyYW1zU2VyaWFsaXplciIsInRpbWVvdXQiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VVUkwiLCJpbmRleE9mIiwicmVzcG9uc2VIZWFkZXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwicmVzcG9uc2UiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25lcnJvciIsImNvb2tpZXMiLCJ4c3JmVmFsdWUiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ4c3JmQ29va2llTmFtZSIsInJlYWQiLCJ1bmRlZmluZWQiLCJ4c3JmSGVhZGVyTmFtZSIsInRvTG93ZXJDYXNlIiwic2V0UmVxdWVzdEhlYWRlciIsImUiLCJvbkRvd25sb2FkUHJvZ3Jlc3MiLCJhZGRFdmVudExpc3RlbmVyIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbFRva2VuIiwicHJvbWlzZSIsImNhbmNlbCIsImFib3J0Iiwic2VuZCIsIkxJU1RFTkVSUyIsImV4ZWN1dG9yIiwic3VwZXIiLCJsaXN0ZW5lciIsImVycm9yIiwiaGFuZGxlciIsIkFycmF5IiwicmVzb2x2ZUNvdW50IiwiaW5kZXgiLCJwcm9wb3J0aW9uIiwiaW5wdXRzIiwiaW52b2tlTmV4dCIsIm5vcm1hbGl6ZUhlYWRlck5hbWUiLCJERUZBVUxUX0NPTlRFTlRfVFlQRSIsIkNvbnRlbnQtVHlwZSIsInNldENvbnRlbnRUeXBlSWZVbnNldCIsImRlZmF1bHRzIiwidHJhbnNmb3JtUmVxdWVzdCIsInRyYW5zZm9ybVJlc3BvbnNlIiwibWF4Q29udGVudExlbmd0aCIsInZhbGlkYXRlU3RhdHVzIiwiY29tbW9uIiwiQWNjZXB0IiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJsZW4iLCJydW4iLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJub29wIiwibmV4dFRpY2siLCJhcmdzIiwiYXBwbHkiLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJlbmhhbmNlRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsIl9fQ0FOQ0VMX18iLCJDYW5jZWwiLCJBeGlvcyIsImNyZWF0ZUluc3RhbmNlIiwiZGVmYXVsdENvbmZpZyIsImNvbnRleHQiLCJpbnN0YW5jZUNvbmZpZyIsIkNhbmNlbFRva2VuIiwiaXNDYW5jZWwiLCJzcHJlYWQiLCJkZWZhdWx0IiwiY29uc3RydWN0b3IiLCJyZWFkRmxvYXRMRSIsInNsaWNlIiwiaXNTbG93QnVmZmVyIiwiX2lzQnVmZmVyIiwiSW50ZXJjZXB0b3JNYW5hZ2VyIiwiZGlzcGF0Y2hSZXF1ZXN0IiwiaW50ZXJjZXB0b3JzIiwiY2hhaW4iLCJpbnRlcmNlcHRvciIsInVuc2hpZnQiLCJmdWxmaWxsZWQiLCJyZWplY3RlZCIsInNoaWZ0Iiwibm9ybWFsaXplZE5hbWUiLCJlbmNvZGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJzZXJpYWxpemVkUGFyYW1zIiwicGFydHMiLCJ2IiwidG9JU09TdHJpbmciLCJqb2luIiwiaWdub3JlRHVwbGljYXRlT2YiLCJwYXJzZWQiLCJzcGxpdCIsImxpbmUiLCJzdWJzdHIiLCJvcmlnaW5VUkwiLCJtc2llIiwidGVzdCIsInVzZXJBZ2VudCIsInVybFBhcnNpbmdOb2RlIiwiY3JlYXRlRWxlbWVudCIsInJlc29sdmVVUkwiLCJocmVmIiwic2V0QXR0cmlidXRlIiwicHJvdG9jb2wiLCJob3N0Iiwic2VhcmNoIiwiaG9zdG5hbWUiLCJwb3J0IiwicGF0aG5hbWUiLCJjaGFyQXQiLCJsb2NhdGlvbiIsInJlcXVlc3RVUkwiLCJjaGFycyIsIkUiLCJpbnB1dCIsImJsb2NrIiwiY2hhckNvZGUiLCJTdHJpbmciLCJvdXRwdXQiLCJpZHgiLCJjaGFyQ29kZUF0Iiwid3JpdGUiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInNlY3VyZSIsImNvb2tpZSIsIkRhdGUiLCJ0b0dNVFN0cmluZyIsIm1hdGNoIiwiUmVnRXhwIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicmVtb3ZlIiwibm93IiwiaGFuZGxlcnMiLCJ1c2UiLCJlamVjdCIsImlkIiwiaCIsInRyYW5zZm9ybURhdGEiLCJpc0Fic29sdXRlVVJMIiwiY29tYmluZVVSTHMiLCJ0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwidGhyb3dJZlJlcXVlc3RlZCIsImJhc2VVUkwiLCJyZWFzb24iLCJmbnMiLCJyZWxhdGl2ZVVSTCIsIlR5cGVFcnJvciIsInJlc29sdmVQcm9taXNlIiwidG9rZW4iLCJzb3VyY2UiLCJjYWxsYmFjayIsImFyciIsIlByb2Nlc3MiLCJwb3N0UHJvY2Vzc29ycyIsImRlcGVuZGVuY2llcyIsInByZVByb2Nlc3MiLCJkZXBlbmRlbmN5IiwiYWRkUHJlUHJvY2VzcyIsInBvc3RQcm9jZXNzIiwiYWRkUG9zdFByb2Nlc3MiLCJwcm9jZXNzQ2FsbGJhY2siLCJfcmVzdWx0cyIsImRhdGFUb1Byb2Nlc3MiLCJGZXRjaGVyIiwicGFyYW1ldGVycyIsIl91cmxQYXJhbWV0ZXJzIiwia2V5cyIsImtleTIiLCJzZXRQYXJhbWV0ZXJzIiwiX2VuY29kZTY0IiwiYnVmZiIsIlVpbnQ4QXJyYXkiLCJyZWR1Y2UiLCJmcm9tQ2hhckNvZGUiLCJSb3ciLCJyb3ciLCJtZXRhRGF0YSIsImRpbWVuc2lvbiIsImhlYWRlciIsIm5hbWVzIiwiaXRlbXMiLCJvdUhpZXJhcmNoeSIsImR4IiwicGUiLCJvdSIsIkFuYWx5dGljc0hlYWRlcnMiLCJzZXRQcm90b3R5cGVPZiIsImdldEhlYWRlciIsInJldHVybkhlYWRlciIsIkFuYWx5dGljc1Jlc3VsdCIsImFuYWx5dGljc09iamVjdCIsIl9kYXRhIiwicm93cyIsImdldERpbWVuc2lvbkRldGFpbHNCeU5hbWUiLCJkaW1lbnNpb25zIiwiaXRlbSIsImdldERpbWVuc2lvbkRldGFpbHMiLCJoZWlnaHQiLCJ3aWR0aCIsIkFuYWx5dGljcyIsInN0YW5kYXJkaXplQW5hbHl0aWNzIiwic2V0RGF0YSIsInNldERpbWVuc2lvbiIsInNldFBlcmlvZCIsInNldE9yZ1VuaXQiLCJzZXRTZWxlY3Rpb25zIiwicnVsZSIsImpzb24iLCJkaW1lbnNpb25JdGVtcyIsImRpbSIsImNvdW50Iiwic2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0IiwiY28iLCJuZXdIZWFkZXIiLCJ3YXJuIiwic2FuaXRpemVkTWV0YWRhdGEiLCJnZXRTYW5pdGl6ZWRBbmFseXRpY3NNZXRhZGF0YSIsImFuYWx5dGljTWV0YWRhdGEiLCJuYW1lS2V5IiwiTXVsdGlGZXRjaGVyIiwiRm4iLCJFdmVudEFuYWx5dGljcyIsInNldFByb2dyYW0iLCJwcm9ncmFtIiwiSWRlbnRpZmlhYmxlT2JqZWN0Iiwib2JqZWN0TmFtZSIsIl9maWx0ZXJzIiwid2hlcmUiLCJyaWdodCIsIm9wZXJhdG9yIiwibGVmdCIsImZpbHRlciIsIlNRTFZpZXdEYXRhIiwiX2lkIiwic2V0VmFyaWFibGUiLCJ2YXJpYWJsZSIsIkRlcGVuZGVuY3kiLCJpbml0IiwiaW5pdGlhdGVSdW5uZXIiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELE9BQUEsd0JBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsc0JBQUFELElBRUFELEVBQUEsc0JBQUFDLElBUkEsQ0FTQyxvQkFBQUssVUFBQUMsS0FBQSxXQUNELG1CQ1RBLElBQUFDLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQVIsUUFHQSxJQUFBQyxFQUFBSyxFQUFBRSxHQUFBLENBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVYsUUFBQSxJQVVBLE9BTkFXLEVBQUFILEdBQUFJLEtBQUFYLEVBQUFELFFBQUFDLElBQUFELFFBQUFPLEdBR0FOLEVBQUFTLEdBQUEsRUFHQVQsRUFBQUQsUUEwREEsT0FyREFPLEVBQUFNLEVBQUFGLEVBR0FKLEVBQUFPLEVBQUFSLEVBR0FDLEVBQUFRLEVBQUEsU0FBQWYsRUFBQWdCLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFsQixFQUFBZ0IsSUFDQUcsT0FBQUMsZUFBQXBCLEVBQUFnQixFQUFBLENB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VDZHLFVBR0UsTUFGVSxZQUFjN0csS0FBSzJiLElBQU0sY0FBZ0IzYixLQUFLdVgsaUJIUDFEdFMsT0FBUUEsSUFDUjZXLFdJakJLLE1BTUwzSyxZQUFZcE0sRUFBU21TLEdBQ25CbFgsS0FBSytFLFFBQVVBLEVBQ2YvRSxLQUFLa1gsZ0JBQWtCQSxJSlV6QjJELGFBQWNBLEVBU2RuUyxJQUFLRixHQUNJLElBQUlxUyxFQUFhclMsR0FVMUJ1VCxLQUFNblcsSUFDSlgsSUFBTytXLGVBQWVwVyxLQUlKLG9CQUFYMUIsU0FDVEEsT0FBTzRXLEdBQUtBIiwiZmlsZSI6ImZ1bmN0aW9uLWFuYWx5dGljcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcImZ1bmN0aW9uLWFuYWx5dGljc1wiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJmdW5jdGlvbi1hbmFseXRpY3NcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiZnVuY3Rpb24tYW5hbHl0aWNzXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyOSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBpc0J1ZmZlciA9IHJlcXVpcmUoJ2lzLWJ1ZmZlcicpO1xuXG4vKmdsb2JhbCB0b1N0cmluZzp0cnVlKi9cblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICByZXR1cm4gKHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcpICYmICh2YWwgaW5zdGFuY2VvZiBGb3JtRGF0YSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcbiAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ZpbGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyZWFtKHZhbCkge1xuICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcztcbn1cblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICogQHJldHVybnMge1N0cmluZ30gVGhlIFN0cmluZyBmcmVlZCBvZiBleGNlc3Mgd2hpdGVzcGFjZVxuICovXG5mdW5jdGlvbiB0cmltKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqLywgJycpLnJlcGxhY2UoL1xccyokLywgJycpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuICpcbiAqIFRoaXMgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXIsIGFuZCByZWFjdC1uYXRpdmUuXG4gKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG4gKlxuICogd2ViIHdvcmtlcnM6XG4gKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcbiAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG4gKlxuICogcmVhY3QtbmF0aXZlOlxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcbiAqL1xuZnVuY3Rpb24gaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkXG4gKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG4gKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYVxuICovXG5mdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykge1xuICBmb3JFYWNoKGIsIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhW2tleV0gPSB2YWw7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpc0FycmF5OiBpc0FycmF5LFxuICBpc0FycmF5QnVmZmVyOiBpc0FycmF5QnVmZmVyLFxuICBpc0J1ZmZlcjogaXNCdWZmZXIsXG4gIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG4gIGlzQXJyYXlCdWZmZXJWaWV3OiBpc0FycmF5QnVmZmVyVmlldyxcbiAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuICBpc051bWJlcjogaXNOdW1iZXIsXG4gIGlzT2JqZWN0OiBpc09iamVjdCxcbiAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuICBpc0RhdGU6IGlzRGF0ZSxcbiAgaXNGaWxlOiBpc0ZpbGUsXG4gIGlzQmxvYjogaXNCbG9iLFxuICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuICBpc1N0cmVhbTogaXNTdHJlYW0sXG4gIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcbiAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuICBmb3JFYWNoOiBmb3JFYWNoLFxuICBtZXJnZTogbWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltXG59O1xuIiwiaW1wb3J0IFByb2dyZXNzUHJvbWlzZSBmcm9tICdwcm9ncmVzcy1wcm9taXNlJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgaHR0cGFkYXB0ZXIgZnJvbSAnYXhpb3MvbGliL2FkYXB0ZXJzL2h0dHAnO1xuaW1wb3J0IHhocmFkYXB0ZXIgZnJvbSAnYXhpb3MvbGliL2FkYXB0ZXJzL3hocic7XG5sZXQgX2luc3RhbmNlO1xuXG4vKipcbiAqIFJ1bm5lciByZXByZXNlbnRzIHRoZSBwcm9jZXNzIHdoaWNoIHdpbGwgc2NoZWR1bGUgYW5kIHJ1biBvcGVyYXRpb25zIG9mIHRoZSBwcm9jZXNzZXNcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5lciB7XG4gIC8qKlxuICAgKiBJbml0aWF0ZXMgdGhlIHJ1bm5lciBzaW5nbGV0b24gaW5zdGFuY2VcbiAgICogQHBhcmFtIGNvbmZpZ3VyYXRpb25zXG4gICAqL1xuICBzdGF0aWMgaW5pdGlhdGVSdW5uZXIoY29uZmlndXJhdGlvbnMpIHtcbiAgICBpZiAoIVJ1bm5lci5pbnN0YW5jZSkge1xuICAgICAgdGhpcy5jb25maWcgPSBjb25maWd1cmF0aW9ucztcbiAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgIF9pbnN0YW5jZSA9IHRoaXM7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgUnVubmVyIGluc3RhbmNlXG4gICAqIEByZXR1cm5zIHtSdW5uZXJ9XG4gICAqL1xuICBnZXQgaW5zdGFuY2UoKSB7XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNvbmZpZ3VyYXRpb25cbiAgICogQHBhcmFtIGNvbmZpZ3VyYXRpb25zXG4gICAqL1xuICBzZXQgY29uZmlnKGNvbmZpZ3VyYXRpb25zKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWd1cmF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb25zXG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgZ2V0IGNvbmZpZygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25maWc7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBjYWxsYmFjayB0eXBlIGlzIGNhbGxlZCBgcmVzb2x2ZUNhbGxiYWNrYC5cbiAgICpcbiAgICogQGNhbGxiYWNrIHJlc29sdmVDYWxsYmFja1xuICAgKiBAcGFyYW0ge09iamVjdH0gcmVzcG9uc2VSZXN1bHRcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoaXMgY2FsbGJhY2sgdHlwZSBpcyBjYWxsZWQgYHJlamVjdENhbGxiYWNrYC5cbiAgICpcbiAgICogQGNhbGxiYWNrIHJlamVjdENhbGxiYWNrXG4gICAqIEBwYXJhbSB7RXJyb3J9IGVycm9yXG4gICAqL1xuXG4gIC8qKlxuICAgKiBGZXRjaGVzIHRoZSBkYXRhIGZyb20gdGhlIGZldGNoZXJcbiAgICogQHBhcmFtIHtGZXRjaGVyfSBmZXRjaGVyXG4gICAqIEBwYXJhbSB7cmVzb2x2ZUNhbGxiYWNrfSByZXNvbHZlXG4gICAqIEBwYXJhbSB7cmVqZWN0Q2FsbGJhY2t9IHJlamVjdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2ZldGNoKGZldGNoZXIsIHJlc29sdmUsIHJlamVjdCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBsZXQgZXJyb3IgPVxuICAgICAgICAnQ29uZmlncmF0aW9uIG5vdCBzZXQgcGxlYXNlIGNvbmZpZ3JlIGZ1bmN0aW9uICcgK1xuICAgICAgICAnYW5hbHl0aWNzIGVnIHtiYXNlVXJsOlwiZGhpc19iYXNlX3VybFwiLCB1c2VybmFtZTpcInVzZXJuYW1lXCIsICcgK1xuICAgICAgICAncGFzc3dvcmQ6XCJwYXNzd29yZFwifSc7XG5cbiAgICAgIHRocm93IEVycm9yKGVycm9yKTtcbiAgICB9XG4gICAgbGV0IGhhc2hlZCA9IGZldGNoZXIuaGFzaCgpO1xuXG4gICAgaWYgKCFfaW5zdGFuY2UuY2FjaGVbaGFzaGVkXSkge1xuICAgICAgX2luc3RhbmNlLmNhY2hlW2hhc2hlZF0gPSB7XG4gICAgICAgIGZpbmlzaGVkOiBmYWxzZSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IFtdXG4gICAgICB9O1xuICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICB1cmw6IF9pbnN0YW5jZS5jb25maWcuYmFzZVVybCArIGZldGNoZXIudXJsLFxuICAgICAgICBtZXRob2Q6ICdnZXQnLFxuICAgICAgICBhZGFwdGVyOiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgPyBodHRwYWRhcHRlciA6IHhocmFkYXB0ZXJcbiAgICAgIH07XG5cbiAgICAgIGlmIChfaW5zdGFuY2UuY29uZmlnLnVzZXJuYW1lICYmIF9pbnN0YW5jZS5jb25maWcucGFzc3dvcmQpIHtcbiAgICAgICAgY29uZmlnLmF1dGggPSB7XG4gICAgICAgICAgdXNlcm5hbWU6IF9pbnN0YW5jZS5jb25maWcudXNlcm5hbWUsXG4gICAgICAgICAgcGFzc3dvcmQ6IF9pbnN0YW5jZS5jb25maWcucGFzc3dvcmRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGF4aW9zLnJlcXVlc3QoY29uZmlnKS50aGVuKFxuICAgICAgICByZXN1bHRzID0+IHtcbiAgICAgICAgICBfaW5zdGFuY2UuY2FjaGVbaGFzaGVkXS5kYXRhID0gcmVzdWx0cy5kYXRhO1xuICAgICAgICAgIHJlc29sdmUoZmV0Y2hlci5wZXJmb3JtUG9zdFByb2Nlc3MoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShfaW5zdGFuY2UuY2FjaGVbaGFzaGVkXS5kYXRhKSkpKTtcbiAgICAgICAgICBfaW5zdGFuY2UuY2FjaGVbaGFzaGVkXS5yZXNvbHV0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uKGZldGNoZXIucGVyZm9ybVBvc3RQcm9jZXNzKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX2luc3RhbmNlLmNhY2hlW2hhc2hlZF0uZGF0YSkpKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX2luc3RhbmNlLmNhY2hlW2hhc2hlZF0uZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIV9pbnN0YW5jZS5jYWNoZVtoYXNoZWRdLmZpbmlzaGVkKSB7XG4gICAgICAgIF9pbnN0YW5jZS5jYWNoZVtoYXNoZWRdLnJlc29sdXRpb25zLnB1c2gocmVzb2x2ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKGZldGNoZXIucGVyZm9ybVBvc3RQcm9jZXNzKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoX2luc3RhbmNlLmNhY2hlW2hhc2hlZF0uZGF0YSkpKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoZXMgZGF0YSByZWxhdGVkIHRvIGEgZmV0Y2hlclxuICAgKiBAcGFyYW0ge0ZldGNoZXJ9IGZldGNoZXJcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX1cbiAgICovXG4gIGdldFJlc3VsdHMoZmV0Y2hlcikge1xuICAgIGlmIChmZXRjaGVyLl9mZXRjaGVycykge1xuICAgICAgLy8gSWYgaXMgYSBtdWx0aWZldGNoZXJcbiAgICAgIHJldHVybiB0aGlzLmdldEFsbFJlc3VsdHMoZmV0Y2hlcik7XG4gICAgfVxuICAgIC8vIGxldCBoYXNoZWQgPSBmZXRjaGVyLmhhc2goKTtcblxuICAgIC8vIGlmICghX2luc3RhbmNlLmNhY2hlW2hhc2hlZF0pIHtcbiAgICAvLyAgIF9pbnN0YW5jZS5jYWNoZVtoYXNoZWRdID0gbmV3IFByb2dyZXNzUHJvbWlzZShcbiAgICAvLyAgICAgKHJlc29sdmUsIHJlamVjdCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAvLyAgICAgICBpZiAoZmV0Y2hlci5oYXNEZXBlbmRlbmNpZXMoKSkge1xuICAgIC8vICAgICAgICAgZmV0Y2hlclxuICAgIC8vICAgICAgICAgICAuZ2V0RGVwZW5kZWN5RmV0Y2hSZXN1bHRzKClcbiAgICAvLyAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgIC8vICAgICAgICAgICAgIGZldGNoZXIucGVyZm9ybVByZVByb2Nlc3MoKTtcbiAgICAvLyAgICAgICAgICAgICB0aGlzLl9mZXRjaChmZXRjaGVyLCByZXNvbHZlLCByZWplY3QpO1xuICAgIC8vICAgICAgICAgICB9KVxuICAgIC8vICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJycnJycnJycnJyOicsIGVycik7XG4gICAgLy8gICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgLy8gICAgICAgICAgIH0pO1xuICAgIC8vICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICB0aGlzLl9mZXRjaChmZXRjaGVyLCByZXNvbHZlLCByZWplY3QpO1xuICAgIC8vICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vICAgKTtcbiAgICAvLyB9XG4gICAgcmV0dXJuIG5ldyBQcm9ncmVzc1Byb21pc2UoXG4gICAgICAocmVzb2x2ZSwgcmVqZWN0LCBwcm9ncmVzcykgPT4ge1xuICAgICAgICBpZiAoZmV0Y2hlci5oYXNEZXBlbmRlbmNpZXMoKSkge1xuICAgICAgICAgIGZldGNoZXJcbiAgICAgICAgICAgIC5nZXREZXBlbmRlY3lGZXRjaFJlc3VsdHMoKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBmZXRjaGVyLnBlcmZvcm1QcmVQcm9jZXNzKCk7XG4gICAgICAgICAgICAgIHRoaXMuX2ZldGNoKGZldGNoZXIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJycnJycnJycnI6JywgZXJyKTtcbiAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9mZXRjaChmZXRjaGVyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaGVzIGRhdGEgZm9yIG11bHRpcGxlIGZldGNoZXJzXG4gICAqIEBwYXJhbSB7TXVsdGlGZXRjaGVyfSBtdWx0aWZldGNoZXJcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX1cbiAgICovXG4gIGdldEFsbFJlc3VsdHMobXVsdGlmZXRjaGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9ncmVzc1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIGNvbnN0IHByb21pc2VzID0gbXVsdGlmZXRjaGVyLmZldGNoZXJzLm1hcChmZXRjaGVyID0+XG4gICAgICAgIG5ldyBSdW5uZXIoKS5nZXRSZXN1bHRzKGZldGNoZXIpXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gUHJvZ3Jlc3NQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgICAgLnRoZW4ocmVzdWx0cyA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShtdWx0aWZldGNoZXIucGVyZm9ybVBvc3RQcm9jZXNzKHJlc3VsdHMpKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBwYXJzZUhlYWRlcnMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzJyk7XG52YXIgaXNVUkxTYW1lT3JpZ2luID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbicpO1xudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi4vY29yZS9jcmVhdGVFcnJvcicpO1xudmFyIGJ0b2EgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmJ0b2EgJiYgd2luZG93LmJ0b2EuYmluZCh3aW5kb3cpKSB8fCByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnRvYScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG4gICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBsb2FkRXZlbnQgPSAnb25yZWFkeXN0YXRlY2hhbmdlJztcbiAgICB2YXIgeERvbWFpbiA9IGZhbHNlO1xuXG4gICAgLy8gRm9yIElFIDgvOSBDT1JTIHN1cHBvcnRcbiAgICAvLyBPbmx5IHN1cHBvcnRzIFBPU1QgYW5kIEdFVCBjYWxscyBhbmQgZG9lc24ndCByZXR1cm5zIHRoZSByZXNwb25zZSBoZWFkZXJzLlxuICAgIC8vIERPTidUIGRvIHRoaXMgZm9yIHRlc3RpbmcgYi9jIFhNTEh0dHBSZXF1ZXN0IGlzIG1vY2tlZCwgbm90IFhEb21haW5SZXF1ZXN0LlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnICYmXG4gICAgICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHdpbmRvdy5YRG9tYWluUmVxdWVzdCAmJiAhKCd3aXRoQ3JlZGVudGlhbHMnIGluIHJlcXVlc3QpICYmXG4gICAgICAgICFpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpIHtcbiAgICAgIHJlcXVlc3QgPSBuZXcgd2luZG93LlhEb21haW5SZXF1ZXN0KCk7XG4gICAgICBsb2FkRXZlbnQgPSAnb25sb2FkJztcbiAgICAgIHhEb21haW4gPSB0cnVlO1xuICAgICAgcmVxdWVzdC5vbnByb2dyZXNzID0gZnVuY3Rpb24gaGFuZGxlUHJvZ3Jlc3MoKSB7fTtcbiAgICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHt9O1xuICAgIH1cblxuICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cbiAgICBpZiAoY29uZmlnLmF1dGgpIHtcbiAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgfHwgJyc7XG4gICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpO1xuICAgIH1cblxuICAgIHJlcXVlc3Qub3Blbihjb25maWcubWV0aG9kLnRvVXBwZXJDYXNlKCksIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7XG5cbiAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuICAgIHJlcXVlc3QudGltZW91dCA9IGNvbmZpZy50aW1lb3V0O1xuXG4gICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZVxuICAgIHJlcXVlc3RbbG9hZEV2ZW50XSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QgfHwgKHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCAmJiAheERvbWFpbikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcbiAgICAgIC8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkXG4gICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAwICYmICEocmVxdWVzdC5yZXNwb25zZVVSTCAmJiByZXF1ZXN0LnJlc3BvbnNlVVJMLmluZGV4T2YoJ2ZpbGU6JykgPT09IDApKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2VcbiAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDtcbiAgICAgIHZhciByZXNwb25zZURhdGEgPSAhY29uZmlnLnJlc3BvbnNlVHlwZSB8fCBjb25maWcucmVzcG9uc2VUeXBlID09PSAndGV4dCcgPyByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB7XG4gICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcbiAgICAgICAgLy8gSUUgc2VuZHMgMTIyMyBpbnN0ZWFkIG9mIDIwNCAoaHR0cHM6Ly9naXRodWIuY29tL2F4aW9zL2F4aW9zL2lzc3Vlcy8yMDEpXG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMgPT09IDEyMjMgPyAyMDQgOiByZXF1ZXN0LnN0YXR1cyxcbiAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXMgPT09IDEyMjMgPyAnTm8gQ29udGVudCcgOiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RcbiAgICAgIH07XG5cbiAgICAgIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcbiAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlclxuICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBjb25maWcsIG51bGwsIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSB0aW1lb3V0XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBmdW5jdGlvbiBoYW5kbGVUaW1lb3V0KCkge1xuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsXG4gICAgICAgIHJlcXVlc3QpKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LlxuICAgIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG4gICAgaWYgKHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHtcbiAgICAgIHZhciBjb29raWVzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2Nvb2tpZXMnKTtcblxuICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgP1xuICAgICAgICAgIGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDpcbiAgICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLlxuICAgICAgICAvLyBCdXQsIHRoaXMgY2FuIGJlIHN1cHByZXNzZWQgZm9yICdqc29uJyB0eXBlIGFzIGl0IGNhbiBiZSBwYXJzZWQgYnkgZGVmYXVsdCAndHJhbnNmb3JtUmVzcG9uc2UnIGZ1bmN0aW9uLlxuICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbiAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24gb25DYW5jZWxlZChjYW5jZWwpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZWplY3QoY2FuY2VsKTtcbiAgICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0RGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0Jztcbi8vIEZhbGxiYWNrIGZvciBlbmdpbmVzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBTeW1ib2xcbmNvbnN0IExJU1RFTkVSUyA9IFN5bWJvbCA/IFN5bWJvbCgpIDogJ19fbGlzdGVuZXJzJztcblxuY2xhc3MgUHJvZ3Jlc3NQcm9taXNlIGV4dGVuZHMgUHJvbWlzZSB7XG4gIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG4gICAgc3VwZXIoKHJlc29sdmUsIHJlamVjdCkgPT4gZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0LFxuICAgICAgLy8gUGFzcyBtZXRob2QgZm9yIHBhc3NpbmcgcHJvZ3Jlc3MgdG8gbGlzdGVuZXJcbiAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gdGhpc1tMSVNURU5FUlNdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIodmFsdWUpKTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB0aGlzW0xJU1RFTkVSU10gPSBbXTtcbiAgfVxuICBwcm9ncmVzcyhoYW5kbGVyKSB7XG4gICAgaWYodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BST0dSRVNTX1JFUVVJUkVTX0ZVTkNUSU9OJyk7XG4gICAgdGhpc1tMSVNURU5FUlNdLnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgc3RhdGljIGFsbChwcm9taXNlcykge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkocHJvbWlzZXMubGVuZ3RoKTtcbiAgICBjb25zdCBsZW5ndGggPSBwcm9taXNlcy5sZW5ndGg7XG4gICAgbGV0IHJlc29sdmVDb3VudCA9IDA7XG4gICAgcmV0dXJuIG5ldyBQcm9ncmVzc1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIHByb21pc2VzLmZvckVhY2goKHByb21pc2UsIGluZGV4KSA9PiB7XG4gICAgICAgIHByb21pc2UudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgIHJlc3VsdHNbaW5kZXhdID0gcmVzdWx0O1xuICAgICAgICAgIHJlc3VsdHMucHJvcG9ydGlvbiA9ICsrcmVzb2x2ZUNvdW50IC8gbGVuZ3RoO1xuICAgICAgICAgIHByb2dyZXNzKHJlc3VsdHMpO1xuICAgICAgICAgIGlmKHJlc29sdmVDb3VudCA9PT0gbGVuZ3RoKSByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICB9KS5jYXRjaChyZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgc3RhdGljIHNlcXVlbmNlKGlucHV0cywgaGFuZGxlcikge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dHMubGVuZ3RoO1xuICAgIGxldCByZXNvbHZlQ291bnQgPSAwO1xuICAgIHJldHVybiBuZXcgUHJvZ3Jlc3NQcm9taXNlKChyZXNvbHZlLCByZWplY3QsIHByb2dyZXNzKSA9PiB7XG4gICAgICBmdW5jdGlvbiBpbnZva2VOZXh0KCkge1xuICAgICAgICBoYW5kbGVyLmNhbGwobnVsbCwgaW5wdXRzW3Jlc3VsdHMubGVuZ3RoXSlcbiAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICByZXN1bHRzLnByb3BvcnRpb24gPSArK3Jlc29sdmVDb3VudCAvIGxlbmd0aDtcbiAgICAgICAgICAgIHByb2dyZXNzKHJlc3VsdHMpO1xuICAgICAgICAgICAgaWYocmVzdWx0cy5sZW5ndGggPT09IGxlbmd0aCkgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgIGVsc2UgaW52b2tlTmV4dCgpO1xuICAgICAgICAgIH0pLmNhdGNoKHJlamVjdCk7O1xuICAgICAgfVxuICAgICAgaW52b2tlTmV4dCgpO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvZ3Jlc3NQcm9taXNlO1xuXG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcblxudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy94aHInKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMvaHR0cCcpO1xuICB9XG4gIHJldHVybiBhZGFwdGVyO1xufVxuXG52YXIgZGVmYXVsdHMgPSB7XG4gIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cbiAgdHJhbnNmb3JtUmVxdWVzdDogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlcXVlc3QoZGF0YSwgaGVhZGVycykge1xuICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNTdHJlYW0oZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcpO1xuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICB9IGNhdGNoIChlKSB7IC8qIElnbm9yZSAqLyB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICAvKipcbiAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG4gICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG4gICAqL1xuICB0aW1lb3V0OiAwLFxuXG4gIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsXG4gIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblxuICBtYXhDb250ZW50TGVuZ3RoOiAtMSxcblxuICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG4gICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwO1xuICB9XG59O1xuXG5kZWZhdWx0cy5oZWFkZXJzID0ge1xuICBjb21tb246IHtcbiAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKidcbiAgfVxufTtcblxudXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcbn0pO1xuXG51dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB1dGlscy5tZXJnZShERUZBVUxUX0NPTlRFTlRfVFlQRSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBkZWZhdWx0cztcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcCgpIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgfTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuL2VuaGFuY2VFcnJvcicpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59XG5cbkNhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG59O1xuXG5DYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvYXhpb3MnKTsiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBBeGlvcyA9IHJlcXVpcmUoJy4vY29yZS9BeGlvcycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG52YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuYXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gIHJldHVybiBjcmVhdGVJbnN0YW5jZSh1dGlscy5tZXJnZShkZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcbn07XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7XG5heGlvcy5DYW5jZWxUb2tlbiA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbFRva2VuJyk7XG5heGlvcy5pc0NhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL2lzQ2FuY2VsJyk7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuIiwiLyohXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIGEgQnVmZmVyXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuXG4vLyBUaGUgX2lzQnVmZmVyIGNoZWNrIGlzIGZvciBTYWZhcmkgNS03IHN1cHBvcnQsIGJlY2F1c2UgaXQncyBtaXNzaW5nXG4vLyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLiBSZW1vdmUgdGhpcyBldmVudHVhbGx5XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPSBudWxsICYmIChpc0J1ZmZlcihvYmopIHx8IGlzU2xvd0J1ZmZlcihvYmopIHx8ICEhb2JqLl9pc0J1ZmZlcilcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIgKG9iaikge1xuICByZXR1cm4gISFvYmouY29uc3RydWN0b3IgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKVxufVxuXG4vLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LlxuZnVuY3Rpb24gaXNTbG93QnVmZmVyIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmoucmVhZEZsb2F0TEUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0J1ZmZlcihvYmouc2xpY2UoMCwgMCkpXG59XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vLi4vZGVmYXVsdHMnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSB1dGlscy5tZXJnZSh7XG4gICAgICB1cmw6IGFyZ3VtZW50c1swXVxuICAgIH0sIGFyZ3VtZW50c1sxXSk7XG4gIH1cblxuICBjb25maWcgPSB1dGlscy5tZXJnZShkZWZhdWx0cywge21ldGhvZDogJ2dldCd9LCB0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICBjb25maWcubWV0aG9kID0gY29uZmlnLm1ldGhvZC50b0xvd2VyQ2FzZSgpO1xuXG4gIC8vIEhvb2sgdXAgaW50ZXJjZXB0b3JzIG1pZGRsZXdhcmVcbiAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcbiAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcblxuICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIHB1c2hSZXNwb25zZUludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHdoaWxlIChjaGFpbi5sZW5ndGgpIHtcbiAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmxcbiAgICB9KSk7XG4gIH07XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGRhdGEsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YTogZGF0YVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEF4aW9zO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHtcbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuICAgIH1cbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuL2NyZWF0ZUVycm9yJyk7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcbiAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICAvLyBOb3RlOiBzdGF0dXMgaXMgbm90IGV4cG9zZWQgYnkgWERvbWFpblJlcXVlc3RcbiAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgbnVsbCxcbiAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG4gICAgICByZXNwb25zZVxuICAgICkpO1xuICB9XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgaWYgKGNvZGUpIHtcbiAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgfVxuICBlcnJvci5yZXF1ZXN0ID0gcmVxdWVzdDtcbiAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgcmV0dXJuIGVycm9yO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cbiAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG4gICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIGlmICghcGFyYW1zKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHZhciBzZXJpYWxpemVkUGFyYW1zO1xuICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7XG4gIH0gZWxzZSBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgIHV0aWxzLmZvckVhY2gocGFyYW1zLCBmdW5jdGlvbiBzZXJpYWxpemUodmFsLCBrZXkpIHtcbiAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIGtleSA9IGtleSArICdbXSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgIH1cblxuICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG4gICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLy8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbnZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGtleTtcbiAgdmFyIHZhbDtcbiAgdmFyIGk7XG5cbiAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblxuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3RcbiAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG4gIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgdmFyIG1zaWUgPSAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICB2YXIgb3JpZ2luVVJMO1xuXG4gICAgLyoqXG4gICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHNcbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkXG4gICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICovXG4gICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgIHZhciBocmVmID0gdXJsO1xuXG4gICAgICBpZiAobXNpZSkge1xuICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgIH1cblxuICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG4gICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6XG4gICAgICAgICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgIC8qKlxuICAgICogRGV0ZXJtaW5lIGlmIGEgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4gYXMgdGhlIGN1cnJlbnQgbG9jYXRpb25cbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdFVSTCBUaGUgVVJMIHRvIHRlc3RcbiAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luLCBvdGhlcndpc2UgZmFsc2VcbiAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcbiAgICAgIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VUkwucHJvdG9jb2wgJiZcbiAgICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdCk7XG4gICAgfTtcbiAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfSkoKVxuKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gYnRvYSBwb2x5ZmlsbCBmb3IgSUU8MTAgY291cnRlc3kgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkY2hhbWJlcnMvQmFzZTY0LmpzXG5cbnZhciBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSc7XG5cbmZ1bmN0aW9uIEUoKSB7XG4gIHRoaXMubWVzc2FnZSA9ICdTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXInO1xufVxuRS5wcm90b3R5cGUgPSBuZXcgRXJyb3I7XG5FLnByb3RvdHlwZS5jb2RlID0gNTtcbkUucHJvdG90eXBlLm5hbWUgPSAnSW52YWxpZENoYXJhY3RlckVycm9yJztcblxuZnVuY3Rpb24gYnRvYShpbnB1dCkge1xuICB2YXIgc3RyID0gU3RyaW5nKGlucHV0KTtcbiAgdmFyIG91dHB1dCA9ICcnO1xuICBmb3IgKFxuICAgIC8vIGluaXRpYWxpemUgcmVzdWx0IGFuZCBjb3VudGVyXG4gICAgdmFyIGJsb2NrLCBjaGFyQ29kZSwgaWR4ID0gMCwgbWFwID0gY2hhcnM7XG4gICAgLy8gaWYgdGhlIG5leHQgc3RyIGluZGV4IGRvZXMgbm90IGV4aXN0OlxuICAgIC8vICAgY2hhbmdlIHRoZSBtYXBwaW5nIHRhYmxlIHRvIFwiPVwiXG4gICAgLy8gICBjaGVjayBpZiBkIGhhcyBubyBmcmFjdGlvbmFsIGRpZ2l0c1xuICAgIHN0ci5jaGFyQXQoaWR4IHwgMCkgfHwgKG1hcCA9ICc9JywgaWR4ICUgMSk7XG4gICAgLy8gXCI4IC0gaWR4ICUgMSAqIDhcIiBnZW5lcmF0ZXMgdGhlIHNlcXVlbmNlIDIsIDQsIDYsIDhcbiAgICBvdXRwdXQgKz0gbWFwLmNoYXJBdCg2MyAmIGJsb2NrID4+IDggLSBpZHggJSAxICogOClcbiAgKSB7XG4gICAgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpZHggKz0gMyAvIDQpO1xuICAgIGlmIChjaGFyQ29kZSA+IDB4RkYpIHtcbiAgICAgIHRocm93IG5ldyBFKCk7XG4gICAgfVxuICAgIGJsb2NrID0gYmxvY2sgPDwgOCB8IGNoYXJDb2RlO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnRvYTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG4gIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcbiAgICAgICAgdmFyIGNvb2tpZSA9IFtdO1xuICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzTnVtYmVyKGV4cGlyZXMpKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnZG9tYWluPScgKyBkb21haW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlY3VyZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuICAgICAgfSxcblxuICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG4gICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG4gICAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgICB9LFxuXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiB7XG4gICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoKSB7fSxcbiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7IHJldHVybiBudWxsOyB9LFxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuICAgIH07XG4gIH0pKClcbik7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgdHJhbnNmb3JtRGF0YSA9IHJlcXVpcmUoJy4vdHJhbnNmb3JtRGF0YScpO1xudmFyIGlzQ2FuY2VsID0gcmVxdWlyZSgnLi4vY2FuY2VsL2lzQ2FuY2VsJyk7XG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLi9kZWZhdWx0cycpO1xudmFyIGlzQWJzb2x1dGVVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTCcpO1xudmFyIGNvbWJpbmVVUkxzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2NvbWJpbmVVUkxzJyk7XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcbiAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuICAgIGNvbmZpZy5jYW5jZWxUb2tlbi50aHJvd0lmUmVxdWVzdGVkKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgLy8gU3VwcG9ydCBiYXNlVVJMIGNvbmZpZ1xuICBpZiAoY29uZmlnLmJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwoY29uZmlnLnVybCkpIHtcbiAgICBjb25maWcudXJsID0gY29tYmluZVVSTHMoY29uZmlnLmJhc2VVUkwsIGNvbmZpZy51cmwpO1xuICB9XG5cbiAgLy8gRW5zdXJlIGhlYWRlcnMgZXhpc3RcbiAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcblxuICAvLyBUcmFuc2Zvcm0gcmVxdWVzdCBkYXRhXG4gIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICBjb25maWcuZGF0YSxcbiAgICBjb25maWcuaGVhZGVycyxcbiAgICBjb25maWcudHJhbnNmb3JtUmVxdWVzdFxuICApO1xuXG4gIC8vIEZsYXR0ZW4gaGVhZGVyc1xuICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKFxuICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vbiB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSxcbiAgICBjb25maWcuaGVhZGVycyB8fCB7fVxuICApO1xuXG4gIHV0aWxzLmZvckVhY2goXG4gICAgWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAncG9zdCcsICdwdXQnLCAncGF0Y2gnLCAnY29tbW9uJ10sXG4gICAgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7XG4gICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTtcbiAgICB9XG4gICk7XG5cbiAgdmFyIGFkYXB0ZXIgPSBjb25maWcuYWRhcHRlciB8fCBkZWZhdWx0cy5hZGFwdGVyO1xuXG4gIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG4gICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICByZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgIHJlc3BvbnNlLmRhdGEsXG4gICAgICByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgICAgaWYgKHJlYXNvbiAmJiByZWFzb24ucmVzcG9uc2UpIHtcbiAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZWFzb24pO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgVVJMIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0Fic29sdXRlVVJMKHVybCkge1xuICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG4gIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuICAvLyBieSBhbnkgY29tYmluYXRpb24gb2YgbGV0dGVycywgZGlnaXRzLCBwbHVzLCBwZXJpb2QsIG9yIGh5cGhlbi5cbiAgcmV0dXJuIC9eKFthLXpdW2EtelxcZFxcK1xcLVxcLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4vQ2FuY2VsJyk7XG5cbi8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHtcbiAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcbiAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG4gIGlmICh0aGlzLnJlYXNvbikge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBuZXcgYENhbmNlbFRva2VuYCBhbmQgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCxcbiAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG4gKi9cbkNhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHtcbiAgdmFyIGNhbmNlbDtcbiAgdmFyIHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHtcbiAgICBjYW5jZWwgPSBjO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICB0b2tlbjogdG9rZW4sXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsVG9rZW47XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcbiAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTtcbiAgfTtcbn07XG4iLCIvKipcbiAqIFRoaXMgaXMgdGhlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm9jZXNzb3JcbiAqL1xuZXhwb3J0IGNsYXNzIFByb2Nlc3Mge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIHByb2Nlc3NvclxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucG9zdFByb2Nlc3NvcnMgPSBbXTtcbiAgICB0aGlzLmRlcGVuZGVuY2llcyA9IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiBwcm9jZXNzb3IgaGFzIGRlcGVuZGVuY2llc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBCb29sZWFuIHZhbHVlIG9mIHRoZSByZXN1bHRcbiAgICovXG4gIGhhc0RlcGVuZGVuY2llcygpIHtcbiAgICByZXR1cm4gdGhpcy5kZXBlbmRlbmNpZXMubGVuZ3RoID4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGRlcGVuZGVuY3kgdG8gdGhlIHByb2Nlc3NvclxuICAgKiBAcGFyYW0ge0RlcGVuZGVuY3l9IGRlcGVuZGVuY3kgLSBUaGVcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGFkZFByZVByb2Nlc3NcbiAgICogQHJldHVybnMge1Byb2Nlc3N9XG4gICAqL1xuICBwcmVQcm9jZXNzKGRlcGVuZGVuY3kpIHtcbiAgICB0aGlzLmRlcGVuZGVuY2llcy5wdXNoKGRlcGVuZGVuY3kpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgZGVwZW5kZW5jeSB0byB0aGUgcHJvY2Vzc29yXG4gICAqIEBwYXJhbSB7RGVwZW5kZW5jeX0gZGVwZW5kZW5jeVxuICAgKiBAcmV0dXJucyB7UHJvY2Vzc31cbiAgICovXG4gIGFkZFByZVByb2Nlc3MoZGVwZW5kZW5jeSkge1xuICAgIHRoaXMuZGVwZW5kZW5jaWVzLnB1c2goZGVwZW5kZW5jeSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBjYWxsYmFjayBwcm9jZXNzIHRoZSBvdXRwdXQgcHJvY2Vzc1xuICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGFkZFBvc3RQcm9jZXNzXG4gICAqIEByZXR1cm5zIHtQcm9jZXNzfVxuICAgKi9cbiAgcG9zdFByb2Nlc3MoY2FsbGJhY2spIHtcbiAgICB0aGlzLnBvc3RQcm9jZXNzb3JzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgY2FsbGJhY2sgcHJvY2VzcyB0aGUgb3V0cHV0IHByb2Nlc3NcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqIEByZXR1cm5zIHtQcm9jZXNzfVxuICAgKi9cbiAgYWRkUG9zdFByb2Nlc3MoY2FsbGJhY2spIHtcbiAgICB0aGlzLnBvc3RQcm9jZXNzb3JzLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHByZSBwcm9jZXNzXG4gICAqIEByZXR1cm5zIHtQcm9jZXNzfVxuICAgKi9cbiAgcGVyZm9ybVByZVByb2Nlc3MoKSB7XG4gICAgdGhpcy5kZXBlbmRlbmNpZXMuZm9yRWFjaChkZXBlbmRlbmN5ID0+IHtcbiAgICAgIGRlcGVuZGVuY3kucHJvY2Vzc0NhbGxiYWNrKGRlcGVuZGVuY3kucHJvY2Vzcy5fcmVzdWx0cywgdGhpcyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgcG9zdCBwcm9jZXNzIGFmdGVyIHRoZSBwcm9jZXNzIGhhcyBlbmRlZFxuICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgcGVyZm9ybVBvc3RQcm9jZXNzKGRhdGEpIHtcbiAgICB0aGlzLl9yZXN1bHRzID0gZGF0YTtcbiAgICBsZXQgZGF0YVRvUHJvY2VzcyA9IGRhdGE7XG5cbiAgICB0aGlzLnBvc3RQcm9jZXNzb3JzLmZvckVhY2goY2FsbGJhY2sgPT4ge1xuICAgICAgZGF0YVRvUHJvY2VzcyA9IGNhbGxiYWNrKGRhdGFUb1Byb2Nlc3MpO1xuICAgIH0pO1xuICAgIHJldHVybiBkYXRhVG9Qcm9jZXNzO1xuICB9XG59XG4iLCJpbXBvcnQgeyBSdW5uZXIgfSBmcm9tICcuL3J1bm5lcic7XG5pbXBvcnQgeyBQcm9jZXNzIH0gZnJvbSAnLi9wcm9jZXNzJztcbmltcG9ydCBQcm9ncmVzc1Byb21pc2UgZnJvbSAncHJvZ3Jlc3MtcHJvbWlzZSc7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZmV0Y2hlciBwcm9jZXNzXG4gKkBleHRlbmRzIFByb2Nlc3NcbiAqL1xuZXhwb3J0IGNsYXNzIEZldGNoZXIgZXh0ZW5kcyBQcm9jZXNzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmZXRoY2VyXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBVUkwgUGFyYW1ldGVyc1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0IF91cmxQYXJhbWV0ZXJzKCkge1xuICAgIGxldCB1cmwgPSAnJztcblxuICAgIE9iamVjdC5rZXlzKHRoaXMucGFyYW1ldGVycykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKHVybCAhPT0gJycpIHtcbiAgICAgICAgdXJsICs9ICcmJztcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJhbWV0ZXJzW2tleV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHVybCArPSBrZXkgKyAnPScgKyB0aGlzLnBhcmFtZXRlcnNba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMucGFyYW1ldGVyc1trZXldKS5mb3JFYWNoKGtleTIgPT4ge1xuICAgICAgICAgIGlmICh1cmwgIT09ICcnKSB7XG4gICAgICAgICAgICB1cmwgKz0gJyYnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5wYXJhbWV0ZXJzW2tleV1ba2V5Ml0gPT09ICcnKSB7XG4gICAgICAgICAgICB1cmwgKz0ga2V5ICsgJz0nICsga2V5MjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXJsICs9IGtleSArICc9JyArIGtleTIgKyAnOicgKyB0aGlzLnBhcmFtZXRlcnNba2V5XVtrZXkyXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdXJsXG4gICAqIEB0aHJvd3MgSW1wbGVtZW50YXRpb24gRXJyb3JcbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgaW1wbGVtZW50IHVybCBnZW5lcmF0aW9uJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcnVubmluZyBwcm9jZXNzIHN0YXJ0ZWRcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX1cbiAgICovXG4gIGdldCgpIHtcbiAgICByZXR1cm4gbmV3IFJ1bm5lcigpLmdldFJlc3VsdHModGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHBhcmVtZXRlcnNcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtZXRlcnMgLSBUaGUgcGFyYW1ldGVycyB0byBiZSBwYXNzZWQgdG8gdGhlIHVybFxuICAgKiBAcmV0dXJucyB7RmV0Y2hlcn0gLSBPYmplY3Qgb2YgdGhlIGZldGNoZXJcbiAgICovXG4gIHNldFBhcmFtZXRlcnMocGFyYW1ldGVycykge1xuICAgIE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIHRoaXMucGFyYW1ldGVyc1trZXldID0gcGFyYW1ldGVyc1trZXldO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBEZXBlbmRlbmN5IHJlc3VsdHNcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX1cbiAgICovXG4gIGdldERlcGVuZGVjeUZldGNoUmVzdWx0cygpIHtcbiAgICBjb25zdCBwcm9taXNlcyA9IHRoaXMuZGVwZW5kZW5jaWVzLm1hcChkZXBlbmRlbmN5ID0+IHtcbiAgICAgIHJldHVybiBuZXcgUnVubmVyKCkuZ2V0UmVzdWx0cyhkZXBlbmRlbmN5LnByb2Nlc3MpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFByb2dyZXNzUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICB9XG4gIF9lbmNvZGU2NChidWZmKSB7XG4gICAgcmV0dXJuIGJ0b2EobmV3IFVpbnQ4QXJyYXkoYnVmZikucmVkdWNlKChzLCBiKSA9PiBzICsgU3RyaW5nLmZyb21DaGFyQ29kZShiKSwgJycpKTtcbiAgfVxuICBoYXNoKCkge1xuICAgIHJldHVybiB0aGlzLnVybDtcbiAgfVxufVxuIiwiLyoqXG4gKiBUaGlzIHJlcHJlc2VudHMgdGhlIEFuYWx5dGljcyBSZXN1bHRzXG4gKlxuICovXG5leHBvcnQgY2xhc3MgUm93IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5hIEFuYWx5dGljcyBPYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gcm93IC0gVGhlIGFuYWx5dGljcyByb3dcbiAgICogQHBhcmFtIHtBcnJheX0gaGVhZGVycyAtIFRoZSBhbmFseXRpY3MgaGVhZGVyc1xuICAgKiBAcGFyYW0ge09iamVjdH0gbWV0YURhdGEgLSBUaGUgYW5hbHl0aWNzIG1ldGFkYXRhXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb3csIGhlYWRlcnMsIG1ldGFEYXRhKSB7XG4gICAgdGhpcy5yb3cgPSByb3c7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICB0aGlzLm1ldGFEYXRhID0gbWV0YURhdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGltZW5zaW9uIGRldGFpbHMgb2YgdGhlIGFuYWx5dGljcyByb3dcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIGlkIG9mIHRoZSBkaW1lbnNpb25cbiAgICogQHJldHVybnMge09iamVjdHx7aWQsbmFtZSxwYXRofX0gLSBUaGUgZGF0YSBvYmplY3Qgd2l0aCBuYW1lIGFuZCBpZFxuICAgKi9cbiAgZGltZW5zaW9uKGlkKSB7XG4gICAgdmFyIGkgPSAtMSxcbiAgICAgIG5hbWUgPSAnJztcblxuICAgIHRoaXMuaGVhZGVycy5mb3JFYWNoKChoZWFkZXIsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoaGVhZGVyLm5hbWUgPT09IGlkKSB7XG4gICAgICAgIGkgPSBpbmRleDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodGhpcy5tZXRhRGF0YS5uYW1lcykge1xuICAgICAgbmFtZSA9IHRoaXMubWV0YURhdGEubmFtZXNbdGhpcy5yb3dbaV1dO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tZXRhRGF0YS5pdGVtcykge1xuICAgICAgbmFtZSA9IHRoaXMubWV0YURhdGEuaXRlbXNbdGhpcy5yb3dbaV1dID8gdGhpcy5tZXRhRGF0YS5pdGVtc1t0aGlzLnJvd1tpXV0ubmFtZSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB0aGlzLnJvd1tpXSxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOlxuICAgICAgICB0aGlzLm1ldGFEYXRhLm91SGllcmFyY2h5ICYmXG4gICAgICAgIHRoaXMubWV0YURhdGEub3VIaWVyYXJjaHlbdGhpcy5yb3dbaV1dICE9PSB1bmRlZmluZWQgPyB0aGlzLm1ldGFEYXRhLm91SGllcmFyY2h5W3RoaXMucm93W2ldXSA6IHVuZGVmaW5lZFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGF0YSBkZXRhaWxzIG9mIHRoZSBhbmFseXRpY3Mgcm93XG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R8e2lkLG5hbWV9fSAtIFRoZSBkYXRhIG9iamVjdCB3aXRoIG5hbWUgYW5kIGlkXG4gICAqL1xuICBnZXQgZHgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uKCdkeCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHBlcmlvZCBkZXRhaWxzIG9mIHRoZSBhbmFseXRpY3Mgcm93XG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R8e2lkLG5hbWV9fSAtIFRoZSBwZXJpb2Qgb2JqZWN0XG4gICAqL1xuICBnZXQgcGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uKCdwZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG9yZ2FuaXNhdGlvbiB1bml0IGRldGFpbHMgb2YgdGhlIGFuYWx5dGljcyByb3dcbiAgICpcbiAgICogQHJldHVybnMge09iamVjdHx7aWQsbmFtZSxwYXRofX0gLSBUaGUgb3JnYW5pc2F0aW9uIHVuaXQgb2JqZWN0XG4gICAqL1xuICBnZXQgb3UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uKCdvdScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZhbHVlIGluIGEgcm93XG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVGhlIHZhbHVlXG4gICAqL1xuICBnZXQgdmFsdWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltZW5zaW9uKCd2YWx1ZScpLmlkO1xuICB9XG59XG4iLCJpbXBvcnQge1Jvd30gZnJvbSAnLi9yb3cnO1xuXG4vKipcbiAqIFRoaXMgcmVwcmVzZW50cyB0aGUgQW5hbHl0aWNzIGhlYWRlclxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEFuYWx5dGljc0hlYWRlciB7fVxuLyoqXG4gKiBUaGlzIHJlcHJlc2VudHMgdGhlIEFuYWx5dGljcyBIZWFkZXJzXG4gKlxuICogQGV4dGVuZHMgQXJyYXlcbiAqL1xuZXhwb3J0IGNsYXNzIEFuYWx5dGljc0hlYWRlcnMgZXh0ZW5kcyBBcnJheSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICBzdXBlciguLi5kYXRhKTtcbiAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgT2JqZWN0LmNyZWF0ZShBbmFseXRpY3NIZWFkZXJzLnByb3RvdHlwZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRhdGEgYW5hbHl0aWNzIGhlYWRlclxuICAgKlxuICAgKiBAcmV0dXJucyB7QW5hbHl0aWNzSGVhZGVyfVxuICAgKi9cbiAgZ2V0IGR4KCkge1xuICAgIHJldHVybiB0aGlzLmdldEhlYWRlcignZHgnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwZXJpb2QgYW5hbHl0aWNzIGhlYWRlclxuICAgKlxuICAgKiBAcmV0dXJucyB7QW5hbHl0aWNzSGVhZGVyfVxuICAgKi9cbiAgZ2V0IHBlKCkge1xuICAgIHJldHVybiB0aGlzLmdldEhlYWRlcigncGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBvcmdhbmlzYXRpb24gdW5pdCBhbmFseXRpY3MgaGVhZGVyXG4gICAqXG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3NIZWFkZXJ9XG4gICAqL1xuICBnZXQgb3UoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SGVhZGVyKCdvdScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZhbHVlIGFuYWx5dGljcyBoZWFkZXJcbiAgICpcbiAgICogQHJldHVybnMge0FuYWx5dGljc0hlYWRlcn1cbiAgICovXG4gIGdldCB2YWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRIZWFkZXIoJ3ZhbHVlJyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaGVhZGVyIG9mIGEgcGFyYW1ldGVyXG4gICAqIEBwYXJhbSBpZFxuICAgKiBAcmV0dXJucyB7QW5hbHl0aWNzSGVhZGVyfVxuICAgKi9cbiAgZ2V0SGVhZGVyKGlkKSB7XG4gICAgbGV0IHJldHVybkhlYWRlcjtcblxuICAgIHRoaXMuZm9yRWFjaCgoaGVhZGVyLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGhlYWRlci5uYW1lID09PSBpZCkge1xuICAgICAgICByZXR1cm5IZWFkZXIgPSBoZWFkZXI7XG4gICAgICAgIHJldHVybkhlYWRlci5pbmRleCA9IGluZGV4O1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXR1cm5IZWFkZXI7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHJlcHJlc2VudHMgdGhlIEFuYWx5dGljcyBSZXN1bHRzXG4gKlxuICovXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzUmVzdWx0IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5hIEFuYWx5dGljcyBPYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IC0gREhJUyBBbmFseXRpY3Mgb2JqZWN0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbmFseXRpY3NPYmplY3QpIHtcbiAgICB0aGlzLl9kYXRhID0gYW5hbHl0aWNzT2JqZWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIEFuYWx5dGljcyBIZWFkZXJzIEFycmF5XG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheX0gLSBESElTIEFuYWx5dGljcyBoZWFkZXJzXG4gICAqL1xuICAvKlxuICBnZXQgaGVhZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5oZWFkZXJzO1xuICB9XG4gICovXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIEFuYWx5dGljcyBIZWFkZXJzIEFycmF5XG4gICAqXG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3NIZWFkZXJzfVxuICAgKi9cbiAgZ2V0IGhlYWRlcnMoKSB7XG4gICAgcmV0dXJuIG5ldyBBbmFseXRpY3NIZWFkZXJzKHRoaXMuX2RhdGEuaGVhZGVycyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgQW5hbHl0aWNzIE1ldGFkYXRhIE9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJucyB7KnxtZXRhRGF0YXx7ZGltZW5zaW9ucywgbmFtZXMsIGR4LCBwZSwgb3UsIGNvfXx7b3VIaWVyYXJjaHksIGl0ZW1zLCBkaW1lbnNpb25zfX1cbiAgICovXG4gIGdldCBtZXRhRGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5tZXRhRGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByb3dzIG9mIHRoZSBhbmFseXRpY3Mgb2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICovXG4gIGdldCByb3dzKCkge1xuICAgIGxldCByb3dzID0gW107XG5cbiAgICB0aGlzLl9kYXRhLnJvd3MuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICByb3dzLnB1c2gobmV3IFJvdyhyb3csIHRoaXMuaGVhZGVycywgdGhpcy5tZXRhRGF0YSkpO1xuICAgIH0pO1xuICAgIHJldHVybiByb3dzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRpbWVuc2lvbiBkZXRhaWxzIGJ5IG5hbWUgb2YgdGhlIGRpbWVuc2lvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICpcbiAgICogQHJldHVybnMge09iamVjdHx7aWQsbmFtZSwhcGF0aH19XG4gICAqL1xuICBnZXREaW1lbnNpb25EZXRhaWxzQnlOYW1lKG5hbWUpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgaWYgKHRoaXMubWV0YURhdGEuZGltZW5zaW9ucykge1xuICAgICAgdGhpcy5tZXRhRGF0YS5kaW1lbnNpb25zW25hbWVdLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHRoaXMuZ2V0RGltZW5zaW9uRGV0YWlscyhpdGVtKSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgb3Ugb2YgdGhlIGFuYWx5dGljcyBvYmplY3RcbiAgICpcbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKi9cbiAgZ2V0IHJvd3MoKSB7XG4gICAgbGV0IHJvd3MgPSBbXTtcblxuICAgIHRoaXMuX2RhdGEucm93cy5mb3JFYWNoKChyb3cpID0+IHtcbiAgICAgIHJvd3MucHVzaChuZXcgUm93KHJvdywgdGhpcy5oZWFkZXJzLCB0aGlzLm1ldGFEYXRhKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJvd3M7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGltZW5zaW9uIGRldGFpbHMgb2YgYSBnaXZlbiBpZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAgICpcbiAgICogQHJldHVybnMge09iamVjdHx7aWQsbmFtZSwhcGF0aH19XG4gICAqL1xuICBnZXREaW1lbnNpb25EZXRhaWxzKGlkKSB7XG4gICAgdmFyIG5hbWUgPSAnJztcblxuICAgIGlmICh0aGlzLm1ldGFEYXRhLm5hbWVzKSB7XG4gICAgICBuYW1lID0gdGhpcy5tZXRhRGF0YS5uYW1lc1tpZF07XG4gICAgfSBlbHNlIGlmICh0aGlzLm1ldGFEYXRhLml0ZW1zKSB7XG4gICAgICBuYW1lID0gdGhpcy5tZXRhRGF0YS5pdGVtc1tpZF0gPyB0aGlzLm1ldGFEYXRhLml0ZW1zW2lkXS5uYW1lIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGlkLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHBhdGg6XG4gICAgICAgIHRoaXMubWV0YURhdGEub3VIaWVyYXJjaHkgJiZcbiAgICAgICAgICB0aGlzLm1ldGFEYXRhLm91SGllcmFyY2h5W2lkXSAhPT0gdW5kZWZpbmVkID8gdGhpcy5tZXRhRGF0YS5vdUhpZXJhcmNoeVtpZF0gOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSBBbmFseXRpY3MgaGVpZ2h0XG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gVGhlIG51bWJlciBvZiByb3dzXG4gICAqL1xuICBnZXQgaGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl9kYXRhLmhlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBBbmFseXRpY3Mgd2lkdGhcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldCB3aWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS53aWR0aDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRmV0Y2hlciB9IGZyb20gJy4uL3V0aWxpdGllcy9mZXRjaGVyJztcbmltcG9ydCB7IEFuYWx5dGljc1Jlc3VsdCB9IGZyb20gJy4uL3Jlc3VsdC9hbmFseXRpY3MtcmVzdWx0Jztcbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKiBUaGlzIHJlcHJlc2VudHMgdGhlIEFuYWx5dGljcyBGZXRjaGVyIGZvciBwcm9jZXNzaW5nIGZvciBtYWtpbmcgV2ViIEFQSSBjYWxsc1xuICogQGV4YW1wbGVcbiAqIGNvbnN0IGFuYWx5dGljcyA9IEZuLkFuYWx5dGljcygpO1xuICogQGV4dGVuZHMgRmV0Y2hlclxuICovXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzIGV4dGVuZHMgRmV0Y2hlciB7XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogQ3JlYXRlcyBhbiBhbmFseXRpY3MgZmV0aGNlclxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gdmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIGRoaXMgYW5hbHl0aWNzIHN0cnVjdHVyZSB0byB1c2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHZlcnNpb24gPSAyNSkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKHR5cGVvZiB2ZXJzaW9uID09PSAnYm9vbGVhbicpIHtcbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIHZlcnNpb24gPSAyNTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZlcnNpb24gPSAyNjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5wYXJhbWV0ZXJzWydkaW1lbnNpb24nXSA9IHt9O1xuICAgIHRoaXMucG9zdFByb2Nlc3MoZGF0YSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5zdGFuZGFyZGl6ZUFuYWx5dGljcyhkYXRhLCB2ZXJzaW9uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkYXRhIGZvciB0aGUgZmV0Y2hcbiAgICogQHBhcmFtIHtzdHJpbmd9IGR4IFRoZSBpZCBvZiB0aGUgZGF0YSB0byBnZXRcbiAgICogQHJldHVybnMge0FuYWx5dGljc30gLSBPYmplY3Qgd2l0aCB0aGUgYW5hbHl0aWNzIGludGVyYWN0aW9uIHByb3BlcnRpZXNcbiAgICovXG4gIHNldERhdGEoZHgpIHtcbiAgICB0aGlzLnNldERpbWVuc2lvbignZHgnLCBkeCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcGVyaW9kIGZvciB0aGUgZmV0Y2hcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBlIFRoZSBpZCBvZiB0aGUgcGVyaW9kIHRvIGdldCBkYXRhIGZyb21cbiAgICogQHJldHVybnMge0FuYWx5dGljc30gT2JqZWN0IHdpdGggdGhlIGFuYWx5dGljcyBpbnRlcmFjdGlvbiBwcm9wZXJ0aWVzXG4gICAqL1xuICBzZXRQZXJpb2QocGUpIHtcbiAgICB0aGlzLnNldERpbWVuc2lvbigncGUnLCBwZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgb3JnYW5pc2F0aW9uIHVuaXQgZm9yIHRoZSBmZXRjaGluZyBvZiB0aGUgYW5hbHl0aWNzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvdSAtIE9yZ2FuaXNhdGlvbiB1bml0XG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3N9IE9iamVjdCB3aXRoIHRoZSBhbmFseXRpY3MgaW50ZXJhY3Rpb24gcHJvcGVydGllc1xuICAgKi9cbiAgc2V0T3JnVW5pdChvdSkge1xuICAgIHRoaXMuc2V0RGltZW5zaW9uKCdvdScsIG91KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkYXRhLHBlcmlvZCBhbmQgb3JnYW5pc2F0aW9uIHVuaXQgZnJvbSBmdW5jdGlvbiBpbnB1dCBwYXJhbWV0ZXJzIG9iamVjdCBmb3IgdGhlIGZldGNoaW5nIG9mIHRoZSBhbmFseXRpY3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtZXRlcnMgLSBSdWxlIHBhcmFtZXRlcnNcbiAgICogQHJldHVybnMge0FuYWx5dGljc30gT2JqZWN0IHdpdGggdGhlIGFuYWx5dGljcyBpbnRlcmFjdGlvbiBwcm9wZXJ0aWVzXG4gICAqL1xuICBzZXRTZWxlY3Rpb25zKHBhcmFtZXRlcnMpIHtcbiAgICB0aGlzLnNldFBlcmlvZChwYXJhbWV0ZXJzLnBlKTtcbiAgICB0aGlzLnNldE9yZ1VuaXQocGFyYW1ldGVycy5vdSk7XG4gICAgLy8gU2V0IGRhdGEgU2VsZWN0aW9uXG4gICAgaWYgKHBhcmFtZXRlcnMucnVsZS5qc29uLmRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQFRPRE8gYWRkIHN1cHBvcnQgZm9yIG9ubHkgZmV0Y2hpbmcgMTFjaGFyIGxvbmcgdWlkcywgYW5kIGpvaW5pbmcgdGhlbVxuICAgICAgLy8gaW50byBhIGNvbW1hIHNlcGFyYXRlZCBzdHJpbmcsIHNvIGluIGZ1dHVyZSwgcGFyYW1ldGVycy5ydWxlLmpzb24uZGF0YVxuICAgICAgLy8gY291bGQgc2ltcGx5IGJlIGFuIGluZGljYXRvciBleHByZXNzc2lvbiB3aXRoIHVuYXJ5IG9wZXJhdG9ycyBhbmQgamF2YXNjcmlwdFxuICAgICAgLy8gZnVuY3Rpb25zIGluc2lkZSB0byBiZSBleGVjdXRlZCB0aGUgZXhwcmVzcyBwYXJhbWV0ZXJzLnJ1bGUuanNvbi5kYXRhXG4gICAgICB0aGlzLnNldERhdGEocGFyYW1ldGVycy5ydWxlLmpzb24uZGF0YSk7XG4gICAgfVxuICAgIC8vIFNldCBkeW5hbWljIGRpbWVuc2lvblxuICAgIGlmIChwYXJhbWV0ZXJzLmRpbWVuc2lvbnMgIT09IHVuZGVmaW5lZCAmJiBBcnJheS5pc0FycmF5KHBhcmFtZXRlcnMuZGltZW5zaW9ucykpIHtcbiAgICAgIHBhcmFtZXRlcnMuZGltZW5zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkaW1lbnNpb24pIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGltZW5zaW9uLml0ZW1zKSkge1xuICAgICAgICAgIGxldCBkaW1lbnNpb25JdGVtcyA9ICcnO1xuXG4gICAgICAgICAgZGltZW5zaW9uLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGRpbWVuc2lvbkl0ZW1zLmxlbmd0aCA+IDAgPyBkaW1lbnNpb25JdGVtcyArPSAnOycgKyBpdGVtIDogZGltZW5zaW9uSXRlbXMgKz0gaXRlbTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnNldERpbWVuc2lvbihkaW1lbnNpb24uaWQsIGRpbWVuc2lvbkl0ZW1zKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGRpbWVuc2lvbiBmb3IgdGhlIGZldGNoaW5nIG9mIHRoZSBhbmFseXRpY3NcbiAgICogQHBhcmFtIHtzdHJpbmd9IGRpbSAtIER5bmFtaWMgRGltZW5zaW9uIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gRHluYW1pYyBkaW1lbnNpb24gb3B0aW9ucyBpZGVudGlmaWVyc1xuICAgKiBAcmV0dXJucyB7QW5hbHl0aWNzfSBPYmplY3Qgd2l0aCB0aGUgYW5hbHl0aWNzIGludGVyYWN0aW9uIHByb3BlcnRpZXNcbiAgICovXG4gIHNldERpbWVuc2lvbihkaW0sIHZhbHVlKSB7XG4gICAgdGhpcy5wYXJhbWV0ZXJzWydkaW1lbnNpb24nXVtkaW1dID0gdmFsdWUgPyB2YWx1ZSA6ICcnO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YW5kYXJkaXplcyB0aGUgYW5hbHl0aWNzIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5hbHl0aWNzT2JqZWN0IC0gVGhlIGFuYWx5dGljcyBvYmplY3RcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBkaGlzIGFuYWx5dGljcyBzdHJ1Y3R1cmUgdG8gdXNlXG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3NSZXN1bHR9IC0gT2JqZWN0IHdpdGggdGhlIGFuYWx5dGljcyByZXN1bHRzXG4gICAqL1xuICBzdGFuZGFyZGl6ZUFuYWx5dGljcyhhbmFseXRpY3NPYmplY3QsIHZlcnNpb24gPSAyNSkge1xuICAgIGlmICh0eXBlb2YgdmVyc2lvbiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICB2ZXJzaW9uID0gMjU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ZXJzaW9uID0gMjY7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGlmIFNlcnZlcnNpZGUgRXZlbnQgY2x1c3RlcmluZyBkbyBub3RoaW5nXG4gICAgaWYgKGFuYWx5dGljc09iamVjdC5jb3VudCkge1xuICAgICAgcmV0dXJuIGFuYWx5dGljc09iamVjdDtcbiAgICB9XG4gICAgbGV0IHNhbml0aXplZEFuYWx5dGljc09iamVjdCA9IHtcbiAgICAgIGhlYWRlcnM6IFtdLFxuICAgICAgbWV0YURhdGE6IHtcbiAgICAgICAgZGltZW5zaW9uczoge30sXG4gICAgICAgIG5hbWVzOiB7fSxcbiAgICAgICAgZHg6IFtdLFxuICAgICAgICBwZTogW10sXG4gICAgICAgIG91OiBbXSxcbiAgICAgICAgY286IFtdXG4gICAgICB9LFxuICAgICAgcm93czogW11cbiAgICB9O1xuXG4gICAgaWYgKGFuYWx5dGljc09iamVjdCkge1xuICAgICAgLyoqXG4gICAgICAgKiBDaGVjayBoZWFkZXJzXG4gICAgICAgKi9cbiAgICAgIGlmIChhbmFseXRpY3NPYmplY3QuaGVhZGVycykge1xuICAgICAgICBhbmFseXRpY3NPYmplY3QuaGVhZGVycy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBuZXdIZWFkZXIgPSBoZWFkZXI7XG5cbiAgICAgICAgICAgIHNhbml0aXplZEFuYWx5dGljc09iamVjdC5oZWFkZXJzLnB1c2gobmV3SGVhZGVyKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgaGVhZGVyIG9iamVjdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2hlY2sgbWV0YURhdGFcbiAgICAgICAqL1xuICAgICAgaWYgKGFuYWx5dGljc09iamVjdC5tZXRhRGF0YSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxldCBzYW5pdGl6ZWRNZXRhZGF0YSA9IHRoaXMuZ2V0U2FuaXRpemVkQW5hbHl0aWNzTWV0YWRhdGEoXG4gICAgICAgICAgICBhbmFseXRpY3NPYmplY3QubWV0YURhdGEsXG4gICAgICAgICAgICB2ZXJzaW9uXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHNhbml0aXplZEFuYWx5dGljc09iamVjdC5tZXRhRGF0YSA9IHNhbml0aXplZE1ldGFkYXRhO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIG1ldGFkYXRhIG9iamVjdCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2hlY2sgcm93c1xuICAgICAgICovXG4gICAgICBpZiAoYW5hbHl0aWNzT2JqZWN0LnJvd3MpIHtcbiAgICAgICAgc2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0LnJvd3MgPSBhbmFseXRpY3NPYmplY3Qucm93cztcbiAgICAgIH1cbiAgICB9XG4gICAgc2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0LmhlaWdodCA9IGFuYWx5dGljc09iamVjdC5oZWlnaHQ7XG4gICAgc2FuaXRpemVkQW5hbHl0aWNzT2JqZWN0LndpZHRoID0gYW5hbHl0aWNzT2JqZWN0LndpZHRoO1xuICAgIHJldHVybiBuZXcgQW5hbHl0aWNzUmVzdWx0KHNhbml0aXplZEFuYWx5dGljc09iamVjdCk7XG4gIH1cblxuICAvKipcbiAgICogU3RhbmRhcmRpemVzIHRoZSBhbmFseXRpY3MgbWV0YWRhdGEgb2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhbmFseXRpY01ldGFkYXRhIC0gVGhlIGFuYWx5dGljcyBtZXRhZGF0YSBvYmplY3RcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBkaGlzIGFuYWx5dGljcyBzdHJ1Y3R1cmUgdG8gdXNlXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IC0gT2JqZWN0IHdpdGggdGhlIGFuYWx5dGljcyBtZXRhZGF0YVxuICAgKi9cbiAgZ2V0U2FuaXRpemVkQW5hbHl0aWNzTWV0YWRhdGEoYW5hbHl0aWNNZXRhZGF0YSwgdmVyc2lvbikge1xuICAgIGxldCBzYW5pdGl6ZWRNZXRhZGF0YSA9IHt9O1xuXG4gICAgaWYgKGFuYWx5dGljTWV0YWRhdGEpIHtcbiAgICAgIGlmIChhbmFseXRpY01ldGFkYXRhLm91SGllcmFyY2h5KSB7XG4gICAgICAgIHNhbml0aXplZE1ldGFkYXRhLm91SGllcmFyY2h5ID0gYW5hbHl0aWNNZXRhZGF0YS5vdUhpZXJhcmNoeTtcbiAgICAgIH1cbiAgICAgIGlmICh2ZXJzaW9uIDwgMjYpIHtcbiAgICAgICAgLy8gR2V0IG9sZCBzdHJ1Y3R1cmVcbiAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEubmFtZXMgPSB7fTtcbiAgICAgICAgaWYgKGFuYWx5dGljTWV0YWRhdGEubmFtZXMpIHtcbiAgICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5uYW1lcyA9IGFuYWx5dGljTWV0YWRhdGEubmFtZXM7XG4gICAgICAgIH0gZWxzZSBpZiAoYW5hbHl0aWNNZXRhZGF0YS5pdGVtcykge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGFuYWx5dGljTWV0YWRhdGEuaXRlbXMpLmZvckVhY2gobmFtZUtleSA9PiB7XG4gICAgICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5uYW1lc1tuYW1lS2V5XSA9XG4gICAgICAgICAgICAgIGFuYWx5dGljTWV0YWRhdGEuaXRlbXNbbmFtZUtleV0ubmFtZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbmFseXRpY01ldGFkYXRhLmRpbWVuc2lvbnMpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhbmFseXRpY01ldGFkYXRhLmRpbWVuc2lvbnMpLmZvckVhY2gobmFtZUtleSA9PiB7XG4gICAgICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YVtuYW1lS2V5XSA9IGFuYWx5dGljTWV0YWRhdGEuZGltZW5zaW9uc1tuYW1lS2V5XTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gR2V0IG5ldyBzdHJ1Y3R1cmVcbiAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEuaXRlbXMgPSB7fTtcbiAgICAgICAgaWYgKGFuYWx5dGljTWV0YWRhdGEuaXRlbXMpIHtcbiAgICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5pdGVtcyA9IGFuYWx5dGljTWV0YWRhdGEuaXRlbXM7XG4gICAgICAgIH0gZWxzZSBpZiAoYW5hbHl0aWNNZXRhZGF0YS5uYW1lcykge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGFuYWx5dGljTWV0YWRhdGEuaXRlbXMpLmZvckVhY2gobmFtZUtleSA9PiB7XG4gICAgICAgICAgICBhbmFseXRpY01ldGFkYXRhLml0ZW1zW25hbWVLZXldID0ge1xuICAgICAgICAgICAgICBuYW1lOiBhbmFseXRpY01ldGFkYXRhLm5hbWVzW25hbWVLZXldXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFhbmFseXRpY01ldGFkYXRhLmRpbWVuc2lvbnMpIHtcbiAgICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5kaW1lbnNpb25zID0ge307XG4gICAgICAgICAgT2JqZWN0LmtleXMoYW5hbHl0aWNNZXRhZGF0YSkuZm9yRWFjaChuYW1lS2V5ID0+IHtcbiAgICAgICAgICAgIGlmIChbJ25hbWVzJywgJ2l0ZW1zJywgJ2RpbWVuc2lvbnMnXS5pbmRleE9mKG5hbWVLZXkpID09PSAtMSkge1xuICAgICAgICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5kaW1lbnNpb25zW25hbWVLZXldID0gYW5hbHl0aWNNZXRhZGF0YVtuYW1lS2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5kaW1lbnNpb25zID0gYW5hbHl0aWNNZXRhZGF0YS5kaW1lbnNpb25zO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzYW5pdGl6ZWRNZXRhZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1cmwgZm9yIGZldGNoaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiAnYW5hbHl0aWNzPycgKyB0aGlzLl91cmxQYXJhbWV0ZXJzO1xuICB9XG59XG4iLCIvLyBGYWxsYmFjayBmb3IgZW5naW5lcyB0aGF0IGRvbid0IHN1cHBvcnQgU3ltYm9sXG5jb25zdCBMSVNURU5FUlMgPSBTeW1ib2wgPyBTeW1ib2woKSA6ICdfX2xpc3RlbmVycyc7XG5cbi8qKlxuICogUmVwcmVzZW50cyBQcm9ncmVzcyBQcm9taXNlXG4gKiBAZXh0ZW5kcyBQcm9taXNlXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9ncmVzc1Byb21pc2UgZXh0ZW5kcyBQcm9taXNlIHtcbiAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICBzdXBlcigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgZXhlY3V0b3IoXG4gICAgICAgIHJlc29sdmUsXG4gICAgICAgIHJlamVjdCxcbiAgICAgICAgLy8gUGFzcyBtZXRob2QgZm9yIHBhc3NpbmcgcHJvZ3Jlc3MgdG8gbGlzdGVuZXJcbiAgICAgICAgdmFsdWUgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1tMSVNURU5FUlNdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIodmFsdWUpKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG4gICAgdGhpc1tMSVNURU5FUlNdID0gW107XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Y2FsbGJhY2t9IGhhbmRsZXJcbiAgICovXG4gIHByb2dyZXNzKGhhbmRsZXIpIHtcbiAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUFJPR1JFU1NfUkVRVUlSRVNfRlVOQ1RJT04nKTtcbiAgICB9XG4gICAgdGhpc1tMSVNURU5FUlNdLnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gcHJvbWlzZXNcbiAgICovXG4gIHN0YXRpYyBhbGwocHJvbWlzZXMpIHtcbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KHByb21pc2VzLmxlbmd0aCk7XG4gICAgY29uc3QgbGVuZ3RoID0gcHJvbWlzZXMubGVuZ3RoO1xuICAgIGxldCByZXNvbHZlQ291bnQgPSAwO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9ncmVzc1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIHByb21pc2VzLmZvckVhY2goKHByb21pc2UsIGluZGV4KSA9PiB7XG4gICAgICAgIHByb21pc2VcbiAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0gPSByZXN1bHQ7XG4gICAgICAgICAgICByZXN1bHRzLnByb3BvcnRpb24gPSArK3Jlc29sdmVDb3VudCAvIGxlbmd0aDtcbiAgICAgICAgICAgIHByb2dyZXNzKHJlc3VsdHMpO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVDb3VudCA9PT0gbGVuZ3RoKSByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBpbnB1dHNcbiAgICogQHBhcmFtIHsqfSBoYW5kbGVyXG4gICAqL1xuICBzdGF0aWMgc2VxdWVuY2UoaW5wdXRzLCBoYW5kbGVyKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIGNvbnN0IGxlbmd0aCA9IGlucHV0cy5sZW5ndGg7XG4gICAgbGV0IHJlc29sdmVDb3VudCA9IDA7XG5cbiAgICByZXR1cm4gbmV3IFByb2dyZXNzUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0LCBwcm9ncmVzcykgPT4ge1xuICAgICAgZnVuY3Rpb24gaW52b2tlTmV4dCgpIHtcbiAgICAgICAgaGFuZGxlclxuICAgICAgICAgIC5jYWxsKG51bGwsIGlucHV0c1tyZXN1bHRzLmxlbmd0aF0pXG4gICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgcmVzdWx0cy5wcm9wb3J0aW9uID0gKytyZXNvbHZlQ291bnQgLyBsZW5ndGg7XG4gICAgICAgICAgICBwcm9ncmVzcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gbGVuZ3RoKSByZXNvbHZlKHJlc3VsdHMpO1xuICAgICAgICAgICAgZWxzZSBpbnZva2VOZXh0KCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICAgIH1cbiAgICAgIGludm9rZU5leHQoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUnVubmVyIH0gZnJvbSAnLi9ydW5uZXInO1xuaW1wb3J0IHsgRmV0Y2hlciB9IGZyb20gJy4vZmV0Y2hlcic7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgbXVsdGlwbGUgZmV0Y2hlciBwcm9jZXNzXG4gKkBleHRlbmRzIEZldGNoZXJcbiAqL1xuZXhwb3J0IGNsYXNzIE11bHRpRmV0Y2hlciBleHRlbmRzIEZldGNoZXIge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZmV0aGNlclxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKGZldGNoZXJzKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9mZXRjaGVycyA9IGZldGNoZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIEZldGNoZXJzXG4gICAqIEByZXR1cm5zIHthcnJheX0gZmV0Y2hlcnMgLSBBcnJheSBvZiBGZXRjaGVyc1xuICAgKi9cbiAgZ2V0IGZldGNoZXJzKCkge1xuICAgIHJldHVybiB0aGlzLl9mZXRjaGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBleGVjdXRlZCBQcm9taXNlXG4gICAqIEByZXR1cm5zIHtQcm9ncmVzc1Byb21pc2V9IHByb2dyZXNzUHJvbWlzZSAtIFByb21pc2Ugd2hpY2ggYWxlcnRzIHByb2dyZXNzc1xuICAgKi9cbiAgZ2V0KCkge1xuICAgIHJldHVybiAobmV3IFJ1bm5lcigpKS5nZXRBbGxSZXN1bHRzKHRoaXMpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBBbmFseXRpY3MgfSBmcm9tICcuL21vZGVsL2FuYWx5dGljcy5qcyc7XG5pbXBvcnQgeyBBbmFseXRpY3NSZXN1bHQgfSBmcm9tICcuL3Jlc3VsdC9hbmFseXRpY3MtcmVzdWx0JztcbmltcG9ydCB7IEV2ZW50QW5hbHl0aWNzIH0gZnJvbSAnLi9tb2RlbC9ldmVudC1hbmFseXRpY3MnO1xuaW1wb3J0IHsgU1FMVmlld0RhdGEgfSBmcm9tICcuL21vZGVsL3NxbC12aWV3LmpzJztcbmltcG9ydCB7IFByb2dyZXNzUHJvbWlzZSB9IGZyb20gJy4vdXRpbGl0aWVzL3Byb2dyZXNzLXByb21pc2UnO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSAnLi91dGlsaXRpZXMvcnVubmVyLmpzJztcbmltcG9ydCB7IERlcGVuZGVuY3kgfSBmcm9tICcuL3V0aWxpdGllcy9kZXBlbmRlbmN5JztcbmltcG9ydCB7IE11bHRpRmV0Y2hlciB9IGZyb20gJy4vdXRpbGl0aWVzL211bHRpLWZldGNoZXInO1xuaW1wb3J0IHsgSWRlbnRpZmlhYmxlT2JqZWN0IH0gZnJvbSAnLi9tb2RlbC9pZGVudGlmaWFibGUtb2JqZWN0LmpzJztcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBtYWluIGhvbGRlciBmb3IgdGhlIGZ1bmN0aW9uYWxpdGllcyBvZiB0aGUgZnVuY3Rpb25cbiAqIEBuYW1lc3BhY2VcbiAqIEB0eXBlIHt7UHJvbWlzZTogUHJvZ3Jlc3NQcm9taXNlLCBBbmFseXRpY3M6IEFuYWx5dGljcyxcbiAqICAgQW5hbHl0aWNzUmVzdWx0OiBBbmFseXRpY3NSZXN1bHQsXG4gKiAgIE9yZ2FuaXNhdGlvblVuaXQ6IE9yZ2FuaXNhdGlvblVuaXQsIFNRTFZpZXdEYXRhOiBTUUxWaWV3RGF0YSxcbiAqICAgUnVubmVyOiBSdW5uZXIsIERlcGVuZGVuY3k6IERlcGVuZGVuY3ksIE11bHRpRmV0Y2hlcjogTXVsdGlGZXRjaGVyLFxuICogICBhbGw6IChmdW5jdGlvbihGZXRjaGVyW10pKSwgaW5pdDogKGZ1bmN0aW9uKCo9KSl9XG4gKiB9XG4gKi9cbmxldCBGbiA9IHtcbiAgUHJvbWlzZTogUHJvZ3Jlc3NQcm9taXNlLFxuICBBbmFseXRpY3M6IEFuYWx5dGljcyxcbiAgRXZlbnRBbmFseXRpY3M6IEV2ZW50QW5hbHl0aWNzLFxuICBBbmFseXRpY3NSZXN1bHQ6IEFuYWx5dGljc1Jlc3VsdCxcbiAgSWRlbnRpZmlhYmxlT2JqZWN0OiBJZGVudGlmaWFibGVPYmplY3QsXG4gIFNRTFZpZXdEYXRhOiBTUUxWaWV3RGF0YSxcbiAgUnVubmVyOiBSdW5uZXIsXG4gIERlcGVuZGVuY3k6IERlcGVuZGVuY3ksXG4gIE11bHRpRmV0Y2hlcjogTXVsdGlGZXRjaGVyLFxuICAvKipcbiAgICogQWRkcyBtdWx0aXBsZSBmZXRjaGVycyBpbiBxdWV1ZSBmb3IgZXhlY3V0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZldGNoZXJbXX0gZmV0Y2hlcnMgLSBUaGUgZmV0aGVycyBpcyBhbiBhcnJheSBvZiB0aGUgZmV0Y2hlcnNcbiAgICogQHJldHVybnMge1Byb2dyZXNzUHJvbWlzZX0gLSBQcm9ncmVzcyBQcm9taXNlIGZvciBmZXRjaGluZyB0aGUgdmFyaW91cyBmZXRjaGVyc1xuICAgKiBAZXhhbXBsZVxuICAgKiBGbi5hbGwoW25ldyBGbi5BbmFseXRpY3MoKSwgbmV3IEZuLk9yZ2FuaXNhdGlvblVuaXQoKV0pO1xuICAgKi9cbiAgYWxsOiBmZXRjaGVycyA9PiB7XG4gICAgcmV0dXJuIG5ldyBNdWx0aUZldGNoZXIoZmV0Y2hlcnMpO1xuICB9LFxuICAvKipcbiAgICogQ29uZmlndXJlcyB0aGUgcnVubmluZyBlbnZpcm9ubWVudCBwYXJhbWV0ZXJzXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWd1cmF0aW9uIC0gVGhlIGZldGhlcnMgaXMgYW4gYXJyYXkgb2YgdGhlIGZldGNoZXJzXG4gICAqIEByZXR1cm5zIHtQcm9ncmVzc1Byb21pc2V9IC0gUHJvZ3Jlc3MgUHJvbWlzZSBmb3IgZmV0Y2hpbmcgdGhlIHZhcmlvdXMgZmV0Y2hlcnNcbiAgICogQGV4YW1wbGVcbiAgICogRm4uYWxsKHtiYXNlVXJsOicnfSk7XG4gICAqL1xuICBpbml0OiBjb25maWcgPT4ge1xuICAgIFJ1bm5lci5pbml0aWF0ZVJ1bm5lcihjb25maWcpO1xuICB9XG59O1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luZG93LkZuID0gRm47XG59XG5leHBvcnQgeyBGbiB9O1xuIiwiaW1wb3J0IHsgQW5hbHl0aWNzIH0gZnJvbSAnLi9hbmFseXRpY3MnO1xuXG4vKipcbiAqIFRoaXMgcmVwcmVzZW50cyB0aGUgRXZlbnQgQW5hbHl0aWNzIEZldGNoZXIgZm9yIHByb2Nlc3NpbmcgYW5hbHl0aWNzIGNhbGxzXG4gKlxuICogQGV4dGVuZHMgQW5hbHl0aWNzXG4gKi9cbmV4cG9ydCBjbGFzcyBFdmVudEFuYWx5dGljcyBleHRlbmRzIEFuYWx5dGljcyB7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBQcm9ncmFtIGZvciB0aGUgZmV0Y2hcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb2dyYW0gLSBUaGUgaWQgb2YgdGhlIHByb2dyYW1cbiAgICogQHJldHVybnMge0V2ZW50QW5hbHl0aWNzfSAtIE9iamVjdCB3aXRoIHRoZSBldmVudCBhbmFseXRpY3NcbiAgICovXG4gIHNldFByb2dyYW0ocHJvZ3JhbSkge1xuICAgIHRoaXMucHJvZ3JhbSA9IHByb2dyYW07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIHVybCBmb3IgZmV0Y2hpbmdcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgcmV0dXJuICdhbmFseXRpY3MvZXZlbnRzL3F1ZXJ5LycgKyB0aGlzLnByb2dyYW0gKyAnPycgKyB0aGlzLl91cmxQYXJhbWV0ZXJzO1xuICB9XG59XG4iLCJpbXBvcnQgeyBGZXRjaGVyIH0gZnJvbSAnLi4vdXRpbGl0aWVzL2ZldGNoZXInO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgSWRlbnRpZmlhYmxlIE9iamVjdFxuICpAZXh0ZW5kcyBGZXRjaGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBJZGVudGlmaWFibGVPYmplY3QgZXh0ZW5kcyBGZXRjaGVyIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBpZGVudGlmaWFibGUgb2JqZWN0IGZldGNoZXJcbiAgICpcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmplY3ROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGlkZW50aWZpYWJsZSBvYmplY3QgYXMgdXNlZCBpbiB0aGUgd2ViIGFwaVxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBpZGVudGlmaWFibGVPYmplY3QgPSBuZXcgRm4uSWRlbnRpZmlhYmxlT2JqZWN0KCdvcmdhbmlzYXRpb25Vbml0cycpOyAvLyBPcmdhbmlzYXRpb24gVW5pdCBmZXRjaGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvYmplY3ROYW1lKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9maWx0ZXJzID0gW107XG4gICAgdGhpcy5vYmplY3ROYW1lID0gb2JqZWN0TmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBuYW1lIG9mIHRoZSBpZGVudGlmaWFibGUgb2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBUaGUgbmFtZSBvZiB0aGUgSWRlbnRpZmliYWxlIE9iamVjdFxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0TmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB3aGVyZSBjbGF1c2UgZm9yIGZpbHRlcmluZyBvZiBkYXRhXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByaWdodCAtIFJpZ2h0IGV4cHJlc3Npb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wZXJhdG9yIC0gRXhwcmVzc2lvbiBvcGVyYXRvclxuICAgKiBAcGFyYW0ge3N0cmluZ3xhcnJheX0gbGVmdCAtIFJpZ2h0IGV4cHJlc3Npb25cbiAgICogQHJldHVybnMge0lkZW50aWZpYWJsZU9iamVjdH0gSWRlbnRpZmlhYmxlT2JqZWN0IElkZW50aWZpYWJsZSBvYmplY3Qgd2l0aCB3aGVyZSBjbGF1c2UgYXBwZW5kZWRcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3Qgb3JnYW5pc2F0aW9uVW5pdCA9IG5ldyBGbi5JZGVudGlmaWFibGVPYmplY3QoJ29yZ2FuaXNhdGlvblVuaXRzJyk7XG4gICAqIG9yZ2FuaXNhdGlvblVuaXQud2hlcmUoJ2xldmVsJywnPT0nLDQpOyAvL1dpbGwgc2V0IHRvIGZldGNoIG9yZ2FuaXNhdGlvbiB1bml0cyBhdCBsZXZlbCA0XG4gICAqIG9yZ2FuaXNhdGlvblVuaXQud2hlcmUoJ2NoaWxkcmVuJywnZW1wdHknKTsgLy9XaWxsIHNldCB0byBmZXRjaCBvcmdhbmlzYXRpb24gdW5pdHMgd2l0aCBubyBjaGlsZHJlblxuICAgKi9cbiAgd2hlcmUocmlnaHQsIG9wZXJhdG9yLCBsZWZ0KSB7XG4gICAgdGhpcy5fZmlsdGVycy5wdXNoKHtcbiAgICAgIHJpZ2h0OiByaWdodCxcbiAgICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcbiAgICAgIGxlZnQ6IGxlZnRcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1cmwgZm9yIGZldGNoaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHZhciB1cmwgPSB0aGlzLl91cmxQYXJhbWV0ZXJzO1xuXG4gICAgdGhpcy5fZmlsdGVycy5mb3JFYWNoKGZpbHRlciA9PiB7XG4gICAgICBpZiAodXJsICE9PSAnJykge1xuICAgICAgICB1cmwgKz0gJyYnO1xuICAgICAgfVxuICAgICAgdXJsICs9ICdmaWx0ZXI9JyArIGZpbHRlci5yaWdodDtcbiAgICAgIGlmIChmaWx0ZXIub3BlcmF0b3IgPT09ICc9PScpIHtcbiAgICAgICAgdXJsICs9ICc6ZXE6JyArIGZpbHRlci5sZWZ0O1xuICAgICAgfSBlbHNlIGlmIChmaWx0ZXIub3BlcmF0b3IgPT09ICc8Jykge1xuICAgICAgICB1cmwgKz0gJzpsdDonICsgZmlsdGVyLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5vcGVyYXRvciA9PT0gJzw9Jykge1xuICAgICAgICB1cmwgKz0gJzpsZTonICsgZmlsdGVyLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5vcGVyYXRvciA9PT0gJz4nKSB7XG4gICAgICAgIHVybCArPSAnOmd0OicgKyBmaWx0ZXIubGVmdDtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLm9wZXJhdG9yID09PSAnPj0nKSB7XG4gICAgICAgIHVybCArPSAnOmdlOicgKyBmaWx0ZXIubGVmdDtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLm9wZXJhdG9yID09PSAnPD4nKSB7XG4gICAgICAgIHVybCArPSAnOiFlcTonICsgZmlsdGVyLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5vcGVyYXRvciA9PT0gJ2luJyB8fCBmaWx0ZXIub3BlcmF0b3IgPT09ICchaW4nKSB7XG4gICAgICAgIHVybCArPSAnOicgKyBmaWx0ZXIub3BlcmF0b3IgKyAnOlsnICsgZmlsdGVyLmxlZnQgKyAnXSc7XG4gICAgICB9IGVsc2UgaWYgKCFmaWx0ZXIubGVmdCkge1xuICAgICAgICB1cmwgKz0gJzonICsgZmlsdGVyLm9wZXJhdG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXJsICs9ICc6JyArIGZpbHRlci5vcGVyYXRvciArICc6JyArIGZpbHRlci5sZWZ0O1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLm5hbWUgKyAnLmpzb24/JyArIHVybDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgRmV0Y2hlciB9IGZyb20gJy4uL3V0aWxpdGllcy9mZXRjaGVyJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgZmV0Y2hlciB0byBsb2FkIHNxbCB2aWV3IGRhdGFcbiAqXG4gKiBAZXh0ZW5kcyBGZXRjaGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBTUUxWaWV3RGF0YSBleHRlbmRzIEZldGNoZXIge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBTUUxWaWV3RGF0YSBJbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBUaGUgU3FsIFZpZXcgaWRlbnRpZmllclxuICAgKi9cbiAgY29uc3RydWN0b3IoaWQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgdGhpcy5wYXJhbWV0ZXJzWyd2YXInXSA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhcmlhYmxlIGZvciB0aGUgZmV0Y2hpbmcgb2YgdGhlIHNxbCB2aWV3IGRhdGFcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhcmlhYmxlIC0gVmFyaWFibGUgaWRlbnRpZmllclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgLSBWYWx1ZSBvZiB0aGUgdmFyaWFibGUgaWRlbnRpZmllclxuICAgKiBAcmV0dXJucyB7U1FMVmlld0RhdGF9IC0gT2JqZWN0IG9mIHRoZSBzcWwgdmlld1xuICAgKi9cbiAgc2V0VmFyaWFibGUodmFyaWFibGUsIHZhbHVlKSB7XG4gICAgdGhpcy5wYXJhbWV0ZXJzWyd2YXInXVt2YXJpYWJsZV0gPSB2YWx1ZSA/IHZhbHVlIDogJyc7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIHVybCBmb3IgZmV0Y2hpbmdcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGdldCB1cmwoKSB7XG4gICAgbGV0IHVybCA9ICdzcWxWaWV3cy8nICsgdGhpcy5faWQgKyAnL2RhdGEuanNvbj8nICsgdGhpcy5fdXJsUGFyYW1ldGVycztcblxuICAgIHJldHVybiB1cmw7XG4gIH1cbn1cbiIsIi8qKlxuICogVGhpcyBjYWxsYmFjayB0eXBlIGlzIGNhbGxlZCBgcHJvY2Vzc0NhbGxiYWNrYC5cbiAqXG4gKiBAbWl4aW5cbiAqIEBjYWxsYmFjayBwcm9jZXNzQ2FsbGJhY2tcbiAqIEBwYXJhbSB7T2JqZWN0fSByZXN1bHRcbiAqL1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBwcm9jZXNzIGRlcGVuZGVuY3lcbiAqL1xuZXhwb3J0IGNsYXNzIERlcGVuZGVuY3kge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGRlcGVuZGVuY3kgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtQcm9jZXNzfSBwcm9jZXNzXG4gICAqIEBwYXJhbSB7cHJvY2Vzc0NhbGxiYWNrfSBwcm9jZXNzQ2FsbGJhY2tcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByb2Nlc3MsIHByb2Nlc3NDYWxsYmFjaykge1xuICAgIHRoaXMucHJvY2VzcyA9IHByb2Nlc3M7XG4gICAgdGhpcy5wcm9jZXNzQ2FsbGJhY2sgPSBwcm9jZXNzQ2FsbGJhY2s7XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=