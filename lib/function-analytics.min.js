!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("function-analytics",[],t):"object"==typeof exports?exports["function-analytics"]=t():e["function-analytics"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=29)}([function(e,t,r){"use strict";var n=r(6),s=r(12),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===o.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:s,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,s=arguments.length;n<s;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,function(t,s){e[s]=r&&"function"==typeof t?n(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return f});var n=r(3),s=r.n(n),o=r(10),i=r.n(o),a=r(2),u=r.n(a);let c;class f{static initiateRunner(e){f.instance||(this.config=e,this.cache={},c=this)}get instance(){return c}set config(e){this.config=e}get config(){return this.config}_fetch(e,t,r){if(!c){throw Error('Configration not set please configre function analytics eg {baseUrl:"dhis_base_url", username:"username", password:"password"}')}const n={url:c.config.baseUrl+e.url,method:"get",adapter:u.a};c.config.username&&c.config.password&&(n.auth={username:c.config.username,password:c.config.password}),i.a.request(n).then(r=>{t(e.performPostProcess(r.data))},e=>{r(e)})}getResults(e){if(e._fetchers)return this.getAllResults(e);let t=e.hash();return c.cache[t]||(c.cache[t]=new s.a((t,r,n)=>{e.hasDependencies()?e.getDependecyFetchResults().then(()=>{e.performPreProcess(),this._fetch(e,t,r)}).catch(e=>{console.log("Errrrrrrrrrr:",e),r()}):this._fetch(e,t,r)})),c.cache[t]}getAllResults(e){return new s.a((t,r,n)=>{const o=e.fetchers.map(e=>(new f).getResults(e));return s.a.all(o).then(r=>{t(e.performPostProcess(r))}).catch(e=>{r(e)})})}}}).call(this,r(5))},function(e,t,r){"use strict";var n=r(0),s=r(15),o=r(17),i=r(18),a=r(19),u=r(7),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||r(20);e.exports=function(e){return new Promise(function(t,f){var h=e.data,l=e.headers;n.isFormData(h)&&delete l["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||a(e.url)||(p=new window.XDomainRequest,d="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var g=e.auth.username||"",y=e.auth.password||"";l.Authorization="Basic "+c(g+":"+y)}if(p.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[d]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:r,config:e,request:p};s(t,f,n),p=null}},p.onerror=function(){f(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){f(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var w=r(21),v=(e.withCredentials||a(e.url))&&e.xsrfCookieName?w.read(e.xsrfCookieName):void 0;v&&(l[e.xsrfHeaderName]=v)}if("setRequestHeader"in p&&n.forEach(l,function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete l[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),f(e),p=null)}),void 0===h&&(h=null),p.send(h)})}},function(e,t,r){"use strict";const n=Symbol?Symbol():"__listeners";class s extends Promise{constructor(e){super((t,r)=>e(t,r,e=>{try{return this[n].forEach(t=>t(e))}catch(e){r(e)}})),this[n]=[]}progress(e){if("function"!=typeof e)throw new Error("PROGRESS_REQUIRES_FUNCTION");return this[n].push(e),this}static all(e){const t=new Array(e.length),r=e.length;let n=0;return new s((s,o,i)=>{e.forEach((e,a)=>{e.then(e=>{t[a]=e,t.proportion=++n/r,i(t),n===r&&s(t)}).catch(o)})})}static sequence(e,t){const r=[],n=e.length;let o=0;return new s((s,i,a)=>{!function u(){t.call(null,e[r.length]).then(e=>{r.push(e),r.proportion=++o/n,a(r),r.length===n?s(r):u()}).catch(i)}()})}}e.exports=s},function(e,t,r){"use strict";(function(t){var n=r(0),s=r(14),o={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:("undefined"!=typeof XMLHttpRequest?a=r(2):void 0!==t&&(a=r(2)),a),transformRequest:[function(e,t){return s(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){u.headers[e]={}}),n.forEach(["post","put","patch"],function(e){u.headers[e]=n.merge(o)}),e.exports=u}).call(this,r(5))},function(e,t){var r,n,s=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u,c=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!f){var e=a(l);f=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||f||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(16);e.exports=function(e,t,r,s,o){var i=new Error(e);return n(i,t,r,s,o)}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){e.exports=r(11)},function(e,t,r){"use strict";var n=r(0),s=r(6),o=r(13),i=r(4);function a(e){var t=new o(e),r=s(o.prototype.request,t);return n.extend(r,o.prototype,t),n.extend(r,t),r}var u=a(i);u.Axios=o,u.create=function(e){return a(n.merge(i,e))},u.Cancel=r(9),u.CancelToken=r(27),u.isCancel=r(8),u.all=function(e){return Promise.all(e)},u.spread=r(28),e.exports=u,e.exports.default=u},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";var n=r(4),s=r(0),o=r(22),i=r(23);function a(e){this.defaults=e,this.interceptors={request:new o,response:new o}}a.prototype.request=function(e){"string"==typeof e&&(e=s.merge({url:arguments[0]},arguments[1])),(e=s.merge(n,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},s.forEach(["delete","get","head","options"],function(e){a.prototype[e]=function(t,r){return this.request(s.merge(r||{},{method:e,url:t}))}}),s.forEach(["post","put","patch"],function(e){a.prototype[e]=function(t,r,n){return this.request(s.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=a},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(7);e.exports=function(e,t,r){var s=r.config.validateStatus;r.status&&s&&!s(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,s){return e.config=t,r&&(e.code=r),e.request=n,e.response=s,e}},function(e,t,r){"use strict";var n=r(0);function s(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(n.isURLSearchParams(t))o=t.toString();else{var i=[];n.forEach(t,function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(s(t)+"="+s(e))}))}),o=i.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,r){"use strict";var n=r(0),s=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,o,i={};return e?(n.forEach(e.split("\n"),function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),r=n.trim(e.substr(o+1)),t){if(i[t]&&s.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}}),i):i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function s(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=s(window.location.href),function(t){var r=n.isString(t)?s(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function s(){this.message="String contains an invalid character"}s.prototype=new Error,s.prototype.code=5,s.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,r,o=String(e),i="",a=0,u=n;o.charAt(0|a)||(u="=",a%1);i+=u.charAt(63&t>>8-a%1*8)){if((r=o.charCodeAt(a+=.75))>255)throw new s;t=t<<8|r}return i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,s,o,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(s)&&a.push("path="+s),n.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";var n=r(0);function s(){this.handlers=[]}s.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},s.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},s.prototype.forEach=function(e){n.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=s},function(e,t,r){"use strict";var n=r(0),s=r(24),o=r(8),i=r(4),a=r(25),u=r(26);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||i.adapter)(e).then(function(t){return c(e),t.data=s(t.data,t.headers,e.transformResponse),t},function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=s(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(9);function s(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new n(e),t(r.reason))})}s.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},s.source=function(){var e;return{token:new s(function(t){e=t}),cancel:e}},e.exports=s},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){"use strict";r.r(t);var n=r(1);class s{constructor(){this.postProcessors=[],this.dependencies=[]}hasDependencies(){return this.dependencies.length>0}preProcess(e){return this.dependencies.push(e),this}addPreProcess(e){return this.dependencies.push(e),this}postProcess(e){return this.postProcessors.push(e),this}addPostProcess(e){return this.postProcessors.push(e),this}performPreProcess(){return this.dependencies.forEach(e=>{e.processCallback(e.process._results,this)}),this}performPostProcess(e){this._results=e;let t=e;return this.postProcessors.forEach(e=>{t=e(t)}),t}}var o=r(3),i=r.n(o);class a extends s{constructor(){super(),this.parameters={}}get _urlParameters(){let e="";return Object.keys(this.parameters).forEach(t=>{""!==e&&(e+="&"),"string"==typeof this.parameters[t]?e+=t+"="+this.parameters[t]:Object.keys(this.parameters[t]).forEach(r=>{""!==e&&(e+="&"),""===this.parameters[t][r]?e+=t+"="+r:e+=t+"="+r+":"+this.parameters[t][r]})}),e}get url(){throw new Error("Should implement url generation")}get(){return(new n.a).getResults(this)}setParameters(e){return Object.keys(e).forEach(t=>{this.parameters[t]=e[t]}),this}getDependecyFetchResults(){const e=this.dependencies.map(e=>(new n.a).getResults(e.process));return i.a.all(e)}_encode64(e){return btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),""))}hash(){return this.url}}class u{constructor(e,t,r){this.row=e,this.headers=t,this.metaData=r}dimension(e){var t=-1,r="";return this.headers.forEach((r,n)=>{r.name===e&&(t=n)}),this.metaData.names?r=this.metaData.names[this.row[t]]:this.metaData.items&&(r=this.metaData.items[this.row[t]]?this.metaData.items[this.row[t]].name:void 0),{id:this.row[t],name:r,path:this.metaData.ouHierarchy&&void 0!==this.metaData.ouHierarchy[this.row[t]]?this.metaData.ouHierarchy[this.row[t]]:void 0}}get dx(){return this.dimension("dx")}get pe(){return this.dimension("pe")}get ou(){return this.dimension("ou")}get value(){return this.dimension("value").id}}class c{constructor(e){this._data=e}get headers(){return this._data.headers}get metaData(){return this._data.metaData}get rows(){let e=[];return this._data.rows.forEach(t=>{e.push(new u(t,this.headers,this.metaData))}),e}getDimensionDetailsByName(e){var t=[];return this.metaData.dimensions&&this.metaData.dimensions[e].forEach(e=>{t.push(this.getDimensionDetails(e))}),t}get rows(){let e=[];return this._data.rows.forEach(t=>{e.push(new u(t,this.headers,this.metaData))}),e}getDimensionDetails(e){var t="";return this.metaData.names?t=this.metaData.names[e]:this.metaData.items&&(t=this.metaData.items[e]?this.metaData.items[e].name:void 0),{id:e,name:t,path:this.metaData.ouHierarchy&&void 0!==this.metaData.ouHierarchy[e]?this.metaData.ouHierarchy[e]:void 0}}get height(){return this._data.height}get width(){return this._data.width}}class f extends a{constructor(e=25){super(),"boolean"==typeof e&&(e=e?25:26),this.parameters.dimension={},this.postProcess(t=>this.standardizeAnalytics(t,e))}setData(e){return this.setDimension("dx",e),this}setPeriod(e){return this.setDimension("pe",e),this}setOrgUnit(e){return this.setDimension("ou",e),this}setSelections(e){return this.setPeriod(e.pe),this.setOrgUnit(e.ou),void 0!==e.rule.json.data&&this.setData(e.rule.json.data),void 0!==e.dimensions&&Array.isArray(e.dimensions)&&e.dimensions.forEach(function(e){if(Array.isArray(e.items)){let t="";e.items.forEach(function(e){t.length>0?t+=";"+e:t+=e}),this.setDimension(e.id,t)}}),this}setDimension(e,t){return this.parameters.dimension[e]=t||"",this}standardizeAnalytics(e,t=25){if("boolean"==typeof t&&(t=t?25:26),e.count)return e;let r={headers:[],metaData:{dimensions:{},names:{},dx:[],pe:[],ou:[],co:[]},rows:[]};if(e){if(e.headers&&e.headers.forEach(e=>{try{let t=e;r.headers.push(t)}catch(e){console.warn("Invalid header object")}}),e.metaData)try{let n=this.getSanitizedAnalyticsMetadata(e.metaData,t);r.metaData=n}catch(e){console.warn("Invalid metadata object")}e.rows&&(r.rows=e.rows)}return r.height=e.height,r.width=e.width,new c(r)}getSanitizedAnalyticsMetadata(e,t){let r={};return e&&(e.ouHierarchy&&(r.ouHierarchy=e.ouHierarchy),t<26?(r.names={},e.names?r.names=e.names:e.items&&Object.keys(e.items).forEach(t=>{r.names[t]=e.items[t].name}),e.dimensions&&Object.keys(e.dimensions).forEach(t=>{r[t]=e.dimensions[t]})):(r.items={},e.items?r.items=e.items:e.names&&Object.keys(e.items).forEach(t=>{e.items[t]={name:e.names[t]}}),e.dimensions?r.dimensions=e.dimensions:(r.dimensions={},Object.keys(e).forEach(t=>{-1===["names","items","dimensions"].indexOf(t)&&(r.dimensions[t]=e[t])})))),r}get url(){return"analytics?"+this._urlParameters}}const h=Symbol?Symbol():"__listeners";class l extends Promise{constructor(e){super((t,r)=>e(t,r,e=>{try{return this[h].forEach(t=>t(e))}catch(e){r(e)}})),this[h]=[]}progress(e){if("function"!=typeof e)throw new Error("PROGRESS_REQUIRES_FUNCTION");return this[h].push(e),this}static all(e){const t=new Array(e.length),r=e.length;let n=0;return new l((s,o,i)=>{e.forEach((e,a)=>{e.then(e=>{t[a]=e,t.proportion=++n/r,i(t),n===r&&s(t)}).catch(o)})})}static sequence(e,t){const r=[],n=e.length;let s=0;return new l((o,i,a)=>{!function u(){t.call(null,e[r.length]).then(e=>{r.push(e),r.proportion=++s/n,a(r),r.length===n?o(r):u()}).catch(i)}()})}}class p extends a{constructor(e){super(),this._fetchers=e}get fetchers(){return this._fetchers}get(){return(new n.a).getAllResults(this)}}r.d(t,"Fn",function(){return d});let d={Promise:l,Analytics:f,EventAnalytics:class extends f{setProgram(e){return this.program=e,this}get url(){return"analytics/events/query/"+this.program+"?"+this._urlParameters}},AnalyticsResult:c,IdentifiableObject:class extends a{constructor(e){super(),this._filters=[],this.objectName=e}get name(){return this.objectName}where(e,t,r){return this._filters.push({right:e,operator:t,left:r}),this}get url(){var e=this._urlParameters;return this._filters.forEach(t=>{""!==e&&(e+="&"),e+="filter="+t.right,"=="===t.operator?e+=":eq:"+t.left:"<"===t.operator?e+=":lt:"+t.left:"<="===t.operator?e+=":le:"+t.left:">"===t.operator?e+=":gt:"+t.left:">="===t.operator?e+=":ge:"+t.left:"<>"===t.operator?e+=":!eq:"+t.left:"in"===t.operator||"!in"===t.operator?e+=":"+t.operator+":["+t.left+"]":t.left?e+=":"+t.operator+":"+t.left:e+=":"+t.operator}),this.name+".json?"+e}},SQLViewData:class extends a{constructor(e){super(),this._id=e,this.parameters.var={}}setVariable(e,t){return this.parameters.var[e]=t||"",this}get url(){return"sqlViews/"+this._id+"/data.json?"+this._urlParameters}},Runner:n.a,Dependency:class{constructor(e,t){this.process=e,this.processCallback=t}},MultiFetcher:p,all:e=>new p(e),init:e=>{n.a.initiateRunner(e)}};"undefined"!=typeof window&&(window.Fn=d)}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3Mvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL3V0aWxzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvcnVubmVyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9wcm9ncmVzcy1wcm9taXNlL2luZGV4LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvZGVmYXVsdHMuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2F4aW9zLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9pcy1idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9zZXR0bGUuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9idG9hLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL25vZGVfbW9kdWxlcy9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9ub2RlX21vZHVsZXMvYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vbm9kZV9tb2R1bGVzL2F4aW9zL2xpYi9oZWxwZXJzL3NwcmVhZC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvdXRpbGl0aWVzL3Byb2Nlc3MuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL3V0aWxpdGllcy9mZXRjaGVyLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9yZXN1bHQvcm93LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9yZXN1bHQvYW5hbHl0aWNzLXJlc3VsdC5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvbW9kZWwvYW5hbHl0aWNzLmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvcHJvZ3Jlc3MtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly9mdW5jdGlvbi1hbmFseXRpY3MvLi9zcmMvdXRpbGl0aWVzL211bHRpLWZldGNoZXIuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy9tb2RlbC9ldmVudC1hbmFseXRpY3MuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL21vZGVsL2lkZW50aWZpYWJsZS1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vZnVuY3Rpb24tYW5hbHl0aWNzLy4vc3JjL21vZGVsL3NxbC12aWV3LmpzIiwid2VicGFjazovL2Z1bmN0aW9uLWFuYWx5dGljcy8uL3NyYy91dGlsaXRpZXMvZGVwZW5kZW5jeS5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJpc0J1ZmZlciIsInRvU3RyaW5nIiwiaXNBcnJheSIsInZhbCIsImlzT2JqZWN0IiwiaXNGdW5jdGlvbiIsImZvckVhY2giLCJvYmoiLCJmbiIsImxlbmd0aCIsImlzQXJyYXlCdWZmZXIiLCJpc0Zvcm1EYXRhIiwiRm9ybURhdGEiLCJpc0FycmF5QnVmZmVyVmlldyIsIkFycmF5QnVmZmVyIiwiaXNWaWV3IiwiYnVmZmVyIiwiaXNTdHJpbmciLCJpc051bWJlciIsImlzVW5kZWZpbmVkIiwiaXNEYXRlIiwiaXNGaWxlIiwiaXNCbG9iIiwiaXNTdHJlYW0iLCJwaXBlIiwiaXNVUkxTZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJpc1N0YW5kYXJkQnJvd3NlckVudiIsIm5hdmlnYXRvciIsInByb2R1Y3QiLCJ3aW5kb3ciLCJkb2N1bWVudCIsIm1lcmdlIiwicmVzdWx0IiwiYXNzaWduVmFsdWUiLCJhcmd1bWVudHMiLCJleHRlbmQiLCJhIiwiYiIsInRoaXNBcmciLCJ0cmltIiwic3RyIiwicmVwbGFjZSIsInByb2Nlc3MiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiUnVubmVyIiwicHJvZ3Jlc3NfcHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwicHJvZ3Jlc3NfcHJvbWlzZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQiLCJheGlvc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiYXhpb3NfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0IiwiYXhpb3NfbGliX2FkYXB0ZXJzX2h0dHBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsImF4aW9zX2xpYl9hZGFwdGVyc19odHRwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCIsIl9pbnN0YW5jZSIsIltvYmplY3QgT2JqZWN0XSIsImNvbmZpZ3VyYXRpb25zIiwiaW5zdGFuY2UiLCJjb25maWciLCJjYWNoZSIsIl9mZXRjaCIsImZldGNoZXIiLCJyZXNvbHZlIiwicmVqZWN0IiwiRXJyb3IiLCJ1cmwiLCJiYXNlVXJsIiwibWV0aG9kIiwiYWRhcHRlciIsImh0dHBhZGFwdGVyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImF1dGgiLCJheGlvcyIsInJlcXVlc3QiLCJ0aGVuIiwicmVzdWx0cyIsInBlcmZvcm1Qb3N0UHJvY2VzcyIsImRhdGEiLCJlcnIiLCJnZXRSZXN1bHRzIiwiX2ZldGNoZXJzIiwiZ2V0QWxsUmVzdWx0cyIsImhhc2hlZCIsImhhc2giLCJQcm9ncmVzc1Byb21pc2UiLCJwcm9ncmVzcyIsImhhc0RlcGVuZGVuY2llcyIsImdldERlcGVuZGVjeUZldGNoUmVzdWx0cyIsInBlcmZvcm1QcmVQcm9jZXNzIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwibXVsdGlmZXRjaGVyIiwicHJvbWlzZXMiLCJmZXRjaGVycyIsIm1hcCIsImFsbCIsInV0aWxzIiwic2V0dGxlIiwiYnVpbGRVUkwiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJjcmVhdGVFcnJvciIsImJ0b2EiLCJQcm9taXNlIiwicmVxdWVzdERhdGEiLCJyZXF1ZXN0SGVhZGVycyIsImhlYWRlcnMiLCJYTUxIdHRwUmVxdWVzdCIsImxvYWRFdmVudCIsInhEb21haW4iLCJYRG9tYWluUmVxdWVzdCIsIm9ucHJvZ3Jlc3MiLCJvbnRpbWVvdXQiLCJBdXRob3JpemF0aW9uIiwib3BlbiIsInRvVXBwZXJDYXNlIiwicGFyYW1zIiwicGFyYW1zU2VyaWFsaXplciIsInRpbWVvdXQiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwicmVzcG9uc2VVUkwiLCJpbmRleE9mIiwicmVzcG9uc2VIZWFkZXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwicmVzcG9uc2UiLCJyZXNwb25zZVR5cGUiLCJyZXNwb25zZVRleHQiLCJzdGF0dXNUZXh0Iiwib25lcnJvciIsImNvb2tpZXMiLCJ4c3JmVmFsdWUiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ4c3JmQ29va2llTmFtZSIsInJlYWQiLCJ1bmRlZmluZWQiLCJ4c3JmSGVhZGVyTmFtZSIsInRvTG93ZXJDYXNlIiwic2V0UmVxdWVzdEhlYWRlciIsImUiLCJvbkRvd25sb2FkUHJvZ3Jlc3MiLCJhZGRFdmVudExpc3RlbmVyIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbFRva2VuIiwicHJvbWlzZSIsImNhbmNlbCIsImFib3J0Iiwic2VuZCIsIkxJU1RFTkVSUyIsImV4ZWN1dG9yIiwic3VwZXIiLCJsaXN0ZW5lciIsImVycm9yIiwiaGFuZGxlciIsInB1c2giLCJBcnJheSIsInJlc29sdmVDb3VudCIsImluZGV4IiwicHJvcG9ydGlvbiIsImlucHV0cyIsImludm9rZU5leHQiLCJub3JtYWxpemVIZWFkZXJOYW1lIiwiREVGQVVMVF9DT05URU5UX1RZUEUiLCJDb250ZW50LVR5cGUiLCJzZXRDb250ZW50VHlwZUlmVW5zZXQiLCJkZWZhdWx0cyIsInRyYW5zZm9ybVJlcXVlc3QiLCJKU09OIiwic3RyaW5naWZ5IiwidHJhbnNmb3JtUmVzcG9uc2UiLCJwYXJzZSIsIm1heENvbnRlbnRMZW5ndGgiLCJ2YWxpZGF0ZVN0YXR1cyIsImNvbW1vbiIsIkFjY2VwdCIsImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJjb25jYXQiLCJkcmFpblF1ZXVlIiwibGVuIiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsImFycmF5Iiwibm9vcCIsIm5leHRUaWNrIiwiYXJncyIsImFwcGx5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiZW5oYW5jZUVycm9yIiwibWVzc2FnZSIsImNvZGUiLCJfX0NBTkNFTF9fIiwiQ2FuY2VsIiwiQXhpb3MiLCJjcmVhdGVJbnN0YW5jZSIsImRlZmF1bHRDb25maWciLCJjb250ZXh0IiwiaW5zdGFuY2VDb25maWciLCJDYW5jZWxUb2tlbiIsImlzQ2FuY2VsIiwic3ByZWFkIiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwicmVhZEZsb2F0TEUiLCJzbGljZSIsImlzU2xvd0J1ZmZlciIsIl9pc0J1ZmZlciIsIkludGVyY2VwdG9yTWFuYWdlciIsImRpc3BhdGNoUmVxdWVzdCIsImludGVyY2VwdG9ycyIsImNoYWluIiwiaW50ZXJjZXB0b3IiLCJ1bnNoaWZ0IiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJzaGlmdCIsIm5vcm1hbGl6ZWROYW1lIiwiZW5jb2RlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic2VyaWFsaXplZFBhcmFtcyIsInBhcnRzIiwidiIsInRvSVNPU3RyaW5nIiwiam9pbiIsImlnbm9yZUR1cGxpY2F0ZU9mIiwicGFyc2VkIiwic3BsaXQiLCJsaW5lIiwic3Vic3RyIiwib3JpZ2luVVJMIiwibXNpZSIsInRlc3QiLCJ1c2VyQWdlbnQiLCJ1cmxQYXJzaW5nTm9kZSIsImNyZWF0ZUVsZW1lbnQiLCJyZXNvbHZlVVJMIiwiaHJlZiIsInNldEF0dHJpYnV0ZSIsInByb3RvY29sIiwiaG9zdCIsInNlYXJjaCIsImhvc3RuYW1lIiwicG9ydCIsInBhdGhuYW1lIiwiY2hhckF0IiwibG9jYXRpb24iLCJyZXF1ZXN0VVJMIiwiY2hhcnMiLCJFIiwiaW5wdXQiLCJibG9jayIsImNoYXJDb2RlIiwiU3RyaW5nIiwib3V0cHV0IiwiaWR4IiwiY2hhckNvZGVBdCIsIndyaXRlIiwiZXhwaXJlcyIsInBhdGgiLCJkb21haW4iLCJzZWN1cmUiLCJjb29raWUiLCJEYXRlIiwidG9HTVRTdHJpbmciLCJtYXRjaCIsIlJlZ0V4cCIsImRlY29kZVVSSUNvbXBvbmVudCIsInJlbW92ZSIsIm5vdyIsImhhbmRsZXJzIiwidXNlIiwiZWplY3QiLCJpZCIsImgiLCJ0cmFuc2Zvcm1EYXRhIiwiaXNBYnNvbHV0ZVVSTCIsImNvbWJpbmVVUkxzIiwidGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZCIsInRocm93SWZSZXF1ZXN0ZWQiLCJiYXNlVVJMIiwicmVhc29uIiwiZm5zIiwicmVsYXRpdmVVUkwiLCJUeXBlRXJyb3IiLCJyZXNvbHZlUHJvbWlzZSIsInRva2VuIiwic291cmNlIiwiY2FsbGJhY2siLCJhcnIiLCJQcm9jZXNzIiwicG9zdFByb2Nlc3NvcnMiLCJkZXBlbmRlbmNpZXMiLCJwcmVQcm9jZXNzIiwiZGVwZW5kZW5jeSIsImFkZFByZVByb2Nlc3MiLCJwb3N0UHJvY2VzcyIsImFkZFBvc3RQcm9jZXNzIiwicHJvY2Vzc0NhbGxiYWNrIiwiX3Jlc3VsdHMiLCJkYXRhVG9Qcm9jZXNzIiwiRmV0Y2hlciIsInBhcmFtZXRlcnMiLCJfdXJsUGFyYW1ldGVycyIsImtleXMiLCJrZXkyIiwic2V0UGFyYW1ldGVycyIsIl9lbmNvZGU2NCIsImJ1ZmYiLCJVaW50OEFycmF5IiwicmVkdWNlIiwiZnJvbUNoYXJDb2RlIiwiUm93Iiwicm93IiwibWV0YURhdGEiLCJkaW1lbnNpb24iLCJoZWFkZXIiLCJuYW1lcyIsIml0ZW1zIiwib3VIaWVyYXJjaHkiLCJkeCIsInBlIiwib3UiLCJBbmFseXRpY3NSZXN1bHQiLCJhbmFseXRpY3NPYmplY3QiLCJfZGF0YSIsInJvd3MiLCJnZXREaW1lbnNpb25EZXRhaWxzQnlOYW1lIiwiZGltZW5zaW9ucyIsIml0ZW0iLCJnZXREaW1lbnNpb25EZXRhaWxzIiwiaGVpZ2h0Iiwid2lkdGgiLCJBbmFseXRpY3MiLCJzdGFuZGFyZGl6ZUFuYWx5dGljcyIsInNldERhdGEiLCJzZXREaW1lbnNpb24iLCJzZXRQZXJpb2QiLCJzZXRPcmdVbml0Iiwic2V0U2VsZWN0aW9ucyIsInJ1bGUiLCJqc29uIiwiZGltZW5zaW9uSXRlbXMiLCJkaW0iLCJjb3VudCIsInNhbml0aXplZEFuYWx5dGljc09iamVjdCIsImNvIiwibmV3SGVhZGVyIiwid2FybiIsInNhbml0aXplZE1ldGFkYXRhIiwiZ2V0U2FuaXRpemVkQW5hbHl0aWNzTWV0YWRhdGEiLCJhbmFseXRpY01ldGFkYXRhIiwibmFtZUtleSIsIk11bHRpRmV0Y2hlciIsIkZuIiwiRXZlbnRBbmFseXRpY3MiLCJzZXRQcm9ncmFtIiwicHJvZ3JhbSIsIklkZW50aWZpYWJsZU9iamVjdCIsIm9iamVjdE5hbWUiLCJfZmlsdGVycyIsIndoZXJlIiwicmlnaHQiLCJvcGVyYXRvciIsImxlZnQiLCJmaWx0ZXIiLCJTUUxWaWV3RGF0YSIsIl9pZCIsInNldFZhcmlhYmxlIiwidmFyaWFibGUiLCJEZXBlbmRlbmN5IiwiaW5pdCIsImluaXRpYXRlUnVubmVyIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLHdCQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLHNCQUFBRCxJQUVBRCxFQUFBLHNCQUFBQyxJQVJBLENBU0Msb0JBQUFLLFVBQUFDLEtBQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFSLFFBR0EsSUFBQUMsRUFBQUssRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FWLFFBQUEsSUFVQSxPQU5BVyxFQUFBSCxHQUFBSSxLQUFBWCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTyxHQUdBTixFQUFBUyxHQUFBLEVBR0FULEVBQUFELFFBMERBLE9BckRBTyxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFmLEVBQUFnQixFQUFBQyxHQUNBVixFQUFBVyxFQUFBbEIsRUFBQWdCLElBQ0FHLE9BQUFDLGVBQUFwQixFQUFBZ0IsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1YsRUFBQWdCLEVBQUEsU0FBQXZCLEdBQ0Esb0JBQUF3QixlQUFBQyxhQUNBTixPQUFBQyxlQUFBcEIsRUFBQXdCLE9BQUFDLFlB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LFdBQUwsSUFBdUJtRSxHQUFZamEsR0FBZ0IsR0FDNUNyQixLQU1UbUcsVUFHRSxNQUZVLFlBQWNuRyxLQUFLb2IsSUFBTSxjQUFnQnBiLEtBQUtvWCxpQkhQMURuUyxPQUFRQSxJQUNSc1csV0lqQkssTUFNTHZLLFlBQVlqTSxFQUFTZ1MsR0FDbkIvVyxLQUFLK0UsUUFBVUEsRUFDZi9FLEtBQUsrVyxnQkFBa0JBLElKVXpCdUQsYUFBY0EsRUFTZG5TLElBQUtGLEdBQ0ksSUFBSXFTLEVBQWFyUyxHQVUxQnVULEtBQU01VixJQUNKWCxJQUFPd1csZUFBZTdWLEtBSUosb0JBQVgxQixTQUNUQSxPQUFPcVcsR0FBS0EiLCJmaWxlIjoiZnVuY3Rpb24tYW5hbHl0aWNzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiZnVuY3Rpb24tYW5hbHl0aWNzXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImZ1bmN0aW9uLWFuYWx5dGljc1wiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJmdW5jdGlvbi1hbmFseXRpY3NcIl0gPSBmYWN0b3J5KCk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDI5KTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIGlzQnVmZmVyID0gcmVxdWlyZSgnaXMtYnVmZmVyJyk7XG5cbi8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xufVxuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAoXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnXG4gICk7XG59XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG4gKlxuICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cbiAqL1xuZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG4gIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAgIG9iaiA9IFtvYmpdO1xuICB9XG5cbiAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBhcnJheSB2YWx1ZXNcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWNjZXB0cyB2YXJhcmdzIGV4cGVjdGluZyBlYWNoIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCwgdGhlblxuICogaW1tdXRhYmx5IG1lcmdlcyB0aGUgcHJvcGVydGllcyBvZiBlYWNoIG9iamVjdCBhbmQgcmV0dXJucyByZXN1bHQuXG4gKlxuICogV2hlbiBtdWx0aXBsZSBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUga2V5IHRoZSBsYXRlciBvYmplY3QgaW5cbiAqIHRoZSBhcmd1bWVudHMgbGlzdCB3aWxsIHRha2UgcHJlY2VkZW5jZS5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgcmVzdWx0ID0gbWVyZ2Uoe2ZvbzogMTIzfSwge2ZvbzogNDU2fSk7XG4gKiBjb25zb2xlLmxvZyhyZXN1bHQuZm9vKTsgLy8gb3V0cHV0cyA0NTZcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZVxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIG1lcmdlKC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLykge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG4gICAgaWYgKHR5cGVvZiByZXN1bHRba2V5XSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG4gIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzQXJyYXk6IGlzQXJyYXksXG4gIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsXG4gIGlzQnVmZmVyOiBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuICBpc1N0cmluZzogaXNTdHJpbmcsXG4gIGlzTnVtYmVyOiBpc051bWJlcixcbiAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsXG4gIGlzRGF0ZTogaXNEYXRlLFxuICBpc0ZpbGU6IGlzRmlsZSxcbiAgaXNCbG9iOiBpc0Jsb2IsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzU3RyZWFtOiBpc1N0cmVhbSxcbiAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIGZvckVhY2g6IGZvckVhY2gsXG4gIG1lcmdlOiBtZXJnZSxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIHRyaW06IHRyaW1cbn07XG4iLCJpbXBvcnQgUHJvZ3Jlc3NQcm9taXNlIGZyb20gJ3Byb2dyZXNzLXByb21pc2UnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBodHRwYWRhcHRlciBmcm9tICdheGlvcy9saWIvYWRhcHRlcnMvaHR0cCc7XG5pbXBvcnQgeGhyYWRhcHRlciBmcm9tICdheGlvcy9saWIvYWRhcHRlcnMveGhyJztcbmxldCBfaW5zdGFuY2U7XG5cbi8qKlxuICogUnVubmVyIHJlcHJlc2VudHMgdGhlIHByb2Nlc3Mgd2hpY2ggd2lsbCBzY2hlZHVsZSBhbmQgcnVuIG9wZXJhdGlvbnMgb2YgdGhlIHByb2Nlc3Nlc1xuICovXG5leHBvcnQgY2xhc3MgUnVubmVyIHtcbiAgLyoqXG4gICAqIEluaXRpYXRlcyB0aGUgcnVubmVyIHNpbmdsZXRvbiBpbnN0YW5jZVxuICAgKiBAcGFyYW0gY29uZmlndXJhdGlvbnNcbiAgICovXG4gIHN0YXRpYyBpbml0aWF0ZVJ1bm5lcihjb25maWd1cmF0aW9ucykge1xuICAgIGlmICghUnVubmVyLmluc3RhbmNlKSB7XG4gICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ3VyYXRpb25zO1xuICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgX2luc3RhbmNlID0gdGhpcztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBSdW5uZXIgaW5zdGFuY2VcbiAgICogQHJldHVybnMge1J1bm5lcn1cbiAgICovXG4gIGdldCBpbnN0YW5jZSgpIHtcbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29uZmlndXJhdGlvblxuICAgKiBAcGFyYW0gY29uZmlndXJhdGlvbnNcbiAgICovXG4gIHNldCBjb25maWcoY29uZmlndXJhdGlvbnMpIHtcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZ3VyYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29uZmlndXJhdGlvbnNcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuICBnZXQgY29uZmlnKCkge1xuICAgIHJldHVybiB0aGlzLmNvbmZpZztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGNhbGxiYWNrIHR5cGUgaXMgY2FsbGVkIGByZXNvbHZlQ2FsbGJhY2tgLlxuICAgKlxuICAgKiBAY2FsbGJhY2sgcmVzb2x2ZUNhbGxiYWNrXG4gICAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZVJlc3VsdFxuICAgKi9cblxuICAvKipcbiAgICogVGhpcyBjYWxsYmFjayB0eXBlIGlzIGNhbGxlZCBgcmVqZWN0Q2FsbGJhY2tgLlxuICAgKlxuICAgKiBAY2FsbGJhY2sgcmVqZWN0Q2FsbGJhY2tcbiAgICogQHBhcmFtIHtFcnJvcn0gZXJyb3JcbiAgICovXG5cbiAgLyoqXG4gICAqIEZldGNoZXMgdGhlIGRhdGEgZnJvbSB0aGUgZmV0Y2hlclxuICAgKiBAcGFyYW0ge0ZldGNoZXJ9IGZldGNoZXJcbiAgICogQHBhcmFtIHtyZXNvbHZlQ2FsbGJhY2t9IHJlc29sdmVcbiAgICogQHBhcmFtIHtyZWplY3RDYWxsYmFja30gcmVqZWN0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZmV0Y2goZmV0Y2hlciwgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgaWYgKCFfaW5zdGFuY2UpIHtcbiAgICAgIGxldCBlcnJvciA9XG4gICAgICAgICdDb25maWdyYXRpb24gbm90IHNldCBwbGVhc2UgY29uZmlncmUgZnVuY3Rpb24gJyArXG4gICAgICAgICdhbmFseXRpY3MgZWcge2Jhc2VVcmw6XCJkaGlzX2Jhc2VfdXJsXCIsIHVzZXJuYW1lOlwidXNlcm5hbWVcIiwgJyArXG4gICAgICAgICdwYXNzd29yZDpcInBhc3N3b3JkXCJ9JztcblxuICAgICAgdGhyb3cgRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICB1cmw6IF9pbnN0YW5jZS5jb25maWcuYmFzZVVybCArIGZldGNoZXIudXJsLFxuICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgIGFkYXB0ZXI6IHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IGh0dHBhZGFwdGVyIDogeGhyYWRhcHRlclxuICAgIH07XG5cbiAgICBpZiAoX2luc3RhbmNlLmNvbmZpZy51c2VybmFtZSAmJiBfaW5zdGFuY2UuY29uZmlnLnBhc3N3b3JkKSB7XG4gICAgICBjb25maWcuYXV0aCA9IHtcbiAgICAgICAgdXNlcm5hbWU6IF9pbnN0YW5jZS5jb25maWcudXNlcm5hbWUsXG4gICAgICAgIHBhc3N3b3JkOiBfaW5zdGFuY2UuY29uZmlnLnBhc3N3b3JkXG4gICAgICB9O1xuICAgIH1cbiAgICBheGlvcy5yZXF1ZXN0KGNvbmZpZykudGhlbihcbiAgICAgIHJlc3VsdHMgPT4ge1xuICAgICAgICByZXNvbHZlKGZldGNoZXIucGVyZm9ybVBvc3RQcm9jZXNzKHJlc3VsdHMuZGF0YSkpO1xuICAgICAgfSxcbiAgICAgIGVyciA9PiB7XG4gICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyBkYXRhIHJlbGF0ZWQgdG8gYSBmZXRjaGVyXG4gICAqIEBwYXJhbSB7RmV0Y2hlcn0gZmV0Y2hlclxuICAgKiBAcmV0dXJucyB7UHJvZ3Jlc3NQcm9taXNlfVxuICAgKi9cbiAgZ2V0UmVzdWx0cyhmZXRjaGVyKSB7XG4gICAgaWYgKGZldGNoZXIuX2ZldGNoZXJzKSB7XG4gICAgICAvLyBJZiBpcyBhIG11bHRpZmV0Y2hlclxuICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsUmVzdWx0cyhmZXRjaGVyKTtcbiAgICB9XG4gICAgbGV0IGhhc2hlZCA9IGZldGNoZXIuaGFzaCgpO1xuXG4gICAgaWYgKCFfaW5zdGFuY2UuY2FjaGVbaGFzaGVkXSkge1xuICAgICAgX2luc3RhbmNlLmNhY2hlW2hhc2hlZF0gPSBuZXcgUHJvZ3Jlc3NQcm9taXNlKFxuICAgICAgICAocmVzb2x2ZSwgcmVqZWN0LCBwcm9ncmVzcykgPT4ge1xuICAgICAgICAgIGlmIChmZXRjaGVyLmhhc0RlcGVuZGVuY2llcygpKSB7XG4gICAgICAgICAgICBmZXRjaGVyXG4gICAgICAgICAgICAgIC5nZXREZXBlbmRlY3lGZXRjaFJlc3VsdHMoKVxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgZmV0Y2hlci5wZXJmb3JtUHJlUHJvY2VzcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2ZldGNoKGZldGNoZXIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJycnJycnJycnI6JywgZXJyKTtcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2ZldGNoKGZldGNoZXIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gX2luc3RhbmNlLmNhY2hlW2hhc2hlZF07XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2hlcyBkYXRhIGZvciBtdWx0aXBsZSBmZXRjaGVyc1xuICAgKiBAcGFyYW0ge011bHRpRmV0Y2hlcn0gbXVsdGlmZXRjaGVyXG4gICAqIEByZXR1cm5zIHtQcm9ncmVzc1Byb21pc2V9XG4gICAqL1xuICBnZXRBbGxSZXN1bHRzKG11bHRpZmV0Y2hlcikge1xuICAgIHJldHVybiBuZXcgUHJvZ3Jlc3NQcm9taXNlKChyZXNvbHZlLCByZWplY3QsIHByb2dyZXNzKSA9PiB7XG4gICAgICBjb25zdCBwcm9taXNlcyA9IG11bHRpZmV0Y2hlci5mZXRjaGVycy5tYXAoZmV0Y2hlciA9PlxuICAgICAgICBuZXcgUnVubmVyKCkuZ2V0UmVzdWx0cyhmZXRjaGVyKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIFByb2dyZXNzUHJvbWlzZS5hbGwocHJvbWlzZXMpXG4gICAgICAgIC50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgICAgIHJlc29sdmUobXVsdGlmZXRjaGVyLnBlcmZvcm1Qb3N0UHJvY2VzcyhyZXN1bHRzKSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgc2V0dGxlID0gcmVxdWlyZSgnLi8uLi9jb3JlL3NldHRsZScpO1xudmFyIGJ1aWxkVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgcGFyc2VIZWFkZXJzID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL3BhcnNlSGVhZGVycycpO1xudmFyIGlzVVJMU2FtZU9yaWdpbiA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc1VSTFNhbWVPcmlnaW4nKTtcbnZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJy4uL2NvcmUvY3JlYXRlRXJyb3InKTtcbnZhciBidG9hID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5idG9hICYmIHdpbmRvdy5idG9hLmJpbmQod2luZG93KSkgfHwgcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2J0b2EnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB4aHJBZGFwdGVyKGNvbmZpZykge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhO1xuICAgIHZhciByZXF1ZXN0SGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xuXG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpKSB7XG4gICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddOyAvLyBMZXQgdGhlIGJyb3dzZXIgc2V0IGl0XG4gICAgfVxuXG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB2YXIgbG9hZEV2ZW50ID0gJ29ucmVhZHlzdGF0ZWNoYW5nZSc7XG4gICAgdmFyIHhEb21haW4gPSBmYWxzZTtcblxuICAgIC8vIEZvciBJRSA4LzkgQ09SUyBzdXBwb3J0XG4gICAgLy8gT25seSBzdXBwb3J0cyBQT1NUIGFuZCBHRVQgY2FsbHMgYW5kIGRvZXNuJ3QgcmV0dXJucyB0aGUgcmVzcG9uc2UgaGVhZGVycy5cbiAgICAvLyBET04nVCBkbyB0aGlzIGZvciB0ZXN0aW5nIGIvYyBYTUxIdHRwUmVxdWVzdCBpcyBtb2NrZWQsIG5vdCBYRG9tYWluUmVxdWVzdC5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICd0ZXN0JyAmJlxuICAgICAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB3aW5kb3cuWERvbWFpblJlcXVlc3QgJiYgISgnd2l0aENyZWRlbnRpYWxzJyBpbiByZXF1ZXN0KSAmJlxuICAgICAgICAhaXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSB7XG4gICAgICByZXF1ZXN0ID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuICAgICAgbG9hZEV2ZW50ID0gJ29ubG9hZCc7XG4gICAgICB4RG9tYWluID0gdHJ1ZTtcbiAgICAgIHJlcXVlc3Qub25wcm9ncmVzcyA9IGZ1bmN0aW9uIGhhbmRsZVByb2dyZXNzKCkge307XG4gICAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7fTtcbiAgICB9XG5cbiAgICAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uXG4gICAgaWYgKGNvbmZpZy5hdXRoKSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJztcbiAgICAgIHZhciBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkIHx8ICcnO1xuICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXG4gICAgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVNcbiAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblxuICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGVcbiAgICByZXF1ZXN0W2xvYWRFdmVudF0gPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuICAgICAgaWYgKCFyZXF1ZXN0IHx8IChyZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQgJiYgIXhEb21haW4pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIHJlcXVlc3QgZXJyb3JlZCBvdXQgYW5kIHdlIGRpZG4ndCBnZXQgYSByZXNwb25zZSwgdGhpcyB3aWxsIGJlXG4gICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgIC8vIHdpbGwgcmV0dXJuIHN0YXR1cyBhcyAwIGV2ZW4gdGhvdWdoIGl0J3MgYSBzdWNjZXNzZnVsIHJlcXVlc3RcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG4gICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gJ2dldEFsbFJlc3BvbnNlSGVhZGVycycgaW4gcmVxdWVzdCA/IHBhcnNlSGVhZGVycyhyZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSA6IG51bGw7XG4gICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIWNvbmZpZy5yZXNwb25zZVR5cGUgfHwgY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnID8gcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIC8vIElFIHNlbmRzIDEyMjMgaW5zdGVhZCBvZiAyMDQgKGh0dHBzOi8vZ2l0aHViLmNvbS9heGlvcy9heGlvcy9pc3N1ZXMvMjAxKVxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzID09PSAxMjIzID8gMjA0IDogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzID09PSAxMjIzID8gJ05vIENvbnRlbnQnIDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG4gICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG4gICAgICB9O1xuXG4gICAgICBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcigndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICB2YXIgY29va2llcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb29raWVzJyk7XG5cbiAgICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cbiAgICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG4gICAgICAgICAgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIHJlcXVlc3RIZWFkZXJzW2NvbmZpZy54c3JmSGVhZGVyTmFtZV0gPSB4c3JmVmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3RcbiAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcbiAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0RGF0YSA9PT0gJ3VuZGVmaW5lZCcgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG4gICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcud2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEV4cGVjdGVkIERPTUV4Y2VwdGlvbiB0aHJvd24gYnkgYnJvd3NlcnMgbm90IGNvbXBhdGlibGUgWE1MSHR0cFJlcXVlc3QgTGV2ZWwgMi5cbiAgICAgICAgLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi5cbiAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG4gICAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG4vLyBGYWxsYmFjayBmb3IgZW5naW5lcyB0aGF0IGRvbid0IHN1cHBvcnQgU3ltYm9sXG5jb25zdCBMSVNURU5FUlMgPSBTeW1ib2wgPyBTeW1ib2woKSA6ICdfX2xpc3RlbmVycyc7XG5cbmNsYXNzIFByb2dyZXNzUHJvbWlzZSBleHRlbmRzIFByb21pc2Uge1xuICBjb25zdHJ1Y3RvcihleGVjdXRvcikge1xuICAgIHN1cGVyKChyZXNvbHZlLCByZWplY3QpID0+IGV4ZWN1dG9yKHJlc29sdmUsIHJlamVjdCxcbiAgICAgIC8vIFBhc3MgbWV0aG9kIGZvciBwYXNzaW5nIHByb2dyZXNzIHRvIGxpc3RlbmVyXG4gICAgICB2YWx1ZSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbTElTVEVORVJTXS5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKHZhbHVlKSk7XG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KSk7XG4gICAgdGhpc1tMSVNURU5FUlNdID0gW107XG4gIH1cbiAgcHJvZ3Jlc3MoaGFuZGxlcikge1xuICAgIGlmKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQUk9HUkVTU19SRVFVSVJFU19GVU5DVElPTicpO1xuICAgIHRoaXNbTElTVEVORVJTXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHN0YXRpYyBhbGwocHJvbWlzZXMpIHtcbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KHByb21pc2VzLmxlbmd0aCk7XG4gICAgY29uc3QgbGVuZ3RoID0gcHJvbWlzZXMubGVuZ3RoO1xuICAgIGxldCByZXNvbHZlQ291bnQgPSAwO1xuICAgIHJldHVybiBuZXcgUHJvZ3Jlc3NQcm9taXNlKChyZXNvbHZlLCByZWplY3QsIHByb2dyZXNzKSA9PiB7XG4gICAgICBwcm9taXNlcy5mb3JFYWNoKChwcm9taXNlLCBpbmRleCkgPT4ge1xuICAgICAgICBwcm9taXNlLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICByZXN1bHRzW2luZGV4XSA9IHJlc3VsdDtcbiAgICAgICAgICByZXN1bHRzLnByb3BvcnRpb24gPSArK3Jlc29sdmVDb3VudCAvIGxlbmd0aDtcbiAgICAgICAgICBwcm9ncmVzcyhyZXN1bHRzKTtcbiAgICAgICAgICBpZihyZXNvbHZlQ291bnQgPT09IGxlbmd0aCkgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgfSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG4gIHN0YXRpYyBzZXF1ZW5jZShpbnB1dHMsIGhhbmRsZXIpIHtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgY29uc3QgbGVuZ3RoID0gaW5wdXRzLmxlbmd0aDtcbiAgICBsZXQgcmVzb2x2ZUNvdW50ID0gMDtcbiAgICByZXR1cm4gbmV3IFByb2dyZXNzUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0LCBwcm9ncmVzcykgPT4ge1xuICAgICAgZnVuY3Rpb24gaW52b2tlTmV4dCgpIHtcbiAgICAgICAgaGFuZGxlci5jYWxsKG51bGwsIGlucHV0c1tyZXN1bHRzLmxlbmd0aF0pXG4gICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgcmVzdWx0cy5wcm9wb3J0aW9uID0gKytyZXNvbHZlQ291bnQgLyBsZW5ndGg7XG4gICAgICAgICAgICBwcm9ncmVzcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGlmKHJlc3VsdHMubGVuZ3RoID09PSBsZW5ndGgpIHJlc29sdmUocmVzdWx0cyk7XG4gICAgICAgICAgICBlbHNlIGludm9rZU5leHQoKTtcbiAgICAgICAgICB9KS5jYXRjaChyZWplY3QpOztcbiAgICAgIH1cbiAgICAgIGludm9rZU5leHQoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByb2dyZXNzUHJvbWlzZTtcblxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgbm9ybWFsaXplSGVhZGVyTmFtZSA9IHJlcXVpcmUoJy4vaGVscGVycy9ub3JtYWxpemVIZWFkZXJOYW1lJyk7XG5cbnZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcbiAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG59O1xuXG5mdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHtcbiAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzKSAmJiB1dGlscy5pc1VuZGVmaW5lZChoZWFkZXJzWydDb250ZW50LVR5cGUnXSkpIHtcbiAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkge1xuICB2YXIgYWRhcHRlcjtcbiAgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMveGhyJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gRm9yIG5vZGUgdXNlIEhUVFAgYWRhcHRlclxuICAgIGFkYXB0ZXIgPSByZXF1aXJlKCcuL2FkYXB0ZXJzL2h0dHAnKTtcbiAgfVxuICByZXR1cm4gYWRhcHRlcjtcbn1cblxudmFyIGRlZmF1bHRzID0ge1xuICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLFxuXG4gIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTtcbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0ZpbGUoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQmxvYihkYXRhKVxuICAgICkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc09iamVjdChkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkgeyAvKiBJZ25vcmUgKi8gfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgLyoqXG4gICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLlxuICAgKi9cbiAgdGltZW91dDogMCxcblxuICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cbiAgbWF4Q29udGVudExlbmd0aDogLTEsXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfVxufTtcblxuZGVmYXVsdHMuaGVhZGVycyA9IHtcbiAgY29tbW9uOiB7XG4gICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gIH1cbn07XG5cbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH07XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW5oYW5jZUVycm9yID0gcmVxdWlyZSgnLi9lbmhhbmNlRXJyb3InKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRXJyb3IobWVzc2FnZSwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufVxuXG5DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xufTtcblxuQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2F4aW9zJyk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG52YXIgQXhpb3MgPSByZXF1aXJlKCcuL2NvcmUvQXhpb3MnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpIHtcbiAgdmFyIGNvbnRleHQgPSBuZXcgQXhpb3MoZGVmYXVsdENvbmZpZyk7XG4gIHZhciBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxudmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXG4vLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2VcbmF4aW9zLkF4aW9zID0gQXhpb3M7XG5cbi8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbmF4aW9zLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykge1xuICByZXR1cm4gY3JlYXRlSW5zdGFuY2UodXRpbHMubWVyZ2UoZGVmYXVsdHMsIGluc3RhbmNlQ29uZmlnKSk7XG59O1xuXG4vLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW5cbmF4aW9zLkNhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbCcpO1xuYXhpb3MuQ2FuY2VsVG9rZW4gPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWxUb2tlbicpO1xuYXhpb3MuaXNDYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9pc0NhbmNlbCcpO1xuXG4vLyBFeHBvc2UgYWxsL3NwcmVhZFxuYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59O1xuYXhpb3Muc3ByZWFkID0gcmVxdWlyZSgnLi9oZWxwZXJzL3NwcmVhZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGF4aW9zO1xuXG4vLyBBbGxvdyB1c2Ugb2YgZGVmYXVsdCBpbXBvcnQgc3ludGF4IGluIFR5cGVTY3JpcHRcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBheGlvcztcbiIsIi8qIVxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cblxuLy8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuLy8gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcbiAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcbn1cblxuLy8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cbmZ1bmN0aW9uIGlzU2xvd0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxufVxuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZGVmYXVsdHMgPSByZXF1aXJlKCcuLy4uL2RlZmF1bHRzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgSW50ZXJjZXB0b3JNYW5hZ2VyID0gcmVxdWlyZSgnLi9JbnRlcmNlcHRvck1hbmFnZXInKTtcbnZhciBkaXNwYXRjaFJlcXVlc3QgPSByZXF1aXJlKCcuL2Rpc3BhdGNoUmVxdWVzdCcpO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZUNvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBBeGlvcyhpbnN0YW5jZUNvbmZpZykge1xuICB0aGlzLmRlZmF1bHRzID0gaW5zdGFuY2VDb25maWc7XG4gIHRoaXMuaW50ZXJjZXB0b3JzID0ge1xuICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcbiAgICByZXNwb25zZTogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpXG4gIH07XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHNwZWNpZmljIGZvciB0aGlzIHJlcXVlc3QgKG1lcmdlZCB3aXRoIHRoaXMuZGVmYXVsdHMpXG4gKi9cbkF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChjb25maWcpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIC8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUElcbiAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uZmlnID0gdXRpbHMubWVyZ2Uoe1xuICAgICAgdXJsOiBhcmd1bWVudHNbMF1cbiAgICB9LCBhcmd1bWVudHNbMV0pO1xuICB9XG5cbiAgY29uZmlnID0gdXRpbHMubWVyZ2UoZGVmYXVsdHMsIHttZXRob2Q6ICdnZXQnfSwgdGhpcy5kZWZhdWx0cywgY29uZmlnKTtcbiAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTtcblxuICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG4gIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG4gIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG4gIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG4gICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcbiAgICB9XG4gIH0pO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi9jcmVhdGVFcnJvcicpO1xuXG4vKipcbiAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgLy8gTm90ZTogc3RhdHVzIGlzIG5vdCBleHBvc2VkIGJ5IFhEb21haW5SZXF1ZXN0XG4gIGlmICghcmVzcG9uc2Uuc3RhdHVzIHx8ICF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJyArIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlLmNvbmZpZyxcbiAgICAgIG51bGwsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBVcGRhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIGNvbmZpZywgZXJyb3IgY29kZSwgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcuXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVzcG9uc2VdIFRoZSByZXNwb25zZS5cbiAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSkge1xuICBlcnJvci5jb25maWcgPSBjb25maWc7XG4gIGlmIChjb2RlKSB7XG4gICAgZXJyb3IuY29kZSA9IGNvZGU7XG4gIH1cbiAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIHJldHVybiBlcnJvcjtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG4gICAgcmVwbGFjZSgvJTQwL2dpLCAnQCcpLlxuICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cbiAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cbiAgICByZXBsYWNlKC8lMkMvZ2ksICcsJykuXG4gICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG4gICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuICAgIHJlcGxhY2UoLyU1RC9naSwgJ10nKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBiYXNlIG9mIHRoZSB1cmwgKGUuZy4sIGh0dHA6Ly93d3cuZ29vZ2xlLmNvbSlcbiAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICBpZiAoIXBhcmFtcykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cblxuICB2YXIgc2VyaWFsaXplZFBhcmFtcztcbiAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zU2VyaWFsaXplcihwYXJhbXMpO1xuICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnRzID0gW107XG5cbiAgICB1dGlscy5mb3JFYWNoKHBhcmFtcywgZnVuY3Rpb24gc2VyaWFsaXplKHZhbCwga2V5KSB7XG4gICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuICAgICAgICBrZXkgPSBrZXkgKyAnW10nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gW3ZhbF07XG4gICAgICB9XG5cbiAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcbiAgICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2KSkge1xuICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcbiAgICAgICAgICB2ID0gSlNPTi5zdHJpbmdpZnkodik7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJ0cy5qb2luKCcmJyk7XG4gIH1cblxuICBpZiAoc2VyaWFsaXplZFBhcmFtcykge1xuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8vIEhlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlXG4vLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG52YXIgaWdub3JlRHVwbGljYXRlT2YgPSBbXG4gICdhZ2UnLCAnYXV0aG9yaXphdGlvbicsICdjb250ZW50LWxlbmd0aCcsICdjb250ZW50LXR5cGUnLCAnZXRhZycsXG4gICdleHBpcmVzJywgJ2Zyb20nLCAnaG9zdCcsICdpZi1tb2RpZmllZC1zaW5jZScsICdpZi11bm1vZGlmaWVkLXNpbmNlJyxcbiAgJ2xhc3QtbW9kaWZpZWQnLCAnbG9jYXRpb24nLCAnbWF4LWZvcndhcmRzJywgJ3Byb3h5LWF1dGhvcml6YXRpb24nLFxuICAncmVmZXJlcicsICdyZXRyeS1hZnRlcicsICd1c2VyLWFnZW50J1xuXTtcblxuLyoqXG4gKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG4gKlxuICogYGBgXG4gKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uXG4gKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXG4gKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuICogYGBgXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3RcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuICB2YXIgcGFyc2VkID0ge307XG4gIHZhciBrZXk7XG4gIHZhciB2YWw7XG4gIHZhciBpO1xuXG4gIGlmICghaGVhZGVycykgeyByZXR1cm4gcGFyc2VkOyB9XG5cbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcbiAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG4gICAga2V5ID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cigwLCBpKSkudG9Mb3dlckNhc2UoKTtcbiAgICB2YWwgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7XG5cbiAgICBpZiAoa2V5KSB7XG4gICAgICBpZiAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2YuaW5kZXhPZihrZXkpID49IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gJ3NldC1jb29raWUnKSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gKHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gOiBbXSkuY29uY2F0KFt2YWxdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcGFyc2VkO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4gIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLlxuICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgdmFyIG9yaWdpblVSTDtcblxuICAgIC8qKlxuICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7XG4gICAgICB2YXIgaHJlZiA9IHVybDtcblxuICAgICAgaWYgKG1zaWUpIHtcbiAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xuICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICAgICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XG4gICAgICB9XG5cbiAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gICAgICAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzXG4gICAgICByZXR1cm4ge1xuICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuICAgICAgICBwcm90b2NvbDogdXJsUGFyc2luZ05vZGUucHJvdG9jb2wgPyB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbC5yZXBsYWNlKC86JC8sICcnKSA6ICcnLFxuICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG4gICAgICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsXG4gICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcbiAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcbiAgICAgICAgcGF0aG5hbWU6ICh1cmxQYXJzaW5nTm9kZS5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJykgP1xuICAgICAgICAgICAgICAgICAgdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOlxuICAgICAgICAgICAgICAgICAgJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcbiAgICAgIH07XG4gICAgfVxuXG4gICAgb3JpZ2luVVJMID0gcmVzb2x2ZVVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cbiAgICAvKipcbiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcbiAgICAgIHZhciBwYXJzZWQgPSAodXRpbHMuaXNTdHJpbmcocmVxdWVzdFVSTCkpID8gcmVzb2x2ZVVSTChyZXF1ZXN0VVJMKSA6IHJlcXVlc3RVUkw7XG4gICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG4gICAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3QpO1xuICAgIH07XG4gIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudnMgKHdlYiB3b3JrZXJzLCByZWFjdC1uYXRpdmUpIGxhY2sgbmVlZGVkIHN1cHBvcnQuXG4gIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gIH0pKClcbik7XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIGJ0b2EgcG9seWZpbGwgZm9yIElFPDEwIGNvdXJ0ZXN5IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXZpZGNoYW1iZXJzL0Jhc2U2NC5qc1xuXG52YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuXG5mdW5jdGlvbiBFKCkge1xuICB0aGlzLm1lc3NhZ2UgPSAnU3RyaW5nIGNvbnRhaW5zIGFuIGludmFsaWQgY2hhcmFjdGVyJztcbn1cbkUucHJvdG90eXBlID0gbmV3IEVycm9yO1xuRS5wcm90b3R5cGUuY29kZSA9IDU7XG5FLnByb3RvdHlwZS5uYW1lID0gJ0ludmFsaWRDaGFyYWN0ZXJFcnJvcic7XG5cbmZ1bmN0aW9uIGJ0b2EoaW5wdXQpIHtcbiAgdmFyIHN0ciA9IFN0cmluZyhpbnB1dCk7XG4gIHZhciBvdXRwdXQgPSAnJztcbiAgZm9yIChcbiAgICAvLyBpbml0aWFsaXplIHJlc3VsdCBhbmQgY291bnRlclxuICAgIHZhciBibG9jaywgY2hhckNvZGUsIGlkeCA9IDAsIG1hcCA9IGNoYXJzO1xuICAgIC8vIGlmIHRoZSBuZXh0IHN0ciBpbmRleCBkb2VzIG5vdCBleGlzdDpcbiAgICAvLyAgIGNoYW5nZSB0aGUgbWFwcGluZyB0YWJsZSB0byBcIj1cIlxuICAgIC8vICAgY2hlY2sgaWYgZCBoYXMgbm8gZnJhY3Rpb25hbCBkaWdpdHNcbiAgICBzdHIuY2hhckF0KGlkeCB8IDApIHx8IChtYXAgPSAnPScsIGlkeCAlIDEpO1xuICAgIC8vIFwiOCAtIGlkeCAlIDEgKiA4XCIgZ2VuZXJhdGVzIHRoZSBzZXF1ZW5jZSAyLCA0LCA2LCA4XG4gICAgb3V0cHV0ICs9IG1hcC5jaGFyQXQoNjMgJiBibG9jayA+PiA4IC0gaWR4ICUgMSAqIDgpXG4gICkge1xuICAgIGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaWR4ICs9IDMgLyA0KTtcbiAgICBpZiAoY2hhckNvZGUgPiAweEZGKSB7XG4gICAgICB0aHJvdyBuZXcgRSgpO1xuICAgIH1cbiAgICBibG9jayA9IGJsb2NrIDw8IDggfCBjaGFyQ29kZTtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJ0b2E7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZVxuICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgIHJldHVybiB7XG4gICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlKSB7XG4gICAgICAgIHZhciBjb29raWUgPSBbXTtcbiAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXG4gICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkb21haW4pKSB7XG4gICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58O1xcXFxzKikoJyArIG5hbWUgKyAnKT0oW147XSopJykpO1xuICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgICAgfSxcblxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgICAgfVxuICAgIH07XG4gIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9KSgpXG4pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpIHtcbiAgdGhpcy5oYW5kbGVycyA9IFtdO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICpcbiAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuICAgIGZ1bGZpbGxlZDogZnVsZmlsbGVkLFxuICAgIHJlamVjdGVkOiByZWplY3RlZFxuICB9KTtcbiAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYFxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHtcbiAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7XG4gICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gKlxuICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcbiAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcbiAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG4gICAgaWYgKGggIT09IG51bGwpIHtcbiAgICAgIGZuKGgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVyY2VwdG9yTWFuYWdlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBpc0Fic29sdXRlVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwnKTtcbnZhciBjb21iaW5lVVJMcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb21iaW5lVVJMcycpO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIFN1cHBvcnQgYmFzZVVSTCBjb25maWdcbiAgaWYgKGNvbmZpZy5iYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKGNvbmZpZy51cmwpKSB7XG4gICAgY29uZmlnLnVybCA9IGNvbWJpbmVVUkxzKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgfVxuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnMgfHwge31cbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICByZXNwb25zZS5kYXRhLFxuICAgICAgcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcbiAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHtcbiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbi8qKlxuICogVHJhbnNmb3JtIHRoZSBkYXRhIGZvciBhIHJlcXVlc3Qgb3IgYSByZXNwb25zZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gZGF0YSBUaGUgZGF0YSB0byBiZSB0cmFuc2Zvcm1lZFxuICogQHBhcmFtIHtBcnJheX0gaGVhZGVycyBUaGUgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3Qgb3IgcmVzcG9uc2VcbiAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb259IGZucyBBIHNpbmdsZSBmdW5jdGlvbiBvciBBcnJheSBvZiBmdW5jdGlvbnNcbiAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybWVkIGRhdGFcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm1EYXRhKGRhdGEsIGhlYWRlcnMsIGZucykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuICAgIGRhdGEgPSBmbihkYXRhLCBoZWFkZXJzKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcbiAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gIHJldHVybiAvXihbYS16XVthLXpcXGRcXCtcXC1cXC5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkge1xuICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuICAgIDogYmFzZVVSTDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG4gICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICB9KTtcblxuICB2YXIgdG9rZW4gPSB0aGlzO1xuICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkge1xuICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7XG4gICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG4gKlxuICogQ29tbW9uIHVzZSBjYXNlIHdvdWxkIGJlIHRvIHVzZSBgRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5YC5cbiAqXG4gKiAgYGBganNcbiAqICBmdW5jdGlvbiBmKHgsIHksIHopIHt9XG4gKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG4gKiAgZi5hcHBseShudWxsLCBhcmdzKTtcbiAqICBgYGBcbiAqXG4gKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cbiAqXG4gKiAgYGBganNcbiAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG4gKiAgYGBgXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoYXJyKSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG4gIH07XG59O1xuIiwiLyoqXG4gKiBUaGlzIGlzIHRoZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcHJvY2Vzc29yXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9jZXNzIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBwcm9jZXNzb3JcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBvc3RQcm9jZXNzb3JzID0gW107XG4gICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgcHJvY2Vzc29yIGhhcyBkZXBlbmRlbmNpZXNcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0gQm9vbGVhbiB2YWx1ZSBvZiB0aGUgcmVzdWx0XG4gICAqL1xuICBoYXNEZXBlbmRlbmNpZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDA7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBkZXBlbmRlbmN5IHRvIHRoZSBwcm9jZXNzb3JcbiAgICogQHBhcmFtIHtEZXBlbmRlbmN5fSBkZXBlbmRlbmN5IC0gVGhlXG4gICAqIEBkZXByZWNhdGVkIFVzZSBhZGRQcmVQcm9jZXNzXG4gICAqIEByZXR1cm5zIHtQcm9jZXNzfVxuICAgKi9cbiAgcHJlUHJvY2VzcyhkZXBlbmRlbmN5KSB7XG4gICAgdGhpcy5kZXBlbmRlbmNpZXMucHVzaChkZXBlbmRlbmN5KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGRlcGVuZGVuY3kgdG8gdGhlIHByb2Nlc3NvclxuICAgKiBAcGFyYW0ge0RlcGVuZGVuY3l9IGRlcGVuZGVuY3lcbiAgICogQHJldHVybnMge1Byb2Nlc3N9XG4gICAqL1xuICBhZGRQcmVQcm9jZXNzKGRlcGVuZGVuY3kpIHtcbiAgICB0aGlzLmRlcGVuZGVuY2llcy5wdXNoKGRlcGVuZGVuY3kpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgY2FsbGJhY2sgcHJvY2VzcyB0aGUgb3V0cHV0IHByb2Nlc3NcbiAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAqIEBkZXByZWNhdGVkIFVzZSBhZGRQb3N0UHJvY2Vzc1xuICAgKiBAcmV0dXJucyB7UHJvY2Vzc31cbiAgICovXG4gIHBvc3RQcm9jZXNzKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wb3N0UHJvY2Vzc29ycy5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGNhbGxiYWNrIHByb2Nlc3MgdGhlIG91dHB1dCBwcm9jZXNzXG4gICAqIEBwYXJhbSBjYWxsYmFja1xuICAgKiBAcmV0dXJucyB7UHJvY2Vzc31cbiAgICovXG4gIGFkZFBvc3RQcm9jZXNzKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wb3N0UHJvY2Vzc29ycy5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBwcmUgcHJvY2Vzc1xuICAgKiBAcmV0dXJucyB7UHJvY2Vzc31cbiAgICovXG4gIHBlcmZvcm1QcmVQcm9jZXNzKCkge1xuICAgIHRoaXMuZGVwZW5kZW5jaWVzLmZvckVhY2goZGVwZW5kZW5jeSA9PiB7XG4gICAgICBkZXBlbmRlbmN5LnByb2Nlc3NDYWxsYmFjayhkZXBlbmRlbmN5LnByb2Nlc3MuX3Jlc3VsdHMsIHRoaXMpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIHBvc3QgcHJvY2VzcyBhZnRlciB0aGUgcHJvY2VzcyBoYXMgZW5kZWRcbiAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHBlcmZvcm1Qb3N0UHJvY2VzcyhkYXRhKSB7XG4gICAgdGhpcy5fcmVzdWx0cyA9IGRhdGE7XG4gICAgbGV0IGRhdGFUb1Byb2Nlc3MgPSBkYXRhO1xuXG4gICAgdGhpcy5wb3N0UHJvY2Vzc29ycy5mb3JFYWNoKGNhbGxiYWNrID0+IHtcbiAgICAgIGRhdGFUb1Byb2Nlc3MgPSBjYWxsYmFjayhkYXRhVG9Qcm9jZXNzKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZGF0YVRvUHJvY2VzcztcbiAgfVxufVxuIiwiaW1wb3J0IHsgUnVubmVyIH0gZnJvbSAnLi9ydW5uZXInO1xuaW1wb3J0IHsgUHJvY2VzcyB9IGZyb20gJy4vcHJvY2Vzcyc7XG5pbXBvcnQgUHJvZ3Jlc3NQcm9taXNlIGZyb20gJ3Byb2dyZXNzLXByb21pc2UnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGZldGNoZXIgcHJvY2Vzc1xuICpAZXh0ZW5kcyBQcm9jZXNzXG4gKi9cbmV4cG9ydCBjbGFzcyBGZXRjaGVyIGV4dGVuZHMgUHJvY2VzcyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZmV0aGNlclxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wYXJhbWV0ZXJzID0ge307XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgVVJMIFBhcmFtZXRlcnNcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldCBfdXJsUGFyYW1ldGVycygpIHtcbiAgICBsZXQgdXJsID0gJyc7XG5cbiAgICBPYmplY3Qua2V5cyh0aGlzLnBhcmFtZXRlcnMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgIGlmICh1cmwgIT09ICcnKSB7XG4gICAgICAgIHVybCArPSAnJic7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRoaXMucGFyYW1ldGVyc1trZXldID09PSAnc3RyaW5nJykge1xuICAgICAgICB1cmwgKz0ga2V5ICsgJz0nICsgdGhpcy5wYXJhbWV0ZXJzW2tleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnBhcmFtZXRlcnNba2V5XSkuZm9yRWFjaChrZXkyID0+IHtcbiAgICAgICAgICBpZiAodXJsICE9PSAnJykge1xuICAgICAgICAgICAgdXJsICs9ICcmJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMucGFyYW1ldGVyc1trZXldW2tleTJdID09PSAnJykge1xuICAgICAgICAgICAgdXJsICs9IGtleSArICc9JyArIGtleTI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVybCArPSBrZXkgKyAnPScgKyBrZXkyICsgJzonICsgdGhpcy5wYXJhbWV0ZXJzW2tleV1ba2V5Ml07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHVybFxuICAgKiBAdGhyb3dzIEltcGxlbWVudGF0aW9uIEVycm9yXG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2hvdWxkIGltcGxlbWVudCB1cmwgZ2VuZXJhdGlvbicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJ1bm5pbmcgcHJvY2VzcyBzdGFydGVkXG4gICAqIEByZXR1cm5zIHtQcm9ncmVzc1Byb21pc2V9XG4gICAqL1xuICBnZXQoKSB7XG4gICAgcmV0dXJuIG5ldyBSdW5uZXIoKS5nZXRSZXN1bHRzKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBwYXJlbWV0ZXJzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbWV0ZXJzIC0gVGhlIHBhcmFtZXRlcnMgdG8gYmUgcGFzc2VkIHRvIHRoZSB1cmxcbiAgICogQHJldHVybnMge0ZldGNoZXJ9IC0gT2JqZWN0IG9mIHRoZSBmZXRjaGVyXG4gICAqL1xuICBzZXRQYXJhbWV0ZXJzKHBhcmFtZXRlcnMpIHtcbiAgICBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICB0aGlzLnBhcmFtZXRlcnNba2V5XSA9IHBhcmFtZXRlcnNba2V5XTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgRGVwZW5kZW5jeSByZXN1bHRzXG4gICAqIEByZXR1cm5zIHtQcm9ncmVzc1Byb21pc2V9XG4gICAqL1xuICBnZXREZXBlbmRlY3lGZXRjaFJlc3VsdHMoKSB7XG4gICAgY29uc3QgcHJvbWlzZXMgPSB0aGlzLmRlcGVuZGVuY2llcy5tYXAoZGVwZW5kZW5jeSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFJ1bm5lcigpLmdldFJlc3VsdHMoZGVwZW5kZW5jeS5wcm9jZXNzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBQcm9ncmVzc1Byb21pc2UuYWxsKHByb21pc2VzKTtcbiAgfVxuICBfZW5jb2RlNjQoYnVmZikge1xuICAgIHJldHVybiBidG9hKG5ldyBVaW50OEFycmF5KGJ1ZmYpLnJlZHVjZSgocywgYikgPT4gcyArIFN0cmluZy5mcm9tQ2hhckNvZGUoYiksICcnKSk7XG4gIH1cbiAgaGFzaCgpIHtcbiAgICByZXR1cm4gdGhpcy51cmw7XG4gIH1cbn1cbiIsIi8qKlxuICogVGhpcyByZXByZXNlbnRzIHRoZSBBbmFseXRpY3MgUmVzdWx0c1xuICpcbiAqL1xuZXhwb3J0IGNsYXNzIFJvdyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuYSBBbmFseXRpY3MgT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IHJvdyAtIFRoZSBhbmFseXRpY3Mgcm93XG4gICAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgLSBUaGUgYW5hbHl0aWNzIGhlYWRlcnNcbiAgICogQHBhcmFtIHtPYmplY3R9IG1ldGFEYXRhIC0gVGhlIGFuYWx5dGljcyBtZXRhZGF0YVxuICAgKi9cbiAgY29uc3RydWN0b3Iocm93LCBoZWFkZXJzLCBtZXRhRGF0YSkge1xuICAgIHRoaXMucm93ID0gcm93O1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgdGhpcy5tZXRhRGF0YSA9IG1ldGFEYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRpbWVuc2lvbiBkZXRhaWxzIG9mIHRoZSBhbmFseXRpY3Mgcm93XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIFRoZSBpZCBvZiB0aGUgZGltZW5zaW9uXG4gICAqIEByZXR1cm5zIHtPYmplY3R8e2lkLG5hbWUscGF0aH19IC0gVGhlIGRhdGEgb2JqZWN0IHdpdGggbmFtZSBhbmQgaWRcbiAgICovXG4gIGRpbWVuc2lvbihpZCkge1xuICAgIHZhciBpID0gLTEsXG4gICAgICBuYW1lID0gJyc7XG5cbiAgICB0aGlzLmhlYWRlcnMuZm9yRWFjaCgoaGVhZGVyLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKGhlYWRlci5uYW1lID09PSBpZCkge1xuICAgICAgICBpID0gaW5kZXg7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKHRoaXMubWV0YURhdGEubmFtZXMpIHtcbiAgICAgIG5hbWUgPSB0aGlzLm1ldGFEYXRhLm5hbWVzW3RoaXMucm93W2ldXTtcbiAgICB9IGVsc2UgaWYgKHRoaXMubWV0YURhdGEuaXRlbXMpIHtcbiAgICAgIG5hbWUgPSB0aGlzLm1ldGFEYXRhLml0ZW1zW3RoaXMucm93W2ldXSA/IHRoaXMubWV0YURhdGEuaXRlbXNbdGhpcy5yb3dbaV1dLm5hbWUgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBpZDogdGhpcy5yb3dbaV0sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcGF0aDpcbiAgICAgICAgdGhpcy5tZXRhRGF0YS5vdUhpZXJhcmNoeSAmJlxuICAgICAgICB0aGlzLm1ldGFEYXRhLm91SGllcmFyY2h5W3RoaXMucm93W2ldXSAhPT0gdW5kZWZpbmVkID8gdGhpcy5tZXRhRGF0YS5vdUhpZXJhcmNoeVt0aGlzLnJvd1tpXV0gOiB1bmRlZmluZWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRhdGEgZGV0YWlscyBvZiB0aGUgYW5hbHl0aWNzIHJvd1xuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fHtpZCxuYW1lfX0gLSBUaGUgZGF0YSBvYmplY3Qgd2l0aCBuYW1lIGFuZCBpZFxuICAgKi9cbiAgZ2V0IGR4KCkge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbignZHgnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwZXJpb2QgZGV0YWlscyBvZiB0aGUgYW5hbHl0aWNzIHJvd1xuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fHtpZCxuYW1lfX0gLSBUaGUgcGVyaW9kIG9iamVjdFxuICAgKi9cbiAgZ2V0IHBlKCkge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbigncGUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBvcmdhbmlzYXRpb24gdW5pdCBkZXRhaWxzIG9mIHRoZSBhbmFseXRpY3Mgcm93XG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R8e2lkLG5hbWUscGF0aH19IC0gVGhlIG9yZ2FuaXNhdGlvbiB1bml0IG9iamVjdFxuICAgKi9cbiAgZ2V0IG91KCkge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbignb3UnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSB2YWx1ZSBpbiBhIHJvd1xuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfSAtIFRoZSB2YWx1ZVxuICAgKi9cbiAgZ2V0IHZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLmRpbWVuc2lvbigndmFsdWUnKS5pZDtcbiAgfVxufVxuIiwiaW1wb3J0IHtSb3d9IGZyb20gJy4vcm93JztcblxuLyoqXG4gKiBUaGlzIHJlcHJlc2VudHMgdGhlIEFuYWx5dGljcyBSZXN1bHRzXG4gKlxuICovXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzUmVzdWx0IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW5hIEFuYWx5dGljcyBPYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IC0gREhJUyBBbmFseXRpY3Mgb2JqZWN0XG4gICAqL1xuICBjb25zdHJ1Y3RvcihhbmFseXRpY3NPYmplY3QpIHtcbiAgICB0aGlzLl9kYXRhID0gYW5hbHl0aWNzT2JqZWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIEFuYWx5dGljcyBIZWFkZXJzIEFycmF5XG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheX0gLSBESElTIEFuYWx5dGljcyBoZWFkZXJzXG4gICAqL1xuICBnZXQgaGVhZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5oZWFkZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIEFuYWx5dGljcyBNZXRhZGF0YSBPYmplY3RcbiAgICpcbiAgICogQHJldHVybnMgeyp8bWV0YURhdGF8e2RpbWVuc2lvbnMsIG5hbWVzLCBkeCwgcGUsIG91LCBjb318e291SGllcmFyY2h5LCBpdGVtcywgZGltZW5zaW9uc319XG4gICAqL1xuICBnZXQgbWV0YURhdGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEubWV0YURhdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcm93cyBvZiB0aGUgYW5hbHl0aWNzIG9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAqL1xuICBnZXQgcm93cygpIHtcbiAgICBsZXQgcm93cyA9IFtdO1xuXG4gICAgdGhpcy5fZGF0YS5yb3dzLmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgcm93cy5wdXNoKG5ldyBSb3cocm93LCB0aGlzLmhlYWRlcnMsIHRoaXMubWV0YURhdGEpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcm93cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBkaW1lbnNpb24gZGV0YWlscyBieSBuYW1lIG9mIHRoZSBkaW1lbnNpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R8e2lkLG5hbWUsIXBhdGh9fVxuICAgKi9cbiAgZ2V0RGltZW5zaW9uRGV0YWlsc0J5TmFtZShuYW1lKSB7XG4gICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgIGlmICh0aGlzLm1ldGFEYXRhLmRpbWVuc2lvbnMpIHtcbiAgICAgIHRoaXMubWV0YURhdGEuZGltZW5zaW9uc1tuYW1lXS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIHJlc3VsdHMucHVzaCh0aGlzLmdldERpbWVuc2lvbkRldGFpbHMoaXRlbSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG91IG9mIHRoZSBhbmFseXRpY3Mgb2JqZWN0XG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICovXG4gIGdldCByb3dzKCkge1xuICAgIGxldCByb3dzID0gW107XG5cbiAgICB0aGlzLl9kYXRhLnJvd3MuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICByb3dzLnB1c2gobmV3IFJvdyhyb3csIHRoaXMuaGVhZGVycywgdGhpcy5tZXRhRGF0YSkpO1xuICAgIH0pO1xuICAgIHJldHVybiByb3dzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRpbWVuc2lvbiBkZXRhaWxzIG9mIGEgZ2l2ZW4gaWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYmplY3R8e2lkLG5hbWUsIXBhdGh9fVxuICAgKi9cbiAgZ2V0RGltZW5zaW9uRGV0YWlscyhpZCkge1xuICAgIHZhciBuYW1lID0gJyc7XG5cbiAgICBpZiAodGhpcy5tZXRhRGF0YS5uYW1lcykge1xuICAgICAgbmFtZSA9IHRoaXMubWV0YURhdGEubmFtZXNbaWRdO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tZXRhRGF0YS5pdGVtcykge1xuICAgICAgbmFtZSA9IHRoaXMubWV0YURhdGEuaXRlbXNbaWRdID8gdGhpcy5tZXRhRGF0YS5pdGVtc1tpZF0ubmFtZSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBpZCxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOlxuICAgICAgICB0aGlzLm1ldGFEYXRhLm91SGllcmFyY2h5ICYmXG4gICAgICAgICAgdGhpcy5tZXRhRGF0YS5vdUhpZXJhcmNoeVtpZF0gIT09IHVuZGVmaW5lZCA/IHRoaXMubWV0YURhdGEub3VIaWVyYXJjaHlbaWRdIDogdW5kZWZpbmVkXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogR2V0cyB0aGUgQW5hbHl0aWNzIGhlaWdodFxuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSAtIFRoZSBudW1iZXIgb2Ygcm93c1xuICAgKi9cbiAgZ2V0IGhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5oZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgQW5hbHl0aWNzIHdpZHRoXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEud2lkdGg7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZldGNoZXIgfSBmcm9tICcuLi91dGlsaXRpZXMvZmV0Y2hlcic7XG5pbXBvcnQgeyBBbmFseXRpY3NSZXN1bHQgfSBmcm9tICcuLi9yZXN1bHQvYW5hbHl0aWNzLXJlc3VsdCc7XG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyByZXByZXNlbnRzIHRoZSBBbmFseXRpY3MgRmV0Y2hlciBmb3IgcHJvY2Vzc2luZyBmb3IgbWFraW5nIFdlYiBBUEkgY2FsbHNcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBhbmFseXRpY3MgPSBGbi5BbmFseXRpY3MoKTtcbiAqIEBleHRlbmRzIEZldGNoZXJcbiAqL1xuZXhwb3J0IGNsYXNzIEFuYWx5dGljcyBleHRlbmRzIEZldGNoZXIge1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqIENyZWF0ZXMgYW4gYW5hbHl0aWNzIGZldGhjZXJcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBkaGlzIGFuYWx5dGljcyBzdHJ1Y3R1cmUgdG8gdXNlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2ZXJzaW9uID0gMjUpIHtcbiAgICBzdXBlcigpO1xuICAgIGlmICh0eXBlb2YgdmVyc2lvbiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICB2ZXJzaW9uID0gMjU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ZXJzaW9uID0gMjY7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucGFyYW1ldGVyc1snZGltZW5zaW9uJ10gPSB7fTtcbiAgICB0aGlzLnBvc3RQcm9jZXNzKGRhdGEgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuc3RhbmRhcmRpemVBbmFseXRpY3MoZGF0YSwgdmVyc2lvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGF0YSBmb3IgdGhlIGZldGNoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkeCBUaGUgaWQgb2YgdGhlIGRhdGEgdG8gZ2V0XG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3N9IC0gT2JqZWN0IHdpdGggdGhlIGFuYWx5dGljcyBpbnRlcmFjdGlvbiBwcm9wZXJ0aWVzXG4gICAqL1xuICBzZXREYXRhKGR4KSB7XG4gICAgdGhpcy5zZXREaW1lbnNpb24oJ2R4JywgZHgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHBlcmlvZCBmb3IgdGhlIGZldGNoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwZSBUaGUgaWQgb2YgdGhlIHBlcmlvZCB0byBnZXQgZGF0YSBmcm9tXG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3N9IE9iamVjdCB3aXRoIHRoZSBhbmFseXRpY3MgaW50ZXJhY3Rpb24gcHJvcGVydGllc1xuICAgKi9cbiAgc2V0UGVyaW9kKHBlKSB7XG4gICAgdGhpcy5zZXREaW1lbnNpb24oJ3BlJywgcGUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG9yZ2FuaXNhdGlvbiB1bml0IGZvciB0aGUgZmV0Y2hpbmcgb2YgdGhlIGFuYWx5dGljc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gb3UgLSBPcmdhbmlzYXRpb24gdW5pdFxuICAgKiBAcmV0dXJucyB7QW5hbHl0aWNzfSBPYmplY3Qgd2l0aCB0aGUgYW5hbHl0aWNzIGludGVyYWN0aW9uIHByb3BlcnRpZXNcbiAgICovXG4gIHNldE9yZ1VuaXQob3UpIHtcbiAgICB0aGlzLnNldERpbWVuc2lvbignb3UnLCBvdSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZGF0YSxwZXJpb2QgYW5kIG9yZ2FuaXNhdGlvbiB1bml0IGZyb20gZnVuY3Rpb24gaW5wdXQgcGFyYW1ldGVycyBvYmplY3QgZm9yIHRoZSBmZXRjaGluZyBvZiB0aGUgYW5hbHl0aWNzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYXJhbWV0ZXJzIC0gUnVsZSBwYXJhbWV0ZXJzXG4gICAqIEByZXR1cm5zIHtBbmFseXRpY3N9IE9iamVjdCB3aXRoIHRoZSBhbmFseXRpY3MgaW50ZXJhY3Rpb24gcHJvcGVydGllc1xuICAgKi9cbiAgc2V0U2VsZWN0aW9ucyhwYXJhbWV0ZXJzKSB7XG4gICAgdGhpcy5zZXRQZXJpb2QocGFyYW1ldGVycy5wZSk7XG4gICAgdGhpcy5zZXRPcmdVbml0KHBhcmFtZXRlcnMub3UpO1xuICAgIC8vIFNldCBkYXRhIFNlbGVjdGlvblxuICAgIGlmIChwYXJhbWV0ZXJzLnJ1bGUuanNvbi5kYXRhICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEBUT0RPIGFkZCBzdXBwb3J0IGZvciBvbmx5IGZldGNoaW5nIDExY2hhciBsb25nIHVpZHMsIGFuZCBqb2luaW5nIHRoZW1cbiAgICAgIC8vIGludG8gYSBjb21tYSBzZXBhcmF0ZWQgc3RyaW5nLCBzbyBpbiBmdXR1cmUsIHBhcmFtZXRlcnMucnVsZS5qc29uLmRhdGFcbiAgICAgIC8vIGNvdWxkIHNpbXBseSBiZSBhbiBpbmRpY2F0b3IgZXhwcmVzc3Npb24gd2l0aCB1bmFyeSBvcGVyYXRvcnMgYW5kIGphdmFzY3JpcHRcbiAgICAgIC8vIGZ1bmN0aW9ucyBpbnNpZGUgdG8gYmUgZXhlY3V0ZWQgdGhlIGV4cHJlc3MgcGFyYW1ldGVycy5ydWxlLmpzb24uZGF0YVxuICAgICAgdGhpcy5zZXREYXRhKHBhcmFtZXRlcnMucnVsZS5qc29uLmRhdGEpO1xuICAgIH1cbiAgICAvLyBTZXQgZHluYW1pYyBkaW1lbnNpb25cbiAgICBpZiAocGFyYW1ldGVycy5kaW1lbnNpb25zICE9PSB1bmRlZmluZWQgJiYgQXJyYXkuaXNBcnJheShwYXJhbWV0ZXJzLmRpbWVuc2lvbnMpKSB7XG4gICAgICBwYXJhbWV0ZXJzLmRpbWVuc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGltZW5zaW9uKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRpbWVuc2lvbi5pdGVtcykpIHtcbiAgICAgICAgICBsZXQgZGltZW5zaW9uSXRlbXMgPSAnJztcblxuICAgICAgICAgIGRpbWVuc2lvbi5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBkaW1lbnNpb25JdGVtcy5sZW5ndGggPiAwID8gZGltZW5zaW9uSXRlbXMgKz0gJzsnICsgaXRlbSA6IGRpbWVuc2lvbkl0ZW1zICs9IGl0ZW07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5zZXREaW1lbnNpb24oZGltZW5zaW9uLmlkLCBkaW1lbnNpb25JdGVtcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBkaW1lbnNpb24gZm9yIHRoZSBmZXRjaGluZyBvZiB0aGUgYW5hbHl0aWNzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkaW0gLSBEeW5hbWljIERpbWVuc2lvbiBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAtIER5bmFtaWMgZGltZW5zaW9uIG9wdGlvbnMgaWRlbnRpZmllcnNcbiAgICogQHJldHVybnMge0FuYWx5dGljc30gT2JqZWN0IHdpdGggdGhlIGFuYWx5dGljcyBpbnRlcmFjdGlvbiBwcm9wZXJ0aWVzXG4gICAqL1xuICBzZXREaW1lbnNpb24oZGltLCB2YWx1ZSkge1xuICAgIHRoaXMucGFyYW1ldGVyc1snZGltZW5zaW9uJ11bZGltXSA9IHZhbHVlID8gdmFsdWUgOiAnJztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFuZGFyZGl6ZXMgdGhlIGFuYWx5dGljcyBvYmplY3RcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFuYWx5dGljc09iamVjdCAtIFRoZSBhbmFseXRpY3Mgb2JqZWN0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2ZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgZGhpcyBhbmFseXRpY3Mgc3RydWN0dXJlIHRvIHVzZVxuICAgKiBAcmV0dXJucyB7QW5hbHl0aWNzUmVzdWx0fSAtIE9iamVjdCB3aXRoIHRoZSBhbmFseXRpY3MgcmVzdWx0c1xuICAgKi9cbiAgc3RhbmRhcmRpemVBbmFseXRpY3MoYW5hbHl0aWNzT2JqZWN0LCB2ZXJzaW9uID0gMjUpIHtcbiAgICBpZiAodHlwZW9mIHZlcnNpb24gPT09ICdib29sZWFuJykge1xuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAgdmVyc2lvbiA9IDI1O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmVyc2lvbiA9IDI2O1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBpZiBTZXJ2ZXJzaWRlIEV2ZW50IGNsdXN0ZXJpbmcgZG8gbm90aGluZ1xuICAgIGlmIChhbmFseXRpY3NPYmplY3QuY291bnQpIHtcbiAgICAgIHJldHVybiBhbmFseXRpY3NPYmplY3Q7XG4gICAgfVxuICAgIGxldCBzYW5pdGl6ZWRBbmFseXRpY3NPYmplY3QgPSB7XG4gICAgICBoZWFkZXJzOiBbXSxcbiAgICAgIG1ldGFEYXRhOiB7XG4gICAgICAgIGRpbWVuc2lvbnM6IHt9LFxuICAgICAgICBuYW1lczoge30sXG4gICAgICAgIGR4OiBbXSxcbiAgICAgICAgcGU6IFtdLFxuICAgICAgICBvdTogW10sXG4gICAgICAgIGNvOiBbXVxuICAgICAgfSxcbiAgICAgIHJvd3M6IFtdXG4gICAgfTtcblxuICAgIGlmIChhbmFseXRpY3NPYmplY3QpIHtcbiAgICAgIC8qKlxuICAgICAgICogQ2hlY2sgaGVhZGVyc1xuICAgICAgICovXG4gICAgICBpZiAoYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMpIHtcbiAgICAgICAgYW5hbHl0aWNzT2JqZWN0LmhlYWRlcnMuZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgbmV3SGVhZGVyID0gaGVhZGVyO1xuXG4gICAgICAgICAgICBzYW5pdGl6ZWRBbmFseXRpY3NPYmplY3QuaGVhZGVycy5wdXNoKG5ld0hlYWRlcik7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIGhlYWRlciBvYmplY3QnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENoZWNrIG1ldGFEYXRhXG4gICAgICAgKi9cbiAgICAgIGlmIChhbmFseXRpY3NPYmplY3QubWV0YURhdGEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgc2FuaXRpemVkTWV0YWRhdGEgPSB0aGlzLmdldFNhbml0aXplZEFuYWx5dGljc01ldGFkYXRhKFxuICAgICAgICAgICAgYW5hbHl0aWNzT2JqZWN0Lm1ldGFEYXRhLFxuICAgICAgICAgICAgdmVyc2lvblxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBzYW5pdGl6ZWRBbmFseXRpY3NPYmplY3QubWV0YURhdGEgPSBzYW5pdGl6ZWRNZXRhZGF0YTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBtZXRhZGF0YSBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENoZWNrIHJvd3NcbiAgICAgICAqL1xuICAgICAgaWYgKGFuYWx5dGljc09iamVjdC5yb3dzKSB7XG4gICAgICAgIHNhbml0aXplZEFuYWx5dGljc09iamVjdC5yb3dzID0gYW5hbHl0aWNzT2JqZWN0LnJvd3M7XG4gICAgICB9XG4gICAgfVxuICAgIHNhbml0aXplZEFuYWx5dGljc09iamVjdC5oZWlnaHQgPSBhbmFseXRpY3NPYmplY3QuaGVpZ2h0O1xuICAgIHNhbml0aXplZEFuYWx5dGljc09iamVjdC53aWR0aCA9IGFuYWx5dGljc09iamVjdC53aWR0aDtcbiAgICByZXR1cm4gbmV3IEFuYWx5dGljc1Jlc3VsdChzYW5pdGl6ZWRBbmFseXRpY3NPYmplY3QpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YW5kYXJkaXplcyB0aGUgYW5hbHl0aWNzIG1ldGFkYXRhIG9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gYW5hbHl0aWNNZXRhZGF0YSAtIFRoZSBhbmFseXRpY3MgbWV0YWRhdGEgb2JqZWN0XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB2ZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgZGhpcyBhbmFseXRpY3Mgc3RydWN0dXJlIHRvIHVzZVxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSAtIE9iamVjdCB3aXRoIHRoZSBhbmFseXRpY3MgbWV0YWRhdGFcbiAgICovXG4gIGdldFNhbml0aXplZEFuYWx5dGljc01ldGFkYXRhKGFuYWx5dGljTWV0YWRhdGEsIHZlcnNpb24pIHtcbiAgICBsZXQgc2FuaXRpemVkTWV0YWRhdGEgPSB7fTtcblxuICAgIGlmIChhbmFseXRpY01ldGFkYXRhKSB7XG4gICAgICBpZiAoYW5hbHl0aWNNZXRhZGF0YS5vdUhpZXJhcmNoeSkge1xuICAgICAgICBzYW5pdGl6ZWRNZXRhZGF0YS5vdUhpZXJhcmNoeSA9IGFuYWx5dGljTWV0YWRhdGEub3VIaWVyYXJjaHk7XG4gICAgICB9XG4gICAgICBpZiAodmVyc2lvbiA8IDI2KSB7XG4gICAgICAgIC8vIEdldCBvbGQgc3RydWN0dXJlXG4gICAgICAgIHNhbml0aXplZE1ldGFkYXRhLm5hbWVzID0ge307XG4gICAgICAgIGlmIChhbmFseXRpY01ldGFkYXRhLm5hbWVzKSB7XG4gICAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEubmFtZXMgPSBhbmFseXRpY01ldGFkYXRhLm5hbWVzO1xuICAgICAgICB9IGVsc2UgaWYgKGFuYWx5dGljTWV0YWRhdGEuaXRlbXMpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhbmFseXRpY01ldGFkYXRhLml0ZW1zKS5mb3JFYWNoKG5hbWVLZXkgPT4ge1xuICAgICAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEubmFtZXNbbmFtZUtleV0gPVxuICAgICAgICAgICAgICBhbmFseXRpY01ldGFkYXRhLml0ZW1zW25hbWVLZXldLm5hbWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYW5hbHl0aWNNZXRhZGF0YS5kaW1lbnNpb25zKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoYW5hbHl0aWNNZXRhZGF0YS5kaW1lbnNpb25zKS5mb3JFYWNoKG5hbWVLZXkgPT4ge1xuICAgICAgICAgICAgc2FuaXRpemVkTWV0YWRhdGFbbmFtZUtleV0gPSBhbmFseXRpY01ldGFkYXRhLmRpbWVuc2lvbnNbbmFtZUtleV07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEdldCBuZXcgc3RydWN0dXJlXG4gICAgICAgIHNhbml0aXplZE1ldGFkYXRhLml0ZW1zID0ge307XG4gICAgICAgIGlmIChhbmFseXRpY01ldGFkYXRhLml0ZW1zKSB7XG4gICAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEuaXRlbXMgPSBhbmFseXRpY01ldGFkYXRhLml0ZW1zO1xuICAgICAgICB9IGVsc2UgaWYgKGFuYWx5dGljTWV0YWRhdGEubmFtZXMpIHtcbiAgICAgICAgICBPYmplY3Qua2V5cyhhbmFseXRpY01ldGFkYXRhLml0ZW1zKS5mb3JFYWNoKG5hbWVLZXkgPT4ge1xuICAgICAgICAgICAgYW5hbHl0aWNNZXRhZGF0YS5pdGVtc1tuYW1lS2V5XSA9IHtcbiAgICAgICAgICAgICAgbmFtZTogYW5hbHl0aWNNZXRhZGF0YS5uYW1lc1tuYW1lS2V5XVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghYW5hbHl0aWNNZXRhZGF0YS5kaW1lbnNpb25zKSB7XG4gICAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEuZGltZW5zaW9ucyA9IHt9O1xuICAgICAgICAgIE9iamVjdC5rZXlzKGFuYWx5dGljTWV0YWRhdGEpLmZvckVhY2gobmFtZUtleSA9PiB7XG4gICAgICAgICAgICBpZiAoWyduYW1lcycsICdpdGVtcycsICdkaW1lbnNpb25zJ10uaW5kZXhPZihuYW1lS2V5KSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEuZGltZW5zaW9uc1tuYW1lS2V5XSA9IGFuYWx5dGljTWV0YWRhdGFbbmFtZUtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuaXRpemVkTWV0YWRhdGEuZGltZW5zaW9ucyA9IGFuYWx5dGljTWV0YWRhdGEuZGltZW5zaW9ucztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2FuaXRpemVkTWV0YWRhdGE7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdXJsIGZvciBmZXRjaGluZ1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHVybCgpIHtcbiAgICByZXR1cm4gJ2FuYWx5dGljcz8nICsgdGhpcy5fdXJsUGFyYW1ldGVycztcbiAgfVxufVxuIiwiLy8gRmFsbGJhY2sgZm9yIGVuZ2luZXMgdGhhdCBkb24ndCBzdXBwb3J0IFN5bWJvbFxuY29uc3QgTElTVEVORVJTID0gU3ltYm9sID8gU3ltYm9sKCkgOiAnX19saXN0ZW5lcnMnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgUHJvZ3Jlc3MgUHJvbWlzZVxuICogQGV4dGVuZHMgUHJvbWlzZVxuICovXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3NQcm9taXNlIGV4dGVuZHMgUHJvbWlzZSB7XG4gIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG4gICAgc3VwZXIoKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgIGV4ZWN1dG9yKFxuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3QsXG4gICAgICAgIC8vIFBhc3MgbWV0aG9kIGZvciBwYXNzaW5nIHByb2dyZXNzIHRvIGxpc3RlbmVyXG4gICAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNbTElTVEVORVJTXS5mb3JFYWNoKGxpc3RlbmVyID0+IGxpc3RlbmVyKHZhbHVlKSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICAgIHRoaXNbTElTVEVORVJTXSA9IFtdO1xuICB9XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge2NhbGxiYWNrfSBoYW5kbGVyXG4gICAqL1xuICBwcm9ncmVzcyhoYW5kbGVyKSB7XG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BST0dSRVNTX1JFUVVJUkVTX0ZVTkNUSU9OJyk7XG4gICAgfVxuICAgIHRoaXNbTElTVEVORVJTXS5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHByb21pc2VzXG4gICAqL1xuICBzdGF0aWMgYWxsKHByb21pc2VzKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IG5ldyBBcnJheShwcm9taXNlcy5sZW5ndGgpO1xuICAgIGNvbnN0IGxlbmd0aCA9IHByb21pc2VzLmxlbmd0aDtcbiAgICBsZXQgcmVzb2x2ZUNvdW50ID0gMDtcblxuICAgIHJldHVybiBuZXcgUHJvZ3Jlc3NQcm9taXNlKChyZXNvbHZlLCByZWplY3QsIHByb2dyZXNzKSA9PiB7XG4gICAgICBwcm9taXNlcy5mb3JFYWNoKChwcm9taXNlLCBpbmRleCkgPT4ge1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdID0gcmVzdWx0O1xuICAgICAgICAgICAgcmVzdWx0cy5wcm9wb3J0aW9uID0gKytyZXNvbHZlQ291bnQgLyBsZW5ndGg7XG4gICAgICAgICAgICBwcm9ncmVzcyhyZXN1bHRzKTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlQ291bnQgPT09IGxlbmd0aCkgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWplY3QpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gaW5wdXRzXG4gICAqIEBwYXJhbSB7Kn0gaGFuZGxlclxuICAgKi9cbiAgc3RhdGljIHNlcXVlbmNlKGlucHV0cywgaGFuZGxlcikge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBjb25zdCBsZW5ndGggPSBpbnB1dHMubGVuZ3RoO1xuICAgIGxldCByZXNvbHZlQ291bnQgPSAwO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9ncmVzc1Byb21pc2UoKHJlc29sdmUsIHJlamVjdCwgcHJvZ3Jlc3MpID0+IHtcbiAgICAgIGZ1bmN0aW9uIGludm9rZU5leHQoKSB7XG4gICAgICAgIGhhbmRsZXJcbiAgICAgICAgICAuY2FsbChudWxsLCBpbnB1dHNbcmVzdWx0cy5sZW5ndGhdKVxuICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgIHJlc3VsdHMucHJvcG9ydGlvbiA9ICsrcmVzb2x2ZUNvdW50IC8gbGVuZ3RoO1xuICAgICAgICAgICAgcHJvZ3Jlc3MocmVzdWx0cyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPT09IGxlbmd0aCkgcmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgIGVsc2UgaW52b2tlTmV4dCgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgICB9XG4gICAgICBpbnZva2VOZXh0KCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFJ1bm5lciB9IGZyb20gJy4vcnVubmVyJztcbmltcG9ydCB7IEZldGNoZXIgfSBmcm9tICcuL2ZldGNoZXInO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIG11bHRpcGxlIGZldGNoZXIgcHJvY2Vzc1xuICpAZXh0ZW5kcyBGZXRjaGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBNdWx0aUZldGNoZXIgZXh0ZW5kcyBGZXRjaGVyIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZldGhjZXJcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcihmZXRjaGVycykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fZmV0Y2hlcnMgPSBmZXRjaGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBGZXRjaGVyc1xuICAgKiBAcmV0dXJucyB7YXJyYXl9IGZldGNoZXJzIC0gQXJyYXkgb2YgRmV0Y2hlcnNcbiAgICovXG4gIGdldCBmZXRjaGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5fZmV0Y2hlcnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZXhlY3V0ZWQgUHJvbWlzZVxuICAgKiBAcmV0dXJucyB7UHJvZ3Jlc3NQcm9taXNlfSBwcm9ncmVzc1Byb21pc2UgLSBQcm9taXNlIHdoaWNoIGFsZXJ0cyBwcm9ncmVzc3NcbiAgICovXG4gIGdldCgpIHtcbiAgICByZXR1cm4gKG5ldyBSdW5uZXIoKSkuZ2V0QWxsUmVzdWx0cyh0aGlzKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQW5hbHl0aWNzIH0gZnJvbSAnLi9tb2RlbC9hbmFseXRpY3MuanMnO1xuaW1wb3J0IHsgQW5hbHl0aWNzUmVzdWx0IH0gZnJvbSAnLi9yZXN1bHQvYW5hbHl0aWNzLXJlc3VsdCc7XG5pbXBvcnQgeyBFdmVudEFuYWx5dGljcyB9IGZyb20gJy4vbW9kZWwvZXZlbnQtYW5hbHl0aWNzJztcbmltcG9ydCB7IFNRTFZpZXdEYXRhIH0gZnJvbSAnLi9tb2RlbC9zcWwtdmlldy5qcyc7XG5pbXBvcnQgeyBQcm9ncmVzc1Byb21pc2UgfSBmcm9tICcuL3V0aWxpdGllcy9wcm9ncmVzcy1wcm9taXNlJztcbmltcG9ydCB7IFJ1bm5lciB9IGZyb20gJy4vdXRpbGl0aWVzL3J1bm5lci5qcyc7XG5pbXBvcnQgeyBEZXBlbmRlbmN5IH0gZnJvbSAnLi91dGlsaXRpZXMvZGVwZW5kZW5jeSc7XG5pbXBvcnQgeyBNdWx0aUZldGNoZXIgfSBmcm9tICcuL3V0aWxpdGllcy9tdWx0aS1mZXRjaGVyJztcbmltcG9ydCB7IElkZW50aWZpYWJsZU9iamVjdCB9IGZyb20gJy4vbW9kZWwvaWRlbnRpZmlhYmxlLW9iamVjdC5qcyc7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgbWFpbiBob2xkZXIgZm9yIHRoZSBmdW5jdGlvbmFsaXRpZXMgb2YgdGhlIGZ1bmN0aW9uXG4gKiBAbmFtZXNwYWNlXG4gKiBAdHlwZSB7e1Byb21pc2U6IFByb2dyZXNzUHJvbWlzZSwgQW5hbHl0aWNzOiBBbmFseXRpY3MsXG4gKiAgIEFuYWx5dGljc1Jlc3VsdDogQW5hbHl0aWNzUmVzdWx0LFxuICogICBPcmdhbmlzYXRpb25Vbml0OiBPcmdhbmlzYXRpb25Vbml0LCBTUUxWaWV3RGF0YTogU1FMVmlld0RhdGEsXG4gKiAgIFJ1bm5lcjogUnVubmVyLCBEZXBlbmRlbmN5OiBEZXBlbmRlbmN5LCBNdWx0aUZldGNoZXI6IE11bHRpRmV0Y2hlcixcbiAqICAgYWxsOiAoZnVuY3Rpb24oRmV0Y2hlcltdKSksIGluaXQ6IChmdW5jdGlvbigqPSkpfVxuICogfVxuICovXG5sZXQgRm4gPSB7XG4gIFByb21pc2U6IFByb2dyZXNzUHJvbWlzZSxcbiAgQW5hbHl0aWNzOiBBbmFseXRpY3MsXG4gIEV2ZW50QW5hbHl0aWNzOiBFdmVudEFuYWx5dGljcyxcbiAgQW5hbHl0aWNzUmVzdWx0OiBBbmFseXRpY3NSZXN1bHQsXG4gIElkZW50aWZpYWJsZU9iamVjdDogSWRlbnRpZmlhYmxlT2JqZWN0LFxuICBTUUxWaWV3RGF0YTogU1FMVmlld0RhdGEsXG4gIFJ1bm5lcjogUnVubmVyLFxuICBEZXBlbmRlbmN5OiBEZXBlbmRlbmN5LFxuICBNdWx0aUZldGNoZXI6IE11bHRpRmV0Y2hlcixcbiAgLyoqXG4gICAqIEFkZHMgbXVsdGlwbGUgZmV0Y2hlcnMgaW4gcXVldWUgZm9yIGV4ZWN1dGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtGZXRjaGVyW119IGZldGNoZXJzIC0gVGhlIGZldGhlcnMgaXMgYW4gYXJyYXkgb2YgdGhlIGZldGNoZXJzXG4gICAqIEByZXR1cm5zIHtQcm9ncmVzc1Byb21pc2V9IC0gUHJvZ3Jlc3MgUHJvbWlzZSBmb3IgZmV0Y2hpbmcgdGhlIHZhcmlvdXMgZmV0Y2hlcnNcbiAgICogQGV4YW1wbGVcbiAgICogRm4uYWxsKFtuZXcgRm4uQW5hbHl0aWNzKCksIG5ldyBGbi5PcmdhbmlzYXRpb25Vbml0KCldKTtcbiAgICovXG4gIGFsbDogZmV0Y2hlcnMgPT4ge1xuICAgIHJldHVybiBuZXcgTXVsdGlGZXRjaGVyKGZldGNoZXJzKTtcbiAgfSxcbiAgLyoqXG4gICAqIENvbmZpZ3VyZXMgdGhlIHJ1bm5pbmcgZW52aXJvbm1lbnQgcGFyYW1ldGVyc1xuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlndXJhdGlvbiAtIFRoZSBmZXRoZXJzIGlzIGFuIGFycmF5IG9mIHRoZSBmZXRjaGVyc1xuICAgKiBAcmV0dXJucyB7UHJvZ3Jlc3NQcm9taXNlfSAtIFByb2dyZXNzIFByb21pc2UgZm9yIGZldGNoaW5nIHRoZSB2YXJpb3VzIGZldGNoZXJzXG4gICAqIEBleGFtcGxlXG4gICAqIEZuLmFsbCh7YmFzZVVybDonJ30pO1xuICAgKi9cbiAgaW5pdDogY29uZmlnID0+IHtcbiAgICBSdW5uZXIuaW5pdGlhdGVSdW5uZXIoY29uZmlnKTtcbiAgfVxufTtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHdpbmRvdy5GbiA9IEZuO1xufVxuZXhwb3J0IHsgRm4gfTtcbiIsImltcG9ydCB7IEFuYWx5dGljcyB9IGZyb20gJy4vYW5hbHl0aWNzJztcblxuLyoqXG4gKiBUaGlzIHJlcHJlc2VudHMgdGhlIEV2ZW50IEFuYWx5dGljcyBGZXRjaGVyIGZvciBwcm9jZXNzaW5nIGFuYWx5dGljcyBjYWxsc1xuICpcbiAqIEBleHRlbmRzIEFuYWx5dGljc1xuICovXG5leHBvcnQgY2xhc3MgRXZlbnRBbmFseXRpY3MgZXh0ZW5kcyBBbmFseXRpY3Mge1xuICAvKipcbiAgICogU2V0cyB0aGUgUHJvZ3JhbSBmb3IgdGhlIGZldGNoXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9ncmFtIC0gVGhlIGlkIG9mIHRoZSBwcm9ncmFtXG4gICAqIEByZXR1cm5zIHtFdmVudEFuYWx5dGljc30gLSBPYmplY3Qgd2l0aCB0aGUgZXZlbnQgYW5hbHl0aWNzXG4gICAqL1xuICBzZXRQcm9ncmFtKHByb2dyYW0pIHtcbiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1cmwgZm9yIGZldGNoaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIHJldHVybiAnYW5hbHl0aWNzL2V2ZW50cy9xdWVyeS8nICsgdGhpcy5wcm9ncmFtICsgJz8nICsgdGhpcy5fdXJsUGFyYW1ldGVycztcbiAgfVxufVxuIiwiaW1wb3J0IHsgRmV0Y2hlciB9IGZyb20gJy4uL3V0aWxpdGllcy9mZXRjaGVyJztcblxuLyoqXG4gKiBSZXByZXNlbnRzIElkZW50aWZpYWJsZSBPYmplY3RcbiAqQGV4dGVuZHMgRmV0Y2hlclxuICovXG5leHBvcnQgY2xhc3MgSWRlbnRpZmlhYmxlT2JqZWN0IGV4dGVuZHMgRmV0Y2hlciB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgaWRlbnRpZmlhYmxlIG9iamVjdCBmZXRjaGVyXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb2JqZWN0TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBpZGVudGlmaWFibGUgb2JqZWN0IGFzIHVzZWQgaW4gdGhlIHdlYiBhcGlcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogY29uc3QgaWRlbnRpZmlhYmxlT2JqZWN0ID0gbmV3IEZuLklkZW50aWZpYWJsZU9iamVjdCgnb3JnYW5pc2F0aW9uVW5pdHMnKTsgLy8gT3JnYW5pc2F0aW9uIFVuaXQgZmV0Y2hlclxuICAgKi9cbiAgY29uc3RydWN0b3Iob2JqZWN0TmFtZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fZmlsdGVycyA9IFtdO1xuICAgIHRoaXMub2JqZWN0TmFtZSA9IG9iamVjdE5hbWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbmFtZSBvZiB0aGUgaWRlbnRpZmlhYmxlIG9iamVjdFxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIG5hbWUgb2YgdGhlIElkZW50aWZpYmFsZSBPYmplY3RcbiAgICovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdE5hbWU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgd2hlcmUgY2xhdXNlIGZvciBmaWx0ZXJpbmcgb2YgZGF0YVxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmlnaHQgLSBSaWdodCBleHByZXNzaW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcGVyYXRvciAtIEV4cHJlc3Npb24gb3BlcmF0b3JcbiAgICogQHBhcmFtIHtzdHJpbmd8YXJyYXl9IGxlZnQgLSBSaWdodCBleHByZXNzaW9uXG4gICAqIEByZXR1cm5zIHtJZGVudGlmaWFibGVPYmplY3R9IElkZW50aWZpYWJsZU9iamVjdCBJZGVudGlmaWFibGUgb2JqZWN0IHdpdGggd2hlcmUgY2xhdXNlIGFwcGVuZGVkXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IG9yZ2FuaXNhdGlvblVuaXQgPSBuZXcgRm4uSWRlbnRpZmlhYmxlT2JqZWN0KCdvcmdhbmlzYXRpb25Vbml0cycpO1xuICAgKiBvcmdhbmlzYXRpb25Vbml0LndoZXJlKCdsZXZlbCcsJz09Jyw0KTsgLy9XaWxsIHNldCB0byBmZXRjaCBvcmdhbmlzYXRpb24gdW5pdHMgYXQgbGV2ZWwgNFxuICAgKiBvcmdhbmlzYXRpb25Vbml0LndoZXJlKCdjaGlsZHJlbicsJ2VtcHR5Jyk7IC8vV2lsbCBzZXQgdG8gZmV0Y2ggb3JnYW5pc2F0aW9uIHVuaXRzIHdpdGggbm8gY2hpbGRyZW5cbiAgICovXG4gIHdoZXJlKHJpZ2h0LCBvcGVyYXRvciwgbGVmdCkge1xuICAgIHRoaXMuX2ZpbHRlcnMucHVzaCh7XG4gICAgICByaWdodDogcmlnaHQsXG4gICAgICBvcGVyYXRvcjogb3BlcmF0b3IsXG4gICAgICBsZWZ0OiBsZWZ0XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdXJsIGZvciBmZXRjaGluZ1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHVybCgpIHtcbiAgICB2YXIgdXJsID0gdGhpcy5fdXJsUGFyYW1ldGVycztcblxuICAgIHRoaXMuX2ZpbHRlcnMuZm9yRWFjaChmaWx0ZXIgPT4ge1xuICAgICAgaWYgKHVybCAhPT0gJycpIHtcbiAgICAgICAgdXJsICs9ICcmJztcbiAgICAgIH1cbiAgICAgIHVybCArPSAnZmlsdGVyPScgKyBmaWx0ZXIucmlnaHQ7XG4gICAgICBpZiAoZmlsdGVyLm9wZXJhdG9yID09PSAnPT0nKSB7XG4gICAgICAgIHVybCArPSAnOmVxOicgKyBmaWx0ZXIubGVmdDtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyLm9wZXJhdG9yID09PSAnPCcpIHtcbiAgICAgICAgdXJsICs9ICc6bHQ6JyArIGZpbHRlci5sZWZ0O1xuICAgICAgfSBlbHNlIGlmIChmaWx0ZXIub3BlcmF0b3IgPT09ICc8PScpIHtcbiAgICAgICAgdXJsICs9ICc6bGU6JyArIGZpbHRlci5sZWZ0O1xuICAgICAgfSBlbHNlIGlmIChmaWx0ZXIub3BlcmF0b3IgPT09ICc+Jykge1xuICAgICAgICB1cmwgKz0gJzpndDonICsgZmlsdGVyLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5vcGVyYXRvciA9PT0gJz49Jykge1xuICAgICAgICB1cmwgKz0gJzpnZTonICsgZmlsdGVyLmxlZnQ7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlci5vcGVyYXRvciA9PT0gJzw+Jykge1xuICAgICAgICB1cmwgKz0gJzohZXE6JyArIGZpbHRlci5sZWZ0O1xuICAgICAgfSBlbHNlIGlmIChmaWx0ZXIub3BlcmF0b3IgPT09ICdpbicgfHwgZmlsdGVyLm9wZXJhdG9yID09PSAnIWluJykge1xuICAgICAgICB1cmwgKz0gJzonICsgZmlsdGVyLm9wZXJhdG9yICsgJzpbJyArIGZpbHRlci5sZWZ0ICsgJ10nO1xuICAgICAgfSBlbHNlIGlmICghZmlsdGVyLmxlZnQpIHtcbiAgICAgICAgdXJsICs9ICc6JyArIGZpbHRlci5vcGVyYXRvcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVybCArPSAnOicgKyBmaWx0ZXIub3BlcmF0b3IgKyAnOicgKyBmaWx0ZXIubGVmdDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5uYW1lICsgJy5qc29uPycgKyB1cmw7XG4gIH1cbn1cbiIsImltcG9ydCB7IEZldGNoZXIgfSBmcm9tICcuLi91dGlsaXRpZXMvZmV0Y2hlcic7XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGZldGNoZXIgdG8gbG9hZCBzcWwgdmlldyBkYXRhXG4gKlxuICogQGV4dGVuZHMgRmV0Y2hlclxuICovXG5leHBvcnQgY2xhc3MgU1FMVmlld0RhdGEgZXh0ZW5kcyBGZXRjaGVyIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgU1FMVmlld0RhdGEgSW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIC0gVGhlIFNxbCBWaWV3IGlkZW50aWZpZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKGlkKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9pZCA9IGlkO1xuICAgIHRoaXMucGFyYW1ldGVyc1sndmFyJ10gPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YXJpYWJsZSBmb3IgdGhlIGZldGNoaW5nIG9mIHRoZSBzcWwgdmlldyBkYXRhXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YXJpYWJsZSAtIFZhcmlhYmxlIGlkZW50aWZpZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gVmFsdWUgb2YgdGhlIHZhcmlhYmxlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMge1NRTFZpZXdEYXRhfSAtIE9iamVjdCBvZiB0aGUgc3FsIHZpZXdcbiAgICovXG4gIHNldFZhcmlhYmxlKHZhcmlhYmxlLCB2YWx1ZSkge1xuICAgIHRoaXMucGFyYW1ldGVyc1sndmFyJ11bdmFyaWFibGVdID0gdmFsdWUgPyB2YWx1ZSA6ICcnO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBHZXRzIHRoZSB1cmwgZm9yIGZldGNoaW5nXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgdXJsKCkge1xuICAgIGxldCB1cmwgPSAnc3FsVmlld3MvJyArIHRoaXMuX2lkICsgJy9kYXRhLmpzb24/JyArIHRoaXMuX3VybFBhcmFtZXRlcnM7XG5cbiAgICByZXR1cm4gdXJsO1xuICB9XG59XG4iLCIvKipcbiAqIFRoaXMgY2FsbGJhY2sgdHlwZSBpcyBjYWxsZWQgYHByb2Nlc3NDYWxsYmFja2AuXG4gKlxuICogQG1peGluXG4gKiBAY2FsbGJhY2sgcHJvY2Vzc0NhbGxiYWNrXG4gKiBAcGFyYW0ge09iamVjdH0gcmVzdWx0XG4gKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcHJvY2VzcyBkZXBlbmRlbmN5XG4gKi9cbmV4cG9ydCBjbGFzcyBEZXBlbmRlbmN5IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkZXBlbmRlbmN5IGluc3RhbmNlXG4gICAqIEBwYXJhbSB7UHJvY2Vzc30gcHJvY2Vzc1xuICAgKiBAcGFyYW0ge3Byb2Nlc3NDYWxsYmFja30gcHJvY2Vzc0NhbGxiYWNrXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9jZXNzLCBwcm9jZXNzQ2FsbGJhY2spIHtcbiAgICB0aGlzLnByb2Nlc3MgPSBwcm9jZXNzO1xuICAgIHRoaXMucHJvY2Vzc0NhbGxiYWNrID0gcHJvY2Vzc0NhbGxiYWNrO1xuICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9